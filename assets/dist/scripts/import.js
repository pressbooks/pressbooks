(()=>{"use strict";const e=function(e){var t=document.getElementById("pb-sse-seconds");document.getElementById("pb-sse-minutes").textContent="",t.textContent="",clearInterval(e)},t=function(e){return e>9?e:"0".concat(e)};jQuery((function(n){var o=n("input[type=submit]"),r=n("#pb-sse-progressbar"),i=n("#pb-sse-info"),a=n(".notice"),s=null,d=function(){var t=PB_ImportToken.ajaxUrl,a=new EventSource(t);a.onopen=function(){n(window).on("beforeunload",(function(){return PB_ImportToken.unloadWarning}))},a.onmessage=function(t){var d=JSON.parse(t.data);switch(d.action){case"updateStatusBar":r.val(parseInt(d.percentage,10)),i.html(d.info);break;case"complete":a.close(),n(window).unbind("beforeunload"),d.error?(r.val(0).hide(),o.attr("disabled",!1).show(),function(e,t,n){var o,r=document.createElement("div"),i=document.createElement("p"),a=document.getElementsByTagName("h1")[0];if(i.setAttribute("aria-live","assertive"),i.insertAdjacentHTML("beforeend",t),r.classList.add("notice","notice-".concat(e)),r.appendChild(i),n){o=document.createElement("button");var s=document.createElement("span");o.classList.add("notice-dismiss"),s.classList.add("screen-reader-text"),s.appendChild(document.createTextNode("Dismiss this notice.")),o.appendChild(s),r.classList.add("is-dismissible"),r.appendChild(o)}a.parentNode.insertBefore(r,a.nextSibling),o&&(o.onclick=function(){r.parentNode.removeChild(r)})}("error",d.error,!0),s&&e(s)):window.location=PB_ImportToken.redirectUrl}},a.onerror=function(){a.close(),r.removeAttr("value"),i.html("EventStream Connection Error "+PB_ImportToken.reloadSnippet),n(window).unbind("beforeunload"),s&&e(s)}};n("#pb-import-form-step-1").on("submit",(function(){n("input[type=submit]").attr("disabled",!0)})),n("#pb-import-form-step-2").on("submit",(function(e){var c,u,m;return e.preventDefault(),r.val(0).show(),o.attr("disabled",!0),a.remove(),c=document.getElementById("pb-sse-seconds"),u=document.getElementById("pb-sse-minutes"),m=0,u.textContent="00:",c.textContent="00",s=setInterval((function(){c.textContent=t(++m%60),u.textContent=t(parseInt(m/60,10))+":"}),1e3),i.html(PB_ImportToken.ajaxSubmitMsg),n(this).ajaxSubmit({done:d(),timeout:0}),!1}))}))})();