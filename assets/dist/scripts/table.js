!function(){!function(){"use strict";function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var r={};return At.each(t,function(t,n){r[t]=F.constant(e[n])}),r}}function e(t,e){var n=t.concat(e);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return zt.validateStrArr("required",t),zt.validateStrArr("optional",e),zt.checkDupes(n),function(r){var o=Mt.keys(r);At.forall(t,function(t){return At.contains(o,t)})||zt.reqMessage(t,o);var i=At.filter(o,function(t){return!At.contains(n,t)});i.length>0&&zt.unsuppMessage(i);var u={};return At.each(t,function(t){u[t]=F.constant(r[t])}),At.each(e,function(t){u[t]=F.constant(Object.prototype.hasOwnProperty.call(r,t)?V.some(r[t]):V.none())}),u}}function n(t,e,n){var r=t.isiOS()&&!0===/ipad/i.test(n),o=t.isiOS()&&!r,i=t.isAndroid()&&3===t.version.major,u=t.isAndroid()&&4===t.version.major,a=r||i||u&&!0===/mobile/i.test(n),c=t.isiOS()||t.isAndroid(),l=c&&!a,s=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:F.constant(r),isiPhone:F.constant(o),isTablet:F.constant(a),isPhone:F.constant(l),isTouch:F.constant(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:F.constant(s)}}function r(t,e,n,r,o){return t(n,r)?V.some(n):X.isFunction(o)&&o(n)?V.none():e(n,r,o)}function o(){var t=function(t){return se.fromDom(t.dom().cloneNode(!1))},e=function(t){return!!Cr.isElement(t)&&("body"===Cr.name(t)||At.contains(iu,Cr.name(t)))},n=function(t){return!!Cr.isElement(t)&&At.contains(["br","img","hr","input"],Cr.name(t))},r=function(t,e){return t.dom().compareDocumentPosition(e.dom())},o=function(t,e){var n=Pr.clone(t);Pr.setAll(e,n)};return{up:F.constant({selector:lo.ancestor,closest:lo.closest,predicate:no.ancestor,all:sr.parents}),down:F.constant({selector:Kr.descendants,predicate:zr.descendants}),styles:F.constant({get:Zo.get,getRaw:Zo.getRaw,set:Zo.set,remove:Zo.remove}),attrs:F.constant({get:Pr.get,set:Pr.set,remove:Pr.remove,copyTo:o}),insert:F.constant({before:ui.before,after:ui.after,afterAll:fi.after,append:ui.append,appendAll:fi.append,prepend:ui.prepend,wrap:ui.wrap}),remove:F.constant({unwrap:pi.unwrap,remove:pi.remove}),create:F.constant({nu:se.fromTag,clone:t,text:se.fromText}),query:F.constant({comparePosition:r,prevSibling:sr.prevSibling,nextSibling:sr.nextSibling}),property:F.constant({children:sr.children,name:Cr.name,parent:sr.parent,isText:Cr.isText,isComment:Cr.isComment,isElement:Cr.isElement,getText:Ii.get,setText:Ii.set,isBoundary:e,isEmptyTag:n}),eq:zn.eq,is:zn.is}}function i(t,e){var n=function(e,n){if(!X.isNumber(n)&&!n.match(/^[0-9]+$/))throw t+".set accepts only positive integer values. Value was "+n;var r=e.dom();Mo.isSupported(r)&&(r.style[t]=n+"px")},r=function(n){var r=e(n);if(r<=0||null===r){var o=Zo.get(n,t);return parseFloat(o)||0}return r},o=r,i=function(t,e){return At.foldl(e,function(e,n){var r=Zo.get(t,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?e:e+o},0)};return{set:n,get:r,getOuter:o,aggregate:i,max:function(t,e,n){var r=i(t,n);return e>r?e-r:0}}}function u(t){var e=function(e){return t(e).isRtl()?$c.rtl:$c.ltr},n=function(t,n){return e(n).delta(t,n)},r=function(t,n){return e(n).positions(t,n)};return{delta:n,edge:function(t){return e(t).edge(t)},positions:r}}function a(t,e,n){var r=n||!1,o=function(){e(),r=!0},i=function(){t(),r=!1};return{on:o,off:i,toggle:function(){(r?i:o)()},isOn:function(){return r}}}function c(t,e,n,r){function o(t,e,n){n&&u.setAttrib(t,e,n)}function i(t,e,n){n&&u.setStyle(t,e,n)}var u=t.dom;gg.updateStyleField(t,r);var a=r.control.rootControl.toJSON();t.undoManager.transact(function(){rg.each(e,function(e){o(e,"scope",a.scope),o(e,"style",a.style),o(e,"class",a.class),i(e,"height",xm(a.height)),a.type!==e.parentNode.nodeName.toLowerCase()&&xg(t.dom,e,a.type),a.align!==n.align&&(lg.unApplyAlign(t,e),lg.applyAlign(t,e,a.align))}),t.focus()})}function l(t,e,n,r){if("TD"===e.tagName||"TH"===e.tagName)t.setStyle(e,n,r);else if(e.children)for(var o=0;o<e.children.length;o++)l(t,e.children[o],n,r)}function s(t){var e=Ut.immutable.apply(null,t),n=[];return{bind:function(t){if(void 0===t)throw"Event bind error: undefined handler";n.push(t)},unbind:function(t){n=At.filter(n,function(e){return e!==t})},trigger:function(){var t=e.apply(null,arguments);At.each(n,function(e){e(t)})}}}function f(t){var e=Fl.merge({layerClass:ap.resolve("blocker")},t),n=se.fromTag("div");return Pr.set(n,"role","presentation"),Zo.setAll(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),js.add(n,ap.resolve("blocker")),js.add(n,e.layerClass),{element:function(){return n},destroy:function(){pi.remove(n)}}}function d(){var t=V.none(),e=function(){t=V.none()},n=function(e,n){var r=t.map(function(t){return e.compare(t,n)});return t=V.some(n),r},r=function(t,e){e.extract(t).each(function(t){n(e,t).each(function(t){o.trigger.move(t)})})},o=ep.create({move:s(["info"])});return{onEvent:r,reset:e,events:o.registry}}function m(t){return{onEvent:function(t,e){},reset:F.noop}}function g(){var t=m(),e=d(),n=t,r=function(){n.reset(),n=e},o=function(){n.reset(),n=t},i=function(t,e){n.onEvent(t,e)};return{on:r,off:o,isOn:function(){return n===e},onEvent:i,events:e.events}}function p(){var t=ep.create({drag:s(["xDelta","yDelta"])});return{mutate:function(e,n){t.trigger.drag(e,n)},events:t.registry}}function h(){var t=ep.create({drag:s(["xDelta","yDelta","target"])}),e=V.none(),n=p();return n.events.drag.bind(function(n){e.each(function(e){t.trigger.drag(n.xDelta(),n.yDelta(),e)})}),{assign:function(t){e=V.some(t)},get:function(){return e},mutate:n.mutate,events:t.registry}}function v(t,e,n){var r=h(),o=Np.transform(r,{}),i=V.none(),u=function(t,e){return V.from(Pr.get(t,e))};r.events.drag.bind(function(t){u(t.target(),"data-row").each(function(e){var n=ld.getInt(t.target(),"top");Zo.set(t.target(),"top",n+t.yDelta()+"px")}),u(t.target(),"data-column").each(function(e){var n=ld.getInt(t.target(),"left");Zo.set(t.target(),"left",n+t.xDelta()+"px")})});var a=function(t,e){return ld.getInt(t,e)-parseInt(Pr.get(t,"data-initial-"+e),10)};o.events.stop.bind(function(){r.get().each(function(r){i.each(function(o){u(r,"data-row").each(function(t){var e=a(r,"top");Pr.remove(r,"data-initial-top"),p.trigger.adjustHeight(o,e,parseInt(t,10))}),u(r,"data-column").each(function(t){var e=a(r,"left");Pr.remove(r,"data-initial-left"),p.trigger.adjustWidth(o,e,parseInt(t,10))}),nf.refresh(t,o,n,e)})})});var c=function(e,n){p.trigger.startAdjust(),r.assign(e),Pr.set(e,"data-initial-"+n,parseInt(Zo.get(e,n),10)),js.add(e,qp),Zo.set(e,"opacity","0.2"),o.go(t.parent())},l=bp.bind(t.parent(),"mousedown",function(t){nf.isRowBar(t.target())&&c(t.target(),"top"),nf.isColBar(t.target())&&c(t.target(),"left")}),f=function(e){return zn.eq(e,t.view())},d=bp.bind(t.view(),"mouseover",function(r){"table"===Cr.name(r.target())||Fp.closest(r.target(),"table",f)?(i="table"===Cr.name(r.target())?V.some(r.target()):lo.ancestor(r.target(),"table",f),i.each(function(r){nf.refresh(t,r,n,e)})):Lr.inBody(r.target())&&nf.destroy(t)}),m=function(){l.unbind(),d.unbind(),o.destroy(),nf.destroy(t)},g=function(r){nf.refresh(t,r,n,e)},p=ep.create({adjustHeight:s(["table","delta","row"]),adjustWidth:s(["table","delta","column"]),startAdjust:s([])});return{destroy:m,refresh:g,on:o.on,off:o.off,hideBars:F.curry(nf.hide,t),showBars:F.curry(nf.show,t),events:p.registry}}function b(t,e){var n=Kc.height,r=v(t,e,n),o=ep.create({beforeResize:s(["table"]),afterResize:s(["table"]),startDrag:s([])});return r.events.adjustHeight.bind(function(t){o.trigger.beforeResize(t.table());var e=n.delta(t.delta(),t.table());Fd.adjustHeight(t.table(),e,t.row(),n),o.trigger.afterResize(t.table())}),r.events.startAdjust.bind(function(t){o.trigger.startDrag()}),r.events.adjustWidth.bind(function(t){o.trigger.beforeResize(t.table());var n=e.delta(t.delta(),t.table());Fd.adjustWidth(t.table(),n,t.column(),e),o.trigger.afterResize(t.table())}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}}function w(t){var e=function(e,n){return se.fromPoint(se.fromDom(t.document),e,n)},n=function(t){return t.dom().getBoundingClientRect()},r=function(e,n,r,o){var i=sh.exact(e,n,r,o);return qv.getFirstRect(t,i).map(function(t){return Mt.map(t,F.apply)})},o=function(){return qv.get(t).map(function(e){return ob.convertToRange(t,e)})},i=function(e){var n=sh.relative(e.start(),e.finish());return ob.convertToRange(t,n)},u=function(e,n){return qv.getAtPoint(t,e,n).map(function(t){return{start:F.constant(oh.on(t.start(),t.soffset())),finish:F.constant(oh.on(t.finish(),t.foffset()))}})},a=function(){qv.clear(t)},c=function(e){qv.setToElement(t,e)};return{elementFromPoint:e,getRect:n,getRangedRect:r,getSelection:o,fromSitus:i,situsFromPoint:u,clearSelection:a,setSelection:function(e){qv.setExact(t,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,n){qv.setRelative(t,e,n)},selectContents:c,getInnerHeight:function(){return t.innerHeight},getScrollY:function(){return pb.get(se.fromDom(t.document)).top()},scrollBy:function(e,n){pb.by(e,n,se.fromDom(t.document))}}}function y(t,e,n,r){var o=V.none(),i=function(){o=V.none()};return{mousedown:function(t){r.clear(e),o=Ty(t.target(),n)},mouseover:function(i){o.each(function(o){r.clear(e),Ty(i.target(),n).each(function(i){la.identify(o,i,n).each(function(n){var u=n.boxes().getOr([]);(u.length>1||1===u.length&&!zn.eq(o,i))&&(r.selectRange(e,u,n.start(),n.finish()),t.selectContents(i))})})})},mouseup:function(){o.each(i)}}}function x(t,e){var n=Ut.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),r=V.none(),o=Gy.byAttr(ga);t.on("init",function(i){var u=t.getWin(),a=hm(t),c=wm(t),l=function(){var e=t.selection,n=se.fromDom(e.getStart()),r=se.fromDom(e.getEnd()),i=Ro.table(n),u=Ro.table(r);i.bind(function(t){return u.bind(function(e){return zn.eq(t,e)?V.some(!0):V.none()})}).fold(function(){o.clear(a)},F.noop)},s=Oy.mouse(u,a,c,o),f=Oy.keyboard(u,a,c,o),d=function(t){return!0===t.raw().shiftKey},m=function(e,n){d(e)&&(n.kill()&&e.kill(),n.selection().each(function(e){var n=sh.relative(e.start(),e.finish()),r=qh.asLtrRange(u,n);t.selection.setRng(r)}))},g=function(e){var n=v(e);if(n.raw().shiftKey&&eb.isNavigation(n.raw().which)){var r=t.selection.getRng(),o=se.fromDom(r.startContainer),i=se.fromDom(r.endContainer);f.keyup(n,o,r.startOffset,i,r.endOffset).each(function(t){m(n,t)})}},p=function(n){var r=v(n);e().each(function(t){t.hideBars()});var o=t.selection.getRng(),i=se.fromDom(t.selection.getStart()),u=se.fromDom(o.startContainer),a=se.fromDom(o.endContainer),c=Em.directionAt(i).isRtl()?eb.rtl:eb.ltr;f.keydown(r,u,o.startOffset,a,o.endOffset,c).each(function(t){m(r,t)}),e().each(function(t){t.showBars()})},h=function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")},v=function(t){var e=se.fromDom(t.target),n=function(){t.stopPropagation()},r=function(){t.preventDefault()},o=F.compose(r,n);return{target:F.constant(e),x:F.constant(h(t)?t.x:null),y:F.constant(h(t)?t.y:null),stop:n,prevent:r,kill:o,raw:F.constant(t)}},b=function(t){return 0===t.button},w=function(t){return void 0===t.buttons||0!=(1&t.buttons)},y=function(t){b(t)&&s.mousedown(v(t))},x=function(t){w(t)&&s.mouseover(v(t))},C=function(t){b(t)&&s.mouseup(v(t))};t.on("mousedown",y),t.on("mouseover",x),t.on("mouseup",C),t.on("keyup",g),t.on("keydown",p),t.on("nodechange",l),r=V.some(n({mousedown:y,mouseover:x,mouseup:C,keyup:g,keydown:p}))});var i=function(){r.each(function(t){})};return{clear:o.clear,destroy:i}}function C(t){var e=Up(t),n=x(t,e.lazyResize),r=tg(t,e.lazyWire),o=Yy(t),i=Zc(V.none());return Kg.registerCommands(t,r,n,o,i),Pa.registerEvents(t,o,r,n),Zy.addMenuItems(t,o),Jy.addButtons(t),Jy.addToolbars(t),t.on("PreInit",function(){t.serializer.addTempAttr(ga.firstSelected()),t.serializer.addTempAttr(ga.lastSelected())}),Wm(t)&&t.on("keydown",function(n){Xv.handle(n,t,r,e.lazyWire)}),t.on("remove",function(){e.destroy(),n.destroy()}),nx(t,i)}function S(){}var R=tinymce.util.Tools.resolve("tinymce.PluginManager"),T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},A=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t()}},D=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,arguments))}},E=function(t){return function(){return t}},k=function(t){return t},O=function(t,e){return t===e},N=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=new Array(arguments.length-1),o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var u=r.concat(o);return t.apply(null,u)}},B=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,arguments)}},P=function(t){return function(){throw new Error(t)}},I=function(t){return t()},W=function(t){t()},M=E(!1),L=E(!0),F={noop:T,noarg:A,compose:D,constant:E,identity:k,tripleEquals:O,curry:N,not:B,die:P,apply:I,call:W,never:M,always:L},q=F.never,H=F.always,j=function(){return _},_=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r=function(){},o={fold:function(t,e){return t()},is:q,isSome:q,isNone:H,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},or:n,orThunk:e,map:j,ap:j,each:r,bind:j,flatten:j,exists:q,forall:H,filter:j,equals:t,equals_:t,toArray:function(){return[]},toString:F.constant("none()")};return Object.freeze&&Object.freeze(o),o}(),z=function(t){var e=function(){return t},n=function(){return i},r=function(e){return z(e(t))},o=function(e){return e(t)},i={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:H,isNone:q,getOr:e,getOrThunk:e,getOrDie:e,or:n,orThunk:n,map:r,ap:function(e){return e.fold(j,function(e){return z(e(t))})},each:function(e){e(t)},bind:o,flatten:e,exists:o,forall:o,filter:function(e){return e(t)?i:_},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(q,function(e){return n(t,e)})},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return i},U=function(t){return null===t||void 0===t?_:z(t)},V={some:z,none:j,from:U},G=function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&Array.prototype.isPrototypeOf(t)?"array":"object"===e&&String.prototype.isPrototypeOf(t)?"string":e},Y=function(t){return function(e){return G(e)===t}},X={isString:Y("string"),isObject:Y("object"),isArray:Y("array"),isNull:Y("null"),isBoolean:Y("boolean"),isUndefined:Y("undefined"),isFunction:Y("function"),isNumber:Y("number")},K=function(){var t=Array.prototype.indexOf,e=function(e,n){return t.call(e,n)},n=function(t,e){return ft(t,e)};return void 0===t?n:e}(),$=function(t,e){var n=K(t,e);return-1===n?V.none():V.some(n)},J=function(t,e){return K(t,e)>-1},Q=function(t,e){return st(t,e).isSome()},Z=function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n},tt=function(t,e){for(var n=[],r=0;r<t.length;r+=e){var o=t.slice(r,r+e);n.push(o)}return n},et=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o,t)}return r},nt=function(t,e){for(var n=0,r=t.length;n<r;n++){e(t[n],n,t)}},rt=function(t,e){for(var n=t.length-1;n>=0;n--){e(t[n],n,t)}},ot=function(t,e){for(var n=[],r=[],o=0,i=t.length;o<i;o++){var u=t[o];(e(u,o,t)?n:r).push(u)}return{pass:n,fail:r}},it=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r,t)&&n.push(i)}return n},ut=function(t,e){if(0===t.length)return[];for(var n=e(t[0]),r=[],o=[],i=0,u=t.length;i<u;i++){var a=t[i],c=e(a);c!==n&&(r.push(o),o=[]),n=c,o.push(a)}return 0!==o.length&&r.push(o),r},at=function(t,e,n){return rt(t,function(t){n=e(n,t)}),n},ct=function(t,e,n){return nt(t,function(t){n=e(n,t)}),n},lt=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n,t))return V.some(o)}return V.none()},st=function(t,e){for(var n=0,r=t.length;n<r;n++){if(e(t[n],n,t))return V.some(n)}return V.none()},ft=function(t,e){for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return n;return-1},dt=Array.prototype.push,mt=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!Array.prototype.isPrototypeOf(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);dt.apply(e,t[n])}return e},gt=function(t,e){var n=et(t,e);return mt(n)},pt=function(t,e){for(var n=0,r=t.length;n<r;++n){if(!0!==e(t[n],n,t))return!1}return!0},ht=function(t,e){return t.length===e.length&&pt(t,function(t,n){return t===e[n]})},vt=Array.prototype.slice,bt=function(t){var e=vt.call(t,0);return e.reverse(),e},wt=function(t,e){return it(t,function(t){return!J(e,t)})},yt=function(t,e){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];n[String(i)]=e(i,r)}return n},xt=function(t){return[t]},Ct=function(t,e){var n=vt.call(t,0);return n.sort(e),n},St=function(t){return 0===t.length?V.none():V.some(t[0])},Rt=function(t){return 0===t.length?V.none():V.some(t[t.length-1])},Tt=X.isFunction(Array.from)?Array.from:function(t){return vt.call(t)},At={map:et,each:nt,eachr:rt,partition:ot,filter:it,groupBy:ut,indexOf:$,foldr:at,foldl:ct,find:lt,findIndex:st,flatten:mt,bind:gt,forall:pt,exists:Q,contains:J,equal:ht,reverse:bt,chunk:tt,difference:wt,mapToObject:yt,pure:xt,sort:Ct,range:Z,head:St,last:Rt,from:Tt},Dt=function(){var t=Object.keys,e=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};return void 0===t?e:t}(),Et=function(t,e){for(var n=Dt(t),r=0,o=n.length;r<o;r++){var i=n[r];e(t[i],i,t)}},kt=function(t,e){return Ot(t,function(t,n,r){return{k:n,v:e(t,n,r)}})},Ot=function(t,e){var n={};return Et(t,function(r,o){var i=e(r,o,t);n[i.k]=i.v}),n},Nt=function(t,e){var n={},r={};return Et(t,function(t,o){(e(t,o)?n:r)[o]=t}),{t:n,f:r}},Bt=function(t,e){var n=[];return Et(t,function(t,r){n.push(e(t,r))}),n},Pt=function(t,e){for(var n=Dt(t),r=0,o=n.length;r<o;r++){var i=n[r],u=t[i];if(e(u,i,t))return V.some(u)}return V.none()},It=function(t){return Bt(t,function(t){return t})},Wt=function(t){return It(t).length},Mt={bifilter:Nt,each:Et,map:kt,mapToArray:Bt,tupleMap:Ot,find:Pt,keys:Dt,values:It,size:Wt},Lt=function(t){return t.slice(0).sort()},Ft=function(t,e){throw new Error("All required keys ("+Lt(t).join(", ")+") were not specified. Specified keys were: "+Lt(e).join(", ")+".")},qt=function(t){throw new Error("Unsupported keys for object: "+Lt(t).join(", "))},Ht=function(t,e){if(!X.isArray(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");At.each(e,function(e){if(!X.isString(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},jt=function(t,e){throw new Error("All values need to be of type: "+e+". Keys ("+Lt(t).join(", ")+") were not.")},_t=function(t){var e=Lt(t);At.find(e,function(t,n){return n<e.length-1&&t===e[n+1]}).each(function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")})},zt={sort:Lt,reqMessage:Ft,unsuppMessage:qt,validateStrArr:Ht,invalidTypeMessage:jt,checkDupes:_t},Ut={immutable:t,immutableBag:e},Vt=Ut.immutable("width","height"),Gt=Ut.immutable("rows","columns"),Yt=Ut.immutable("row","column"),Xt=Ut.immutable("x","y"),Kt=Ut.immutable("element","rowspan","colspan"),$t=Ut.immutable("element","rowspan","colspan","isNew"),Jt=Ut.immutable("element","rowspan","colspan","row","column"),Qt=Ut.immutable("element","cells","section"),Zt=Ut.immutable("element","isNew"),te=Ut.immutable("element","cells","section","isNew"),ee=Ut.immutable("cells","section"),ne=Ut.immutable("details","section"),re=Ut.immutable("startRow","startCol","finishRow","finishCol"),oe={dimensions:Vt,grid:Gt,address:Yt,coords:Xt,extended:Jt,detail:Kt,detailnew:$t,rowdata:Qt,elementnew:Zt,rowdatanew:te,rowcells:ee,rowdetails:ne,bounds:re},ie=function(t,e){var n=e||document,r=n.createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",t),"HTML must have a single root node";return ce(r.childNodes[0])},ue=function(t,e){var n=e||document,r=n.createElement(t);return ce(r)},ae=function(t,e){var n=e||document,r=n.createTextNode(t);return ce(r)},ce=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:F.constant(t)}},le=function(t,e,n){return V.from(t.dom().elementFromPoint(e,n)).map(ce)},se={fromHtml:ie,fromTag:ue,fromText:ae,fromDom:ce,fromPoint:le},fe={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12},de=fe.ELEMENT,me=fe.DOCUMENT,ge=function(t,e){var n=t.dom();if(n.nodeType!==de)return!1;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},pe=function(t){return t.nodeType!==de&&t.nodeType!==me||0===t.childElementCount},he=function(t,e){var n=void 0===e?document:e.dom();return pe(n)?[]:At.map(n.querySelectorAll(t),se.fromDom)},ve=function(t,e){var n=void 0===e?document:e.dom();return pe(n)?V.none():V.from(n.querySelector(t)).map(se.fromDom)},be={all:he,is:ge,one:ve},we=function(t,e){var n=[],r=function(t){return n.push(t),e(t)},o=e(t);do{o=o.bind(r)}while(o.isSome());return n},ye={toArray:we},xe="undefined"!=typeof window?window:Function("return this;")(),Ce=function(t,e){for(var n=void 0!==e&&null!==e?e:xe,r=0;r<t.length&&void 0!==n&&null!==n;++r)n=n[t[r]];return n},Se=function(t,e){var n=t.split(".");return Ce(n,e)},Re=function(t,e){return void 0!==t[e]&&null!==t[e]||(t[e]={}),t[e]},Te=function(t,e){for(var n=void 0!==e?e:xe,r=0;r<t.length;++r)n=Re(n,t[r]);return n},Ae=function(t,e){var n=t.split(".");return Te(n,e)},De={path:Ce,resolve:Se,forge:Te,namespace:Ae},Ee=function(t,e){return De.resolve(t,e)},ke=function(t,e){var n=Ee(t,e);if(void 0===n||null===n)throw t+" not available on this browser";return n},Oe={getOrDie:ke},Ne=function(){return Oe.getOrDie("Node")},Be=function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)},Pe=function(t,e){return Be(t,e,Ne().DOCUMENT_POSITION_PRECEDING)},Ie=function(t,e){return Be(t,e,Ne().DOCUMENT_POSITION_CONTAINED_BY)},We={documentPositionPreceding:Pe,documentPositionContainedBy:Ie},Me=function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(null,arguments)),e}},Le={cached:Me},Fe=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}},qe=function(t,e){var n=Fe(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return _e(r(1),r(2))},He=function(t,e){var n=String(e).toLowerCase();return 0===t.length?je():qe(t,n)},je=function(){return _e(0,0)},_e=function(t,e){return{major:t,minor:e}},ze={nu:_e,detect:He,unknown:je},Ue=function(t,e){return function(){return e===t}},Ve=function(){return Ge({current:void 0,version:ze.unknown()})},Ge=function(t){var e=t.current;return{current:e,version:t.version,isEdge:Ue("Edge",e),isChrome:Ue("Chrome",e),isIE:Ue("IE",e),isOpera:Ue("Opera",e),isFirefox:Ue("Firefox",e),isSafari:Ue("Safari",e)}},Ye={unknown:Ve,nu:Ge,edge:F.constant("Edge"),chrome:F.constant("Chrome"),ie:F.constant("IE"),opera:F.constant("Opera"),firefox:F.constant("Firefox"),safari:F.constant("Safari")},Xe=function(t,e){return function(){return e===t}},Ke=function(){return $e({current:void 0,version:ze.unknown()})},$e=function(t){var e=t.current;return{current:e,version:t.version,isWindows:Xe("Windows",e),isiOS:Xe("iOS",e),isAndroid:Xe("Android",e),isOSX:Xe("OSX",e),isLinux:Xe("Linux",e),isSolaris:Xe("Solaris",e),isFreeBSD:Xe("FreeBSD",e)}},Je={unknown:Ke,nu:$e,windows:F.constant("Windows"),ios:F.constant("iOS"),android:F.constant("Android"),linux:F.constant("Linux"),osx:F.constant("OSX"),solaris:F.constant("Solaris"),freebsd:F.constant("FreeBSD")},Qe=function(t,e){var n=String(e).toLowerCase();return At.find(t,function(t){return t.search(n)})},Ze=function(t,e){return Qe(t,e).map(function(t){var n=ze.detect(t.versionRegexes,e);return{current:t.name,version:n}})},tn=function(t,e){return Qe(t,e).map(function(t){var n=ze.detect(t.versionRegexes,e);return{current:t.name,version:n}})},en={detectBrowser:Ze,detectOs:tn},nn=function(t,e){return e+t},rn=function(t,e){return t+e},on=function(t,e){return t.substring(e)},un=function(t,e){return t.substring(0,t.length-e)},an={addToStart:nn,addToEnd:rn,removeFromStart:on,removeFromEnd:un},cn=function(t,e){return t.substr(0,e)},ln=function(t,e){return t.substr(t.length-e,t.length)},sn=function(t){return""===t?V.none():V.some(t.substr(0,1))},fn=function(t){return""===t?V.none():V.some(t.substring(1))},dn={first:cn,last:ln,head:sn,tail:fn},mn=function(t,e,n){return""===e||!(t.length<e.length)&&t.substr(n,n+e.length)===e},gn=function(t,e){var n=function(t){var e=typeof t;return"string"===e||"number"===e};return t.replace(/\${([^{}]*)}/g,function(t,r){var o=e[r];return n(o)?o:t})},pn=function(t,e){return xn(t,e)?an.removeFromStart(t,e.length):t},hn=function(t,e){return Cn(t,e)?an.removeFromEnd(t,e.length):t},vn=function(t,e){return xn(t,e)?t:an.addToStart(t,e)},bn=function(t,e){return Cn(t,e)?t:an.addToEnd(t,e)},wn=function(t,e){return-1!==t.indexOf(e)},yn=function(t){return dn.head(t).bind(function(e){return dn.tail(t).map(function(t){return e.toUpperCase()+t})}).getOr(t)},xn=function(t,e){return mn(t,e,0)},Cn=function(t,e){return mn(t,e,t.length-e.length)},Sn=function(t){return t.replace(/^\s+|\s+$/g,"")},Rn=function(t){return t.replace(/^\s+/g,"")},Tn=function(t){return t.replace(/\s+$/g,"")},An={supplant:gn,startsWith:xn,removeLeading:pn,removeTrailing:hn,ensureLeading:vn,ensureTrailing:bn,endsWith:Cn,contains:wn,trim:Sn,lTrim:Rn,rTrim:Tn,capitalize:yn},Dn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,En=function(t){return function(e){return An.contains(e,t)}},kn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return An.contains(t,"edge/")&&An.contains(t,"chrome")&&An.contains(t,"safari")&&An.contains(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Dn],search:function(t){return An.contains(t,"chrome")&&!An.contains(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return An.contains(t,"msie")||An.contains(t,"trident")}},{name:"Opera",versionRegexes:[Dn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:En("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:En("firefox")},{name:"Safari",versionRegexes:[Dn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(An.contains(t,"safari")||An.contains(t,"mobile/"))&&An.contains(t,"applewebkit")}}],On=[{name:"Windows",search:En("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return An.contains(t,"iphone")||An.contains(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:En("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:En("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:En("linux"),versionRegexes:[]},{name:"Solaris",search:En("sunos"),versionRegexes:[]},{name:"FreeBSD",search:En("freebsd"),versionRegexes:[]}],Nn={browsers:F.constant(kn),oses:F.constant(On)},Bn=function(t){var e=Nn.browsers(),r=Nn.oses(),o=en.detectBrowser(e,t).fold(Ye.unknown,Ye.nu),i=en.detectOs(r,t).fold(Je.unknown,Je.nu);return{browser:o,os:i,deviceType:n(i,o,t)}},Pn={detect:Bn},In=Le.cached(function(){var t=navigator.userAgent;return Pn.detect(t)}),Wn={detect:In},Mn=function(t,e){return t.dom()===e.dom()},Ln=function(t,e){return t.dom().isEqualNode(e.dom())},Fn=function(t,e){return At.exists(e,F.curry(Mn,t))},qn=function(t,e){var n=t.dom(),r=e.dom();return n!==r&&n.contains(r)},Hn=function(t,e){return We.documentPositionContainedBy(t.dom(),e.dom())},jn=Wn.detect().browser,_n=jn.isIE()?Hn:qn,zn={eq:Mn,isEqualNode:Ln,member:Fn,contains:_n,is:be.is},Un=function(t){return se.fromDom(t.dom().ownerDocument)},Vn=function(t){var e=Un(t);return se.fromDom(e.dom().documentElement)},Gn=function(t){var e=t.dom(),n=e.ownerDocument.defaultView;return se.fromDom(n)},Yn=function(t){var e=t.dom();return V.from(e.parentNode).map(se.fromDom)},Xn=function(t){return Yn(t).bind(function(e){var n=nr(e);return At.findIndex(n,function(e){return zn.eq(t,e)})})},Kn=function(t,e){for(var n=X.isFunction(e)?e:F.constant(!1),r=t.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=se.fromDom(i);if(o.push(u),!0===n(u))break;r=i}return o},$n=function(t){var e=function(e){return At.filter(e,function(e){return!zn.eq(t,e)})};return Yn(t).map(nr).map(e).getOr([])},Jn=function(t){var e=t.dom();return V.from(e.offsetParent).map(se.fromDom)},Qn=function(t){var e=t.dom();return V.from(e.previousSibling).map(se.fromDom)},Zn=function(t){var e=t.dom();return V.from(e.nextSibling).map(se.fromDom)},tr=function(t){return At.reverse(ye.toArray(t,Qn))},er=function(t){return ye.toArray(t,Zn)},nr=function(t){var e=t.dom();return At.map(e.childNodes,se.fromDom)},rr=function(t,e){var n=t.dom().childNodes;return V.from(n[e]).map(se.fromDom)},or=function(t){return rr(t,0)},ir=function(t){return rr(t,t.dom().childNodes.length-1)},ur=function(t){return t.dom().childNodes.length},ar=function(t){return t.dom().hasChildNodes()},cr=Ut.immutable("element","offset"),lr=function(t,e){var n=nr(t);return n.length>0&&e<n.length?cr(n[e],0):cr(t,e)},sr={owner:Un,defaultView:Gn,documentElement:Vn,parent:Yn,findIndex:Xn,parents:Kn,siblings:$n,prevSibling:Qn,offsetParent:Jn,prevSiblings:tr,nextSibling:Zn,nextSiblings:er,children:nr,child:rr,firstChild:or,lastChild:ir,childNodesCount:ur,hasChildNodes:ar,leaf:lr},fr=function(t,e){return dr(t,e,F.constant(!0))},dr=function(t,e,n){return At.bind(sr.children(t),function(t){return be.is(t,e)?n(t)?[t]:[]:dr(t,e,n)})},mr={firstLayer:fr,filterFirstLayer:dr},gr=function(t){return t.dom().nodeName.toLowerCase()},pr=function(t){return t.dom().nodeType},hr=function(t){return t.dom().nodeValue},vr=function(t){return function(e){return pr(e)===t}},br=function(t){return pr(t)===fe.COMMENT||"#comment"===gr(t)},wr=vr(fe.ELEMENT),yr=vr(fe.TEXT),xr=vr(fe.DOCUMENT),Cr={name:gr,type:pr,value:hr,isElement:wr,isText:yr,isDocument:xr,isComment:br},Sr=function(t,e,n){if(!(X.isString(n)||X.isBoolean(n)||X.isNumber(n)))throw console.error("Invalid call to Attr.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Rr=function(t,e,n){Sr(t.dom(),e,n)},Tr=function(t,e){var n=t.dom();Mt.each(e,function(t,e){Sr(n,e,t)})},Ar=function(t,e){var n=t.dom().getAttribute(e);return null===n?void 0:n},Dr=function(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Er=function(t,e){t.dom().removeAttribute(e)},kr=function(t){var e=t.dom().attributes;return void 0===e||null===e||0===e.length},Or=function(t){return At.foldl(t.dom().attributes,function(t,e){return t[e.name]=e.value,t},{})},Nr=function(t,e,n){Dr(t,n)&&!Dr(e,n)&&Rr(e,n,Ar(t,n))},Br=function(t,e,n){Cr.isElement(t)&&Cr.isElement(e)&&At.each(n,function(n){Nr(t,e,n)})},Pr={clone:Or,set:Rr,setAll:Tr,get:Ar,has:Dr,remove:Er,hasNone:kr,transfer:Br},Ir=function(t){var e=Cr.isText(t)?t.dom().parentNode:t.dom();return void 0!==e&&null!==e&&e.ownerDocument.body.contains(e)},Wr=Le.cached(function(){return Mr(se.fromDom(document))}),Mr=function(t){var e=t.dom().body;if(null===e||void 0===e)throw"Body is not available yet"
;return se.fromDom(e)},Lr={body:Wr,getBody:Mr,inBody:Ir},Fr=function(t){return _r(Lr.body(),t)},qr=function(t,e,n){return At.filter(sr.parents(t,n),e)},Hr=function(t,e){return At.filter(sr.siblings(t),e)},jr=function(t,e){return At.filter(sr.children(t),e)},_r=function(t,e){var n=[];return At.each(sr.children(t),function(t){e(t)&&(n=n.concat([t])),n=n.concat(_r(t,e))}),n},zr={all:Fr,ancestors:qr,siblings:Hr,children:jr,descendants:_r},Ur=function(t){return be.all(t)},Vr=function(t,e,n){return zr.ancestors(t,function(t){return be.is(t,e)},n)},Gr=function(t,e){return zr.siblings(t,function(t){return be.is(t,e)})},Yr=function(t,e){return zr.children(t,function(t){return be.is(t,e)})},Xr=function(t,e){return be.all(e,t)},Kr={all:Ur,ancestors:Vr,siblings:Gr,children:Yr,descendants:Xr},$r=function(t){return eo(Lr.body(),t)},Jr=function(t,e,n){for(var r=t.dom(),o=X.isFunction(n)?n:F.constant(!1);r.parentNode;){r=r.parentNode;var i=se.fromDom(r);if(e(i))return V.some(i);if(o(i))break}return V.none()},Qr=function(t,e,n){return r(function(t){return e(t)},Jr,t,e,n)},Zr=function(t,e){var n=t.dom();return n.parentNode?to(se.fromDom(n.parentNode),function(n){return!zn.eq(t,n)&&e(n)}):V.none()},to=function(t,e){return At.find(t.dom().childNodes,F.compose(e,se.fromDom)).map(se.fromDom)},eo=function(t,e){var n=function(t){for(var r=0;r<t.childNodes.length;r++){if(e(se.fromDom(t.childNodes[r])))return V.some(se.fromDom(t.childNodes[r]));var o=n(t.childNodes[r]);if(o.isSome())return o}return V.none()};return n(t.dom())},no={first:$r,ancestor:Jr,closest:Qr,sibling:Zr,child:to,descendant:eo},ro=function(t){return be.one(t)},oo=function(t,e,n){return no.ancestor(t,function(t){return be.is(t,e)},n)},io=function(t,e){return no.sibling(t,function(t){return be.is(t,e)})},uo=function(t,e){return no.child(t,function(t){return be.is(t,e)})},ao=function(t,e){return be.one(e,t)},co=function(t,e,n){return r(be.is,oo,t,e,n)},lo={first:ro,ancestor:oo,sibling:io,child:uo,descendant:ao,closest:co},so=function(t,e,n){var r=void 0!==n?n:F.constant(!1);if(r(e))return V.none();if(At.contains(t,Cr.name(e)))return V.some(e);var o=function(t){return be.is(t,"table")||r(t)};return lo.ancestor(e,t.join(","),o)},fo=function(t,e){return so(["td","th"],t,e)},mo=function(t){return mr.firstLayer(t,"th,td")},go=function(t,e){return so(["caption","tr","tbody","tfoot","thead"],t,e)},po=function(t,e){return sr.parent(e).map(function(e){return Kr.children(e,t)})},ho=F.curry(po,"th,td"),vo=F.curry(po,"tr"),bo=function(t){return lo.descendant(t,"th,td")},wo=function(t,e){return lo.closest(t,"table",e)},yo=function(t,e){return so(["tr"],t,e)},xo=function(t){return mr.firstLayer(t,"tr")},Co=function(t,e){return parseInt(Pr.get(t,e),10)},So=function(t,e,n){var r=Co(t,e),o=Co(t,n);return oe.grid(r,o)},Ro={cell:fo,firstCell:bo,cells:mo,neighbourCells:ho,table:wo,row:yo,rows:xo,notCell:go,neighbourRows:vo,attr:Co,grid:So},To=function(t){var e=Ro.rows(t);return At.map(e,function(t){var e=t,n=sr.parent(e),r=n.bind(function(t){var e=Cr.name(t);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"}),o=At.map(Ro.cells(t),function(t){var e=Pr.has(t,"rowspan")?parseInt(Pr.get(t,"rowspan"),10):1,n=Pr.has(t,"colspan")?parseInt(Pr.get(t,"colspan"),10):1;return oe.detail(t,e,n)});return oe.rowdata(e,o,r)})},Ao=function(t,e){return At.map(t,function(t){var n=At.map(Ro.cells(t),function(t){var e=Pr.has(t,"rowspan")?parseInt(Pr.get(t,"rowspan"),10):1,n=Pr.has(t,"colspan")?parseInt(Pr.get(t,"colspan"),10):1;return oe.detail(t,e,n)});return oe.rowdata(t,n,e.section())})},Do={fromTable:To,fromPastedRows:Ao},Eo=function(t,e){return t+","+e},ko=function(t,e,n){var r=t.access()[Eo(e,n)];return void 0!==r?V.some(r):V.none()},Oo=function(t,e,n){var r=No(t,function(t){return n(e,t.element())});return r.length>0?V.some(r[0]):V.none()},No=function(t,e){var n=At.bind(t.all(),function(t){return t.cells()});return At.filter(n,e)},Bo=function(t){var e={},n=[],r=t.length,o=0;At.each(t,function(t,r){var i=[];At.each(t.cells(),function(t,n){for(var u=0;void 0!==e[Eo(r,u)];)u++;for(var a=oe.extended(t.element(),t.rowspan(),t.colspan(),r,u),c=0;c<t.colspan();c++)for(var l=0;l<t.rowspan();l++){var s=r+l,f=u+c,d=Eo(s,f);e[d]=a,o=Math.max(o,f+1)}i.push(a)}),n.push(oe.rowdata(t.element(),i,t.section()))});var i=oe.grid(r,o);return{grid:F.constant(i),access:F.constant(e),all:F.constant(n)}},Po=function(t){var e=At.map(t.all(),function(t){return t.cells()});return At.flatten(e)},Io={generate:Bo,getAt:ko,findItem:Oo,filterItems:No,justCells:Po},Wo=function(t){return void 0!==t.style},Mo={isSupported:Wo},Lo=function(t,e,n){if(!X.isString(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Mo.isSupported(t)&&t.style.setProperty(e,n)},Fo=function(t,e){Mo.isSupported(t)&&t.style.removeProperty(e)},qo=function(t,e,n){var r=t.dom();Lo(r,e,n)},Ho=function(t,e){var n=t.dom();Mt.each(e,function(t,e){Lo(n,e,t)})},jo=function(t,e){var n=t.dom();Mt.each(e,function(t,e){t.fold(function(){Fo(n,e)},function(t){Lo(n,e,t)})})},_o=function(t,e){var n=t.dom(),r=window.getComputedStyle(n),o=r.getPropertyValue(e),i=""!==o||Lr.inBody(t)?o:zo(n,e);return null===i?void 0:i},zo=function(t,e){return Mo.isSupported(t)?t.style.getPropertyValue(e):""},Uo=function(t,e){var n=t.dom(),r=zo(n,e);return V.from(r).filter(function(t){return t.length>0})},Vo=function(t){var e={},n=t.dom();if(Mo.isSupported(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);e[o]=n.style[o]}return e},Go=function(t,e,n){var r=se.fromTag(t);return qo(r,e,n),Uo(r,e).isSome()},Yo=function(t,e){var n=t.dom();Fo(n,e),Pr.has(t,"style")&&""===An.trim(Pr.get(t,"style"))&&Pr.remove(t,"style")},Xo=function(t,e){var n=Pr.get(t,"style"),r=e(t);return(void 0===n?Pr.remove:Pr.set)(t,"style",n),r},Ko=function(t,e){var n=t.dom(),r=e.dom();Mo.isSupported(n)&&Mo.isSupported(r)&&(r.style.cssText=n.style.cssText)},$o=function(t){return t.dom().offsetWidth},Jo=function(t,e,n){Uo(t,n).each(function(t){Uo(e,n).isNone()&&qo(e,n,t)})},Qo=function(t,e,n){Cr.isElement(t)&&Cr.isElement(e)&&At.each(n,function(n){Jo(t,e,n)})},Zo={copy:Ko,set:qo,preserve:Xo,setAll:Ho,setOptions:jo,remove:Yo,get:_o,getRaw:Uo,getAllRaw:Vo,isValidValue:Go,reflow:$o,transfer:Qo},ti=function(t,e){sr.parent(t).each(function(n){n.dom().insertBefore(e.dom(),t.dom())})},ei=function(t,e){sr.nextSibling(t).fold(function(){sr.parent(t).each(function(t){ri(t,e)})},function(t){ti(t,e)})},ni=function(t,e){sr.firstChild(t).fold(function(){ri(t,e)},function(n){t.dom().insertBefore(e.dom(),n.dom())})},ri=function(t,e){t.dom().appendChild(e.dom())},oi=function(t,e,n){sr.child(t,n).fold(function(){ri(t,e)},function(t){ti(t,e)})},ii=function(t,e){ti(t,e),ri(e,t)},ui={before:ti,after:ei,prepend:ni,append:ri,appendAt:oi,wrap:ii},ai=function(t,e){At.each(e,function(e){ui.before(t,e)})},ci=function(t,e){At.each(e,function(n,r){var o=0===r?t:e[r-1];ui.after(o,n)})},li=function(t,e){At.each(e.slice().reverse(),function(e){ui.prepend(t,e)})},si=function(t,e){At.each(e,function(e){ui.append(t,e)})},fi={before:ai,after:ci,prepend:li,append:si},di=function(t){t.dom().textContent="",At.each(sr.children(t),function(t){mi(t)})},mi=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},gi=function(t){var e=sr.children(t);e.length>0&&fi.before(t,e),mi(t)},pi={empty:di,remove:mi,unwrap:gi},hi=Ut.immutable("minRow","minCol","maxRow","maxCol"),vi=function(t,e){var n=t.grid().columns(),r=t.grid().rows(),o=r,i=n,u=0,a=0;return Mt.each(t.access(),function(t){if(e(t)){var n=t.row(),r=n+t.rowspan()-1,c=t.column(),l=c+t.colspan()-1;n<o?o=n:r>u&&(u=r),c<i?i=c:l>a&&(a=l)}}),hi(o,i,u,a)},bi=function(t,e,n){var r=t[n].element(),o=se.fromTag("td");ui.append(o,se.fromTag("br")),(e?ui.append:ui.prepend)(r,o)},wi=function(t,e,n,r){for(var o=e.grid().columns(),i=e.grid().rows(),u=0;u<i;u++)for(var a=!1,c=0;c<o;c++)if(!(u<n.minRow()||u>n.maxRow()||c<n.minCol()||c>n.maxCol())){var l=Io.getAt(e,u,c).filter(r).isNone();l?bi(t,a,u):a=!0}},yi=function(t,e){var n=At.filter(mr.firstLayer(t,"tr"),function(t){return 0===t.dom().childElementCount});At.each(n,pi.remove),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||At.each(mr.firstLayer(t,"th,td"),function(t){Pr.remove(t,"rowspan"),Pr.remove(t,"colspan")}),Pr.remove(t,"width"),Pr.remove(t,"height"),Zo.remove(t,"width"),Zo.remove(t,"height")},xi=function(t,e){var n=function(t){return be.is(t.element(),e)},r=Do.fromTable(t),o=Io.generate(r),i=vi(o,n),u="th:not("+e+"),td:not("+e+")",a=mr.filterFirstLayer(t,"th,td",function(t){return be.is(t,u)});return At.each(a,pi.remove),wi(r,o,i,n),yi(t,i),t},Ci={extract:xi},Si=function(t,e){return se.fromDom(t.dom().cloneNode(e))},Ri=function(t){return Si(t,!1)},Ti=function(t){return Si(t,!0)},Ai=function(t,e){var n=se.fromTag(e),r=Pr.clone(t);return Pr.setAll(n,r),n},Di=function(t,e){var n=Ai(t,e),r=sr.children(Ti(t));return fi.append(n,r),n},Ei=function(t,e){var n=Ai(t,e);ui.before(t,n);var r=sr.children(t);return fi.append(n,r),pi.remove(t),n},ki={shallow:Ri,shallowAs:Ai,deep:Ti,copy:Di,mutate:Ei},Oi=function(t,e){var n=function(n){if(!t(n))throw new Error("Can only get "+e+" value of a "+e+" node");return u(n).getOr("")},r=function(t){try{return o(t)}catch(t){return V.none()}},o=function(e){return t(e)?V.from(e.dom().nodeValue):V.none()},i=Wn.detect().browser,u=i.isIE()&&10===i.version.major?r:o;return{get:n,getOption:u,set:function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom().nodeValue=r}}}(Cr.isText,"text"),Ni=function(t){return Oi.get(t)},Bi=function(t){return Oi.getOption(t)},Pi=function(t,e){Oi.set(t,e)},Ii={get:Ni,getOption:Bi,set:Pi},Wi=function(t){return"img"===Cr.name(t)?1:Ii.getOption(t).fold(function(){return sr.children(t).length},function(t){return t.length})},Mi=function(t,e){return Wi(t)===e},Li=function(t,e){return 0===e},Fi=function(t){return Ii.getOption(t).filter(function(t){return 0!==t.trim().length||t.indexOf(" ")>-1}).isSome()},qi=["img","br"],Hi=function(t){return Fi(t)||At.contains(qi,Cr.name(t))},ji={getEnd:Wi,isEnd:Mi,isStart:Li,isCursorPosition:Hi},_i=function(t){return no.descendant(t,ji.isCursorPosition)},zi=function(t){return Ui(t,ji.isCursorPosition)},Ui=function(t,e){var n=function(t){for(var r=sr.children(t),o=r.length-1;o>=0;o--){var i=r[o];if(e(i))return V.some(i);var u=n(i);if(u.isSome())return u}return V.none()};return n(t)},Vi={first:_i,last:zi},Gi=function(){var t=se.fromTag("td");return ui.append(t,se.fromTag("br")),t},Yi=function(t,e,n){var r=ki.copy(t,e);return Mt.each(n,function(t,e){null===t?Pr.remove(r,e):Pr.set(r,e,t)}),r},Xi=function(t){return t},Ki=function(t){return function(){return se.fromTag("tr",t.dom())}},$i=function(t,e,n){return Vi.first(t).map(function(r){var o=n.join(","),i=Kr.ancestors(r,o,function(e){return zn.eq(e,t)});return At.foldr(i,function(t,e){var n=ki.shallow(e);return ui.append(t,n),n},e)}).getOr(e)},Ji=function(t,e,n){var r=function(e){var r=sr.owner(e.element()),o=se.fromTag(Cr.name(e.element()),r.dom()),i=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),u=i.length>0?$i(e.element(),o,i):o;return ui.append(u,se.fromTag("br")),Zo.copy(e.element(),o),Zo.remove(o,"height"),1!==e.colspan()&&Zo.remove(e.element(),"width"),t(e.element(),o),o};return{row:Ki(e),cell:r,replace:Yi,gap:Gi}},Qi=function(t){return{row:Ki(t),cell:Gi,replace:Xi,gap:Gi}},Zi={cellOperations:Ji,paste:Qi},tu=function(t,e){var n=e||document,r=n.createElement("div");return r.innerHTML=t,sr.children(se.fromDom(r))},eu=function(t,e){return At.map(t,function(t){return se.fromTag(t,e)})},nu=function(t,e){return At.map(t,function(t){return se.fromText(t,e)})},ru=function(t){return At.map(t,se.fromDom)},ou={fromHtml:tu,fromTags:eu,fromText:nu,fromDom:ru},iu=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],uu=Ut.immutable("left","right"),au=function(t,e,n){var r=t.property().children(e);return At.findIndex(r,F.curry(t.eq,n)).map(function(t){return{before:F.constant(r.slice(0,t)),after:F.constant(r.slice(t+1))}})},cu=function(t,e,n){return au(t,e,n).map(function(n){var r=t.create().clone(e);return t.insert().appendAll(r,n.after()),t.insert().after(e,r),uu(e,r)})},lu=function(t,e,n){return au(t,e,n).map(function(r){var o=t.create().clone(e);return t.insert().appendAll(o,r.before().concat([n])),t.insert().appendAll(e,r.after()),t.insert().before(e,o),uu(o,e)})},su=function(t,e,n,r){var o=Ut.immutable("first","second","splits"),i=function(e,u,a){var c=o(e,V.none(),a);return n(e)?o(e,u,a):t.property().parent(e).bind(function(o){return r(t,o,e).map(function(t){var e=[{first:t.left,second:t.right}],r=n(o)?o:t.left();return i(r,V.some(t.right()),a.concat(e))}).getOr(c)})};return i(e,V.none(),[])},fu={breakToLeft:lu,breakToRight:cu,breakPath:su},du=function(t,e,n,r){return r(t,e,n[0],n.slice(1))},mu=function(t,e,n){return n.length>0?du(t,e,n,gu):V.none()},gu=function(t,e,n,r){var o=e(t,n);return At.foldr(r,function(n,r){var o=e(t,r);return pu(t,n,o)},o)},pu=function(t,e,n){return e.bind(function(e){return n.filter(F.curry(t.eq,e))})},hu={oneAll:mu},vu=function(t,e){return F.curry(t.eq,e)},bu=function(t,e,n,r){var o=t.property().children(e);if(t.eq(e,n[0]))return V.some([n[0]]);if(t.eq(e,r[0]))return V.some([r[0]]);var i=function(n){var r=At.reverse(n),i=At.findIndex(r,vu(t,e)).getOr(-1),u=i<r.length-1?r[i+1]:r[i];return At.findIndex(o,vu(t,u))},u=i(n),a=i(r);return u.bind(function(t){return a.map(function(e){var n=Math.min(t,e),r=Math.max(t,e);return o.slice(n,r+1)})})},wu=function(t,e,n,r){var o=void 0!==r?r:F.constant(!1),i=[e].concat(t.up().all(e)),u=[n].concat(t.up().all(n)),a=function(t){return At.findIndex(t,o).fold(function(){return t},function(e){return t.slice(0,e+1)})},c=a(i),l=a(u),s=At.find(c,function(e){return At.exists(l,vu(t,e))});return{firstpath:F.constant(c),secondpath:F.constant(l),shared:F.constant(s)}},yu=function(t,e,n){var r=wu(t,e,n);return r.shared().bind(function(e){return bu(t,e,r.firstpath(),r.secondpath())})},xu={subset:yu,ancestors:wu},Cu=function(t,e,n){return hu.oneAll(t,e,n)},Su=function(t,e,n){return xu.subset(t,e,n)},Ru=function(t,e,n,r){return xu.ancestors(t,e,n,r)},Tu=function(t,e,n){return fu.breakToLeft(t,e,n)},Au=function(t,e,n){return fu.breakToRight(t,e,n)},Du=function(t,e,n,r){return fu.breakPath(t,e,n,r)},Eu={sharedOne:Cu,subset:Su,ancestors:Ru,breakToLeft:Tu,breakToRight:Au,breakPath:Du},ku=o(),Ou=function(t,e){return Eu.sharedOne(ku,function(e,n){return t(n)},e)},Nu=function(t,e){return Eu.subset(ku,t,e)},Bu=function(t,e,n){return Eu.ancestors(ku,t,e,n)},Pu=function(t,e){return Eu.breakToLeft(ku,t,e)},Iu=function(t,e){return Eu.breakToRight(ku,t,e)},Wu=function(t,e,n){return Eu.breakPath(ku,t,e,function(t,e,r){return n(e,r)})},Mu={sharedOne:Ou,subset:Nu,ancestors:Bu,breakToLeft:Pu,breakToRight:Iu,breakPath:Wu},Lu=function(t,e){var n=e.column(),r=e.column()+e.colspan()-1,o=e.row(),i=e.row()+e.rowspan()-1;return n<=t.finishCol()&&r>=t.startCol()&&o<=t.finishRow()&&i>=t.startRow()},Fu=function(t,e){return e.column()>=t.startCol()&&e.column()+e.colspan()-1<=t.finishCol()&&e.row()>=t.startRow()&&e.row()+e.rowspan()-1<=t.finishRow()},qu=function(t,e){for(var n=!0,r=F.curry(Fu,e),o=e.startRow();o<=e.finishRow();o++)for(var i=e.startCol();i<=e.finishCol();i++)n=n&&Io.getAt(t,o,i).exists(r);return n?V.some(e):V.none()},Hu={inSelection:Lu,isWithin:Fu,isRectangular:qu},ju=function(t,e){return oe.bounds(Math.min(t.row(),e.row()),Math.min(t.column(),e.column()),Math.max(t.row()+t.rowspan()-1,e.row()+e.rowspan()-1),Math.max(t.column()+t.colspan()-1,e.column()+e.colspan()-1))},_u=function(t,e,n){var r=Io.findItem(t,e,zn.eq),o=Io.findItem(t,n,zn.eq);return r.bind(function(t){return o.map(function(e){return ju(t,e)})})},zu=function(t,e,n){return _u(t,e,n).bind(function(e){return Hu.isRectangular(t,e)})},Uu={getAnyBox:_u,getBox:zu},Vu=function(t,e,n,r){return Io.findItem(t,e,zn.eq).bind(function(e){var o=n>0?e.row()+e.rowspan()-1:e.row(),i=r>0?e.column()+e.colspan()-1:e.column();return Io.getAt(t,o+n,i+r).map(function(t){return t.element()})})},Gu=function(t,e,n){return Uu.getAnyBox(t,e,n).map(function(e){var n=Io.filterItems(t,F.curry(Hu.inSelection,e));return At.map(n,function(t){return t.element()})})},Yu=function(t,e){var n=function(t,e){return zn.contains(e,t)};return Io.findItem(t,e,n).bind(function(t){return t.element()})},Xu={moveBy:Vu,intercepts:Gu,parentCell:Yu},Ku=function(t,e,n){return Ro.table(t).bind(function(r){var o=Zu(r);return Xu.moveBy(o,t,e,n)})},$u=function(t,e,n){var r=Zu(t);return Xu.intercepts(r,e,n)},Ju=function(t,e,n,r,o){var i=Zu(t),u=zn.eq(t,n)?e:Xu.parentCell(i,e),a=zn.eq(t,o)?r:Xu.parentCell(i,r);return Xu.intercepts(i,u,a)},Qu=function(t,e,n){var r=Zu(t);return Uu.getBox(r,e,n)},Zu=function(t){var e=Do.fromTable(t);return Io.generate(e)},ta={moveBy:Ku,intercepts:$u,nestedIntercepts:Ju,getBox:Qu},ea=function(t,e){return lo.ancestor(t,"table")},na=Ut.immutableBag(["boxes","start","finish"],[]),ra=function(t,e,n){var r=function(t){return function(e){return n(e)||zn.eq(e,t)}};return zn.eq(t,e)?V.some(na({boxes:V.some([t]),start:t,finish:e})):ea(t).bind(function(o){return ea(e).bind(function(i){if(zn.eq(o,i))return V.some(na({boxes:ta.intercepts(o,t,e),start:t,finish:e}));if(zn.contains(o,i)){var u=Kr.ancestors(e,"td,th",r(o)),a=u.length>0?u[u.length-1]:e;return V.some(na({boxes:ta.nestedIntercepts(o,t,o,e,i),start:t,finish:a}))}if(zn.contains(i,o)){var u=Kr.ancestors(t,"td,th",r(i)),c=u.length>0?u[u.length-1]:t;return V.some(na({boxes:ta.nestedIntercepts(i,t,o,e,i),start:t,finish:c}))}return Mu.ancestors(t,e).shared().bind(function(u){return lo.closest(u,"table",n).bind(function(n){var u=Kr.ancestors(e,"td,th",r(n)),a=u.length>0?u[u.length-1]:e,c=Kr.ancestors(t,"td,th",r(n)),l=c.length>0?c[c.length-1]:t;return V.some(na({boxes:ta.nestedIntercepts(n,t,o,e,i),start:l,finish:a}))})})})})},oa=function(t,e){var n=Kr.descendants(t,e);return n.length>0?V.some(n):V.none()},ia=function(t,e){return At.find(t,function(t){return be.is(t,e)})},ua=function(t,e,n){return lo.descendant(t,e).bind(function(e){return lo.descendant(t,n).bind(function(t){return Mu.sharedOne(ea,[e,t]).map(function(n){return{first:F.constant(e),last:F.constant(t),table:F.constant(n)}})})})},aa=function(t,e){return lo.ancestor(t,"table").bind(function(n){return lo.descendant(n,e).bind(function(e){return ra(e,t).bind(function(t){return t.boxes().map(function(e){return{boxes:F.constant(e),start:F.constant(t.start()),finish:F.constant(t.finish())}})})})})},ca=function(t,e,n,r,o){return ia(t,o).bind(function(t){return ta.moveBy(t,e,n).bind(function(t){return aa(t,r)})})},la={identify:ra,retrieve:oa,shiftSelection:ca,getEdges:ua},sa=function(t,e){return la.retrieve(t,e)},fa=function(t,e,n){return la.getEdges(t,e,n).bind(function(e){var n=function(e){return zn.eq(t,e)},r=lo.ancestor(e.first(),"thead,tfoot,tbody,table",n),o=lo.ancestor(e.last(),"thead,tfoot,tbody,table",n);return r.bind(function(t){return o.bind(function(n){return zn.eq(t,n)?ta.getBox(e.table(),e.first(),e.last()):V.none()})})})},da={retrieve:sa,retrieveBox:fa},ma="data-mce-selected",ga={selected:F.constant(ma),selectedSelector:F.constant("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:F.constant("[data-mce-selected]"),firstSelected:F.constant("data-mce-first-selected"),firstSelectedSelector:F.constant("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:F.constant("data-mce-last-selected"),lastSelectedSelector:F.constant("td[data-mce-last-selected],th[data-mce-last-selected]")},pa=function(t){if(!X.isArray(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return At.each(t,function(r,o){var i=Mt.keys(r);if(1!==i.length)throw new Error("one and only one name per case");var u=i[0],a=r[u];if(void 0!==n[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!X.isArray(a))throw new Error("case arguments must be an array");e.push(u),n[u]=function(){var n=arguments.length;if(n!==a.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+a.length+" ("+a+"), got "+n);for(var r=new Array(n),i=0;i<r.length;i++)r[i]=arguments[i];var c=function(t){var n=Mt.keys(t);if(e.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+n.join(","));if(!At.forall(e,function(t){return At.contains(n,t)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+e.join(", "));return t[u].apply(null,r)};return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[o].apply(null,r)},match:c,log:function(t){console.log(t,{constructors:e,constructor:u,params:r})}}}}),n},ha={generate:pa},va=ha.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]),ba=function(t,e,n,r){return t.fold(e,n,r)},wa={cata:ba,none:va.none,multiple:va.multiple,single:va.single},ya=function(t,e){return wa.cata(e.get(),F.constant([]),F.identity,F.constant([t]))},xa=function(t,e){var n=function(t){return Pr.has(t,"rowspan")&&parseInt(Pr.get(t,"rowspan"),10)>1||Pr.has(t,"colspan")&&parseInt(Pr.get(t,"colspan"),10)>1},r=ya(t,e);return r.length>0&&At.forall(r,n)?V.some(r):V.none()},Ca=function(t,e){return wa.cata(e.get(),V.none,function(e,n){return 0===e.length?V.none():da.retrieveBox(t,ga.firstSelectedSelector(),ga.lastSelectedSelector()).bind(function(t){return e.length>1?V.some({bounds:F.constant(t),cells:F.constant(e)}):V.none()})},V.none)},Sa={mergable:Ca,unmergable:xa,selection:ya},Ra=function(t){return{element:F.constant(t),mergable:V.none,unmergable:V.none,selection:F.constant([t])}},Ta=function(t,e,n){return{element:F.constant(n),mergable:F.constant(Sa.mergable(e,t)),unmergable:F.constant(Sa.unmergable(n,t)),selection:F.constant(Sa.selection(n,t))}},Aa=function(t){return Ra(t)},Da=Ut.immutable("element","clipboard","generators"),Ea=function(t,e,n,r,o){return{element:F.constant(n),mergable:V.none,unmergable:V.none,selection:F.constant(Sa.selection(n,t)),clipboard:F.constant(r),generators:F.constant(o)}},ka={noMenu:Ra,forMenu:Ta,notCell:Aa,paste:Da,pasteRows:Ea},Oa=function(t){return Ro.table(t[0]).map(ki.deep).map(function(t){return[Ci.extract(t,ga.attributeSelector())]})},Na=function(t,e){return t.selection.serializer.serialize(e.dom(),{})},Ba=function(t,e,n,r){t.on("BeforeGetContent",function(n){var r=function(e){n.preventDefault(),Oa(e).each(function(e){n.content=At.map(e,function(e){return Na(t,e)}).join("")})};!0===n.selection&&wa.cata(e.get(),F.noop,r,F.noop)}),t.on("BeforeSetContent",function(e){if(!0===e.selection&&!0===e.paste){V.from(t.dom.getParent(t.selection.getStart(),"th,td")).each(function(o){var i=se.fromDom(o);Ro.table(i).bind(function(o){var u=At.filter(ou.fromHtml(e.content),function(t){return"meta"!==Cr.name(t)});if(1===u.length&&"table"===Cr.name(u[0])){e.preventDefault();var a=se.fromDom(t.getDoc()),c=Zi.paste(a),l=ka.paste(i,u[0],c);n.pasteCells(o,l).each(function(e){t.selection.setRng(e),t.focus(),r.clear(o)})}})})}})},Pa={registerEvents:Ba},Ia=i("height",function(t){return Lr.inBody(t)?t.dom().getBoundingClientRect().height:t.dom().offsetHeight}),Wa=function(t,e){Ia.set(t,e)},Ma=function(t){return Ia.get(t)},La=function(t){return Ia.getOuter(t)},Fa=function(t,e){var n=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],r=Ia.max(t,e,n);Zo.set(t,"max-height",r+"px")},qa={set:Wa,get:Ma,getOuter:La,setMax:Fa},Ha=i("width",function(t){return t.dom().offsetWidth}),ja=function(t,e){Ha.set(t,e)},_a=function(t){return Ha.get(t)},za=function(t){return Ha.getOuter(t)},Ua=function(t,e){var n=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],r=Ha.max(t,e,n);Zo.set(t,"max-width",r+"px")},Va={set:ja,get:_a,getOuter:za,setMax:Ua},Ga=Wn.detect(),Ya=function(){return Ga.browser.isIE()||Ga.browser.isEdge()},Xa=function(t,e){var n=parseFloat(t);return isNaN(n)?e:n},Ka=function(t,e,n){return Xa(Zo.get(t,e),n)},$a=function(t){var e=Ka(t,"padding-top",0),n=Ka(t,"padding-bottom",0),r=Ka(t,"border-top-width",0),o=Ka(t,"border-bottom-width",0),i=t.dom().getBoundingClientRect().height,u=Zo.get(t,"box-sizing"),a=r+o;return"border-box"===u?i:i-e-n-a},Ja=function(t){return Ka(t,"width",Va.get(t))},Qa=function(t){return Ya()?$a(t):Ka(t,"height",qa.get(t))},Za={getWidth:Ja,getHeight:Qa},tc=/(\d+(\.\d+)?)(\w|%)*/,ec=/(\d+(\.\d+)?)%/,nc=/(\d+(\.\d+)?)px|em/,rc=function(t,e){Zo.set(t,"width",e+"px")},oc=function(t,e){Zo.set(t,"width",e+"%")},ic=function(t,e){Zo.set(t,"height",e+"px")},uc=function(t){return Zo.getRaw(t,"height").getOrThunk(function(){return Za.getHeight(t)+"px"})},ac=function(t,e,n,r){var o=Ro.table(t).map(function(t){var r=n(t);return Math.floor(e/100*r)}).getOr(e);return r(t,o),o},cc=function(t,e,n,r){var o=parseInt(t,10);return An.endsWith(t,"%")&&"table"!==Cr.name(e)?ac(e,o,n,r):o},lc=function(t){var e=uc(t);return e?cc(e,t,qa.get,ic):qa.get(t)},sc=function(t,e,n){return n(t)/fc(t,e)},fc=function(t,e){return Pr.has(t,e)?parseInt(Pr.get(t,e),10):1},dc=function(t){return Zo.getRaw(t,"width").fold(function(){return V.from(Pr.get(t,"width"))},function(t){return V.some(t)})},mc=function(t,e){return t/e.pixelWidth()*100},gc=function(t,e,n){if(ec.test(e)){var r=ec.exec(e);return parseFloat(r[1])}var o=Va.get(t),i=parseInt(o,10);return mc(i,n)},pc=function(t,e){return dc(t).fold(function(){var n=Va.get(t),r=parseInt(n,10);return mc(r,e)},function(n){return gc(t,n,e)})},hc=function(t,e){return t/100*e.pixelWidth()},vc=function(t,e,n){if(nc.test(e)){var r=nc.exec(e);return parseInt(r[1],10)}if(ec.test(e)){var o=ec.exec(e),i=parseFloat(o[1]);return hc(i,n)}var u=Va.get(t);return parseInt(u,10)},bc=function(t,e){return dc(t).fold(function(){var e=Va.get(t);return parseInt(e,10)},function(n){return vc(t,n,e)})},wc=function(t){return sc(t,"rowspan",lc)},yc=function(t){return dc(t).bind(function(t){if(tc.test(t)){var e=tc.exec(t);return V.some({width:F.constant(e[1]),unit:F.constant(e[3])})}return V.none()})},xc=function(t,e,n){Zo.set(t,"width",e+n)},Cc={percentageBasedSizeRegex:F.constant(ec),pixelBasedSizeRegex:F.constant(nc),setPixelWidth:rc,setPercentageWidth:oc,setHeight:ic,getPixelWidth:bc,getPercentageWidth:pc,getGenericWidth:yc,setGenericWidth:xc,getHeight:wc,getRawWidth:dc},Sc=function(t,e){Cc.getGenericWidth(t).each(function(n){var r=n.width()/2;Cc.setGenericWidth(t,r,n.unit()),Cc.setGenericWidth(e,r,n.unit())})},Rc={halve:Sc},Tc=function(t,e){var n=e||se.fromDom(document.documentElement);return no.ancestor(t,F.curry(zn.eq,n)).isSome()},Ac=function(t){var e=t.dom();return e===e.window?t:Cr.isDocument(t)?e.defaultView||e.parentWindow:null},Dc={attached:Tc,windowOf:Ac},Ec=function(t,e){var n=function(n,r){return Ec(t+n,e+r)};return{left:F.constant(t),top:F.constant(e),translate:n}},kc=function(t){var e=t.getBoundingClientRect();return Ec(e.left,e.top)},Oc=function(t,e){return void 0!==t?t:void 0!==e?e:0},Nc=function(t){var e=t.dom().ownerDocument,n=e.body,r=Dc.windowOf(se.fromDom(e)),o=e.documentElement,i=Oc(r.pageYOffset,o.scrollTop),u=Oc(r.pageXOffset,o.scrollLeft),a=Oc(o.clientTop,n.clientTop),c=Oc(o.clientLeft,n.clientLeft);return Pc(t).translate(u-c,i-a)},Bc=function(t){var e=t.dom();return Ec(e.offsetLeft,e.offsetTop)},Pc=function(t){var e=t.dom(),n=e.ownerDocument,r=n.body,o=se.fromDom(n.documentElement);return r===e?Ec(r.offsetLeft,r.offsetTop):Dc.attached(t,o)?kc(e):Ec(0,0)},Ic={absolute:Nc,relative:Bc,viewport:Pc},Wc=Ut.immutable("row","y"),Mc=Ut.immutable("col","x"),Lc=function(t){return Ic.absolute(t).left()+Va.getOuter(t)},Fc=function(t){return Ic.absolute(t).left()},qc=function(t,e){return Mc(t,Fc(e))},Hc=function(t,e){return Mc(t,Lc(e))},jc=function(t){return Ic.absolute(t).top()},_c=function(t,e){return Wc(t,jc(e))},zc=function(t,e){return Wc(t,jc(e)+qa.getOuter(e))},Uc=function(t,e,n){if(0===n.length)return[];var r=At.map(n.slice(1),function(e,n){return e.map(function(e){return t(n,e)})}),o=n[n.length-1].map(function(t){return e(n.length-1,t)});return r.concat([o])},Vc=function(t,e){return-t},Gc={delta:F.identity,positions:F.curry(Uc,_c,zc),edge:jc},Yc={delta:F.identity,edge:Fc,positions:F.curry(Uc,qc,Hc)},Xc={delta:Vc,edge:Lc,positions:F.curry(Uc,Hc,qc)},Kc={height:Gc,rtl:Xc,ltr:Yc},$c={ltr:Kc.ltr,rtl:Kc.rtl},Jc=function(t){var e=Do.fromTable(t);return Io.generate(e).grid()},Qc={getGridSize:Jc},Zc=function(t){var e=t,n=function(){return e};return{get:n,set:function(t){e=t},clone:function(){return Zc(n())}}},tl=function(t,e){return el(t,e,{validate:X.isFunction,label:"function"})},el=function(t,e,n){if(0===e.length)throw new Error("You must specify at least one required field.");return zt.validateStrArr("required",e),zt.checkDupes(e),function(r){var o=Mt.keys(r);At.forall(e,function(t){return At.contains(o,t)})||zt.reqMessage(e,o),t(e,o);var i=At.filter(e,function(t){return!n.validate(r[t],t)});return i.length>0&&zt.invalidTypeMessage(i,n.label),r}},nl=function(t,e){var n=At.filter(e,function(e){return!At.contains(t,e)});n.length>0&&zt.unsuppMessage(n)},rl=F.noop,ol={exactly:F.curry(tl,nl),ensure:F.curry(tl,rl),ensureWith:F.curry(el,rl)},il=function(t){var e=Pr.has(t,"colspan")?parseInt(Pr.get(t,"colspan"),10):1,n=Pr.has(t,"rowspan")?parseInt(Pr.get(t,"rowspan"),10):1;return{element:F.constant(t),colspan:F.constant(e),rowspan:F.constant(n)}},ul=function(t,e){ll(t);var n=Zc(V.none()),r=void 0!==e?e:il,o=function(e){return t.cell(e)},i=function(t){var e=r(t);return o(e)},u=function(t){var e=i(t);return n.get().isNone()&&n.set(V.some(e)),a=V.some({item:t,replacement:e}),e},a=V.none();return{getOrInit:function(t,e){return a.fold(function(){return u(t)},function(n){return e(t,n.item)?n.replacement:u(t)})},cursor:n.get}},al=function(t,e){return function(n){var r=Zc(V.none());ll(n);var o=[],i=function(t,e){return At.find(o,function(n){return e(n.item,t)})},u=function(i){var u=n.replace(i,e,{scope:t});return o.push({item:i,sub:u}),r.get().isNone()&&r.set(V.some(u)),u};return{replaceOrInit:function(t,e){return i(t,e).fold(function(){return u(t)},function(n){return e(t,n.item)?n.sub:u(t)})},cursor:r.get}}},cl=function(t){ll(t);var e=Zc(V.none());return{combine:function(n){return e.get().isNone()&&e.set(V.some(n)),function(){var e=t.cell({element:F.constant(n),colspan:F.constant(1),rowspan:F.constant(1)});return Zo.remove(e,"width"),Zo.remove(n,"width"),e}},cursor:e.get}},ll=ol.exactly(["cell","row","replace","gap"]),sl={modification:ul,transform:al,merging:cl},fl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],dl=function(t,e){var n=t.property().name(e);return At.contains(["ol","ul"],n)},ml=function(t,e){var n=t.property().name(e);return At.contains(fl,n)},gl=function(t,e){var n=t.property().name(e);return At.contains(["address","pre","p","h1","h2","h3","h4","h5","h6"],n)},pl=function(t,e){var n=t.property().name(e);return At.contains(["h1","h2","h3","h4","h5","h6"],n)},hl=function(t,e){return At.contains(["div","li","td","th","blockquote","body","caption"],t.property().name(e))},vl=function(t,e){return At.contains(["br","img","hr","input"],t.property().name(e))},bl=function(t,e){return"iframe"===t.property().name(e)},wl=function(t,e){return!(ml(t,e)||vl(t,e))&&"li"!==t.property().name(e)},yl={isBlock:ml,isList:dl,isFormatting:gl,isHeading:pl,isContainer:hl,isEmptyTag:vl,isFrame:bl,isInline:wl},xl=o(),Cl=function(t){return yl.isBlock(xl,t)},Sl=function(t){
return yl.isList(xl,t)},Rl=function(t){return yl.isFormatting(xl,t)},Tl=function(t){return yl.isHeading(xl,t)},Al=function(t){return yl.isContainer(xl,t)},Dl=function(t){return yl.isEmptyTag(xl,t)},El=function(t){return yl.isFrame(xl,t)},kl=function(t){return yl.isInline(xl,t)},Ol={isBlock:Cl,isList:Sl,isFormatting:Rl,isHeading:Tl,isContainer:Al,isEmptyTag:Dl,isFrame:El,isInline:kl},Nl=function(t){var e=function(t){return"br"===Cr.name(t)},n=function(t){return At.forall(t,function(t){return e(t)||Cr.isText(t)&&0===Ii.get(t).trim().length})},r=function(t){return"li"===Cr.name(t)||no.ancestor(t,Ol.isList).isSome()},o=function(t){return sr.nextSibling(t).map(function(t){return!!Ol.isBlock(t)||(Ol.isEmptyTag(t)?"img"!==Cr.name(t):void 0)}).getOr(!1)},i=function(t){return Vi.last(t).bind(function(n){var i=o(n);return sr.parent(n).map(function(o){return!0===i||r(o)||e(n)||Ol.isBlock(o)&&!zn.eq(t,o)?[]:[se.fromTag("br")]})}).getOr([])},u=function(){var e=At.bind(t,function(t){var e=sr.children(t);return n(e)?[]:e.concat(i(t))});return 0===e.length?[se.fromTag("br")]:e}();pi.empty(t[0]),fi.append(t[0],u)},Bl={merge:Nl},Pl=function(t,e){return e},Il=function(t,e){return X.isObject(t)&&X.isObject(e)?Ml(t,e):e},Wl=function(t){return function(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<e.length;o++){var i=e[o];for(var u in i)i.hasOwnProperty(u)&&(r[u]=t(r[u],i[u]))}return r}},Ml=Wl(Il),Ll=Wl(Pl),Fl={deepMerge:Ml,merge:Ll},ql=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},Hl=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return V.none()},jl=function(t,e){for(var n=[],r=0;r<t.length;r++){var o=t[r];if(!o.isSome())return V.none();n.push(o.getOrDie())}return V.some(e.apply(null,n))},_l={cat:ql,findMap:Hl,liftN:jl},zl=function(t,e,n){var r=t.cells(),o=r.slice(0,e),i=r.slice(e),u=o.concat([n]).concat(i);return Vl(t,u)},Ul=function(t,e,n){t.cells()[e]=n},Vl=function(t,e){return oe.rowcells(e,t.section())},Gl=function(t,e){var n=t.cells(),r=At.map(n,e);return oe.rowcells(r,t.section())},Yl=function(t,e){return t.cells()[e]},Xl=function(t,e){return Yl(t,e).element()},Kl=function(t){return t.cells().length},$l={addCell:zl,setCells:Vl,mutateCell:Ul,getCell:Yl,getCellElement:Xl,mapCells:Gl,cellLength:Kl},Jl=function(t,e){return At.map(t,function(t){return $l.getCell(t,e)})},Ql=function(t,e){return t[e]},Zl=function(t,e){if(0===t.length)return 0;var n=t[0];return At.findIndex(t,function(t){return!e(n.element(),t.element())}).fold(function(){return t.length},function(t){return t})},ts=function(t,e,n,r){var o=Ql(t,e).cells().slice(n),i=Zl(o,r),u=Jl(t,n).slice(e),a=Zl(u,r);return{colspan:F.constant(i),rowspan:F.constant(a)}},es={subgrid:ts},ns=function(t,e){var n=At.map(t,function(t,e){return At.map(t.cells(),function(t,e){return!1})}),r=function(t,e,r,o){for(var i=t;i<t+r;i++)for(var u=e;u<e+o;u++)n[i][u]=!0};return At.map(t,function(o,i){var u=At.bind(o.cells(),function(o,u){if(!1===n[i][u]){var a=es.subgrid(t,i,u,e);return r(i,u,a.rowspan(),a.colspan()),[oe.detailnew(o.element(),a.rowspan(),a.colspan(),o.isNew())]}return[]});return oe.rowdetails(u,o.section())})},rs=function(t,e,n){for(var r=[],o=0;o<t.grid().rows();o++){for(var i=[],u=0;u<t.grid().columns();u++){var a=Io.getAt(t,o,u).map(function(t){return oe.elementnew(t.element(),n)}).getOrThunk(function(){return oe.elementnew(e.gap(),!0)});i.push(a)}var c=oe.rowcells(i,t.all()[o].section());r.push(c)}return r},os={toDetails:ns,toGrid:rs},is=function(t,e,n,r){n===r?Pr.remove(t,e):Pr.set(t,e,n)},us=function(t,e){var n=[],r=[],o=function(e,o){var i=lo.child(t,o).getOrThunk(function(){var e=se.fromTag(o,sr.owner(t).dom());return ui.append(t,e),e});pi.empty(i);var u=At.map(e,function(t){t.isNew()&&n.push(t.element());var e=t.element();return pi.empty(e),At.each(t.cells(),function(t){t.isNew()&&r.push(t.element()),is(t.element(),"colspan",t.colspan(),1),is(t.element(),"rowspan",t.rowspan(),1),ui.append(e,t.element())}),e});fi.append(i,u)},i=function(e){lo.child(t,e).bind(pi.remove)},u=function(t,e){t.length>0?o(t,e):i(e)},a=[],c=[],l=[];return At.each(e,function(t){switch(t.section()){case"thead":a.push(t);break;case"tbody":c.push(t);break;case"tfoot":l.push(t)}}),u(a,"thead"),u(c,"tbody"),u(l,"tfoot"),{newRows:F.constant(n),newCells:F.constant(r)}},as=function(t){return At.map(t,function(t){var e=ki.shallow(t.element());return At.each(t.cells(),function(t){var n=ki.deep(t.element());is(n,"colspan",t.colspan(),1),is(n,"rowspan",t.rowspan(),1),ui.append(e,n)}),e})},cs={render:us,copy:as},ls=function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n},ss=function(t,e){for(var n=[],r=t;r<e;r++)n.push(r);return n},fs=function(t,e){var n=[];return At.each(t,function(r,o){o<t.length-1&&!e(r,t[o+1])?n.push(r):o===t.length-1&&n.push(r)}),n},ds=function(t,e){if(e<0||e>=t.length-1)return V.none();var n=t[e].fold(function(){var n=At.reverse(t.slice(0,e));return _l.findMap(n,function(t,e){return t.map(function(t){return{value:t,delta:e+1}})})},function(t){return V.some({value:t,delta:0})}),r=t[e+1].fold(function(){var n=t.slice(e+1);return _l.findMap(n,function(t,e){return t.map(function(t){return{value:t,delta:e+1}})})},function(t){return V.some({value:t,delta:1})});return n.bind(function(t){return r.map(function(e){var n=e.delta+t.delta;return Math.abs(e.value-t.value)/n})})},ms={repeat:ls,range:ss,unique:fs,deduce:ds},gs=function(t){var e=t.grid(),n=ms.range(0,e.columns()),r=ms.range(0,e.rows());return At.map(n,function(e){return ps(function(){return At.bind(r,function(n){return Io.getAt(t,n,e).filter(function(t){return t.column()===e}).fold(F.constant([]),function(t){return[t]})})},function(t){return 1===t.colspan()},function(){return Io.getAt(t,0,e)})})},ps=function(t,e,n){var r=t();return At.find(r,e).orThunk(function(){return V.from(r[0]).orThunk(n)}).map(function(t){return t.element()})},hs=function(t){var e=t.grid(),n=ms.range(0,e.rows()),r=ms.range(0,e.columns());return At.map(n,function(e){return ps(function(){return At.bind(r,function(n){return Io.getAt(t,e,n).filter(function(t){return t.row()===e}).fold(F.constant([]),function(t){return[t]})})},function(t){return 1===t.rowspan()},function(){return Io.getAt(t,e,0)})})},vs={columns:gs,rows:hs},bs=function(t,e,n,r,o){var i=se.fromTag("div");return Zo.setAll(i,{position:"absolute",left:e-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),Pr.setAll(i,{"data-column":t,role:"presentation"}),i},ws=function(t,e,n,r,o){var i=se.fromTag("div");return Zo.setAll(i,{position:"absolute",left:e+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),Pr.setAll(i,{"data-row":t,role:"presentation"}),i},ys={col:bs,row:ws},xs=function(t){var e=t.replace(/\./g,"-");return{resolve:function(t){return e+"-"+t}}},Cs={css:xs},Ss=Cs.css("ephox-snooker"),Rs={resolve:Ss.resolve},Ts=function(t,e){var n=Pr.get(t,e);return void 0===n||""===n?[]:n.split(" ")},As=function(t,e,n){var r=Ts(t,e),o=r.concat([n]);Pr.set(t,e,o.join(" "))},Ds=function(t,e,n){var r=At.filter(Ts(t,e),function(t){return t!==n});r.length>0?Pr.set(t,e,r.join(" ")):Pr.remove(t,e)},Es={read:Ts,add:As,remove:Ds},ks=function(t){return void 0!==t.dom().classList},Os=function(t){return Es.read(t,"class")},Ns=function(t,e){return Es.add(t,"class",e)},Bs=function(t,e){return Es.remove(t,"class",e)},Ps=function(t,e){At.contains(Os(t),e)?Bs(t,e):Ns(t,e)},Is={get:Os,add:Ns,remove:Bs,toggle:Ps,supports:ks},Ws=function(t,e){Is.supports(t)?t.dom().classList.add(e):Is.add(t,e)},Ms=function(t){0===(Is.supports(t)?t.dom().classList:Is.get(t)).length&&Pr.remove(t,"class")},Ls=function(t,e){if(Is.supports(t)){t.dom().classList.remove(e)}else Is.remove(t,e);Ms(t)},Fs=function(t,e){return Is.supports(t)?t.dom().classList.toggle(e):Is.toggle(t,e)},qs=function(t,e){var n=Is.supports(t),r=t.dom().classList;return a(function(){n?r.remove(e):Is.remove(t,e)},function(){n?r.add(e):Is.add(t,e)},Hs(t,e))},Hs=function(t,e){return Is.supports(t)&&t.dom().classList.contains(e)},js={add:Ws,remove:Ls,toggle:Fs,toggler:qs,has:Hs},_s=Rs.resolve("resizer-bar"),zs=Rs.resolve("resizer-rows"),Us=Rs.resolve("resizer-cols"),Vs=function(t){var e=Kr.descendants(t.parent(),"."+_s);At.each(e,pi.remove)},Gs=function(t,e,n){var r=t.origin();At.each(e,function(e,o){e.each(function(e){var o=n(r,e);js.add(o,_s),ui.append(t.parent(),o)})})},Ys=function(t,e,n,r){Gs(t,e,function(t,e){var o=ys.col(e.col(),e.x()-t.left(),n.top()-t.top(),7,r);return js.add(o,Us),o})},Xs=function(t,e,n,r){Gs(t,e,function(t,e){var o=ys.row(e.row(),n.left()-t.left(),e.y()-t.top(),r,7);return js.add(o,zs),o})},Ks=function(t,e,n,r,o,i){var u=Ic.absolute(e),a=n.length>0?o.positions(n,e):[];Xs(t,a,u,Va.getOuter(e));var c=r.length>0?i.positions(r,e):[];Ys(t,c,u,qa.getOuter(e))},$s=function(t,e,n,r){Vs(t);var o=Do.fromTable(e),i=Io.generate(o),u=vs.rows(i),a=vs.columns(i);Ks(t,e,u,a,n,r)},Js=function(t,e){var n=Kr.descendants(t.parent(),"."+_s);At.each(n,e)},Qs=function(t){Js(t,function(t){Zo.set(t,"display","none")})},Zs=function(t){Js(t,function(t){Zo.set(t,"display","block")})},tf=function(t){return js.has(t,zs)},ef=function(t){return js.has(t,Us)},nf={refresh:$s,hide:Qs,show:Zs,destroy:Vs,isRowBar:tf,isColBar:ef},rf=function(t,e){return os.toGrid(t,e,!1)},of=function(t,e){var n=function(t){return _l.findMap(t,function(t){return sr.parent(t.element()).map(function(t){var e=sr.parent(t).isNone();return oe.elementnew(t,e)})}).getOrThunk(function(){return oe.elementnew(e.row(),!0)})};return At.map(t,function(t){var e=n(t.details());return oe.rowdatanew(e.element(),t.details(),t.section(),e.isNew())})},uf=function(t,e){var n=os.toDetails(t,zn.eq);return of(n,e)},af=function(t,e){var n=At.flatten(At.map(t.all(),function(t){return t.cells()}));return At.find(n,function(t){return zn.eq(e,t.element())})},cf=function(t,e,n,r,o){return function(i,u,a,c,l){var s=Do.fromTable(u),f=Io.generate(s);return e(f,a).map(function(e){var n=rf(f,c),r=t(n,e,zn.eq,o(c)),i=uf(r.grid(),c);return{grid:F.constant(i),cursor:r.cursor}}).fold(function(){return V.none()},function(t){var e=cs.render(u,t.grid());return n(u,t.grid(),l),r(u),nf.refresh(i,u,Kc.height,l),V.some({cursor:t.cursor,newRows:e.newRows,newCells:e.newCells})})}},lf=function(t,e){return Ro.cell(e.element()).bind(function(e){return af(t,e)})},sf=function(t,e){return Ro.cell(e.element()).bind(function(n){return af(t,n).map(function(t){return Fl.merge(t,{generators:e.generators,clipboard:e.clipboard})})})},ff=function(t,e){var n=At.map(e.selection(),function(e){return Ro.cell(e).bind(function(e){return af(t,e)})}),r=_l.cat(n);return r.length>0?V.some(Fl.merge({cells:r},{generators:e.generators,clipboard:e.clipboard})):V.none()},df=function(t,e){return e.mergable()},mf=function(t,e){return e.unmergable()},gf=function(t,e){var n=At.map(e.selection(),function(e){return Ro.cell(e).bind(function(e){return af(t,e)})}),r=_l.cat(n);return r.length>0?V.some(r):V.none()},pf={run:cf,toDetailList:uf,onCell:lf,onCells:gf,onPaste:sf,onPasteRows:ff,onMergable:df,onUnmergable:mf},hf=function(t){var e=function(e){return t===e},n=function(e){return hf(t)},r=function(e){return hf(t)},o=function(e){return hf(e(t))},i=function(e){e(t)},u=function(e){return e(t)},a=function(e,n){return n(t)},c=function(e){return e(t)},l=function(e){return e(t)},s=function(){return V.some(t)};return{is:e,isValue:F.always,isError:F.never,getOr:F.constant(t),getOrThunk:F.constant(t),getOrDie:F.constant(t),or:n,orThunk:r,fold:a,map:o,each:i,bind:u,exists:c,forall:l,toOption:s}},vf=function(t){var e=function(t){return t()},n=function(){return F.die(String(t))()},r=function(t){return t},o=function(t){return t()},i=function(e){return vf(t)},u=function(e){return vf(t)},a=function(e,n){return e(t)};return{is:F.never,isValue:F.never,isError:F.always,getOr:F.identity,getOrThunk:e,getOrDie:n,or:r,orThunk:o,fold:a,map:i,each:F.noop,bind:u,exists:F.never,forall:F.always,toOption:V.none}},bf={value:hf,error:vf},wf=function(t,e,n){if(t.row()>=e.length||t.column()>$l.cellLength(e[0]))return bf.error("invalid start address out of table bounds, row: "+t.row()+", column: "+t.column());var r=e.slice(t.row()),o=r[0].cells().slice(t.column()),i=$l.cellLength(n[0]),u=n.length;return bf.value({rowDelta:F.constant(r.length-u),colDelta:F.constant(o.length-i)})},yf=function(t,e){var n=$l.cellLength(t[0]),r=$l.cellLength(e[0]);return{rowDelta:F.constant(0),colDelta:F.constant(n-r)}},xf=function(t,e){return At.map(t,function(){return oe.elementnew(e.cell(),!0)})},Cf=function(t,e,n){return t.concat(ms.repeat(e,function(e){return $l.setCells(t[t.length-1],xf(t[t.length-1].cells(),n))}))},Sf=function(t,e,n){return At.map(t,function(t){return $l.setCells(t,t.cells().concat(xf(ms.range(0,e),n)))})},Rf=function(t,e,n){var r=e.colDelta()<0?Sf:F.identity;return(e.rowDelta()<0?Cf:F.identity)(r(t,Math.abs(e.colDelta()),n),Math.abs(e.rowDelta()),n)},Tf={measure:wf,measureWidth:yf,tailor:Rf},Af=function(t,e,n,r){if(0===t.length)return t;for(var o=e.startRow();o<=e.finishRow();o++)for(var i=e.startCol();i<=e.finishCol();i++)$l.mutateCell(t[o],i,oe.elementnew(r(),!1));return t},Df=function(t,e,n,r){for(var o=!0,i=0;i<t.length;i++)for(var u=0;u<$l.cellLength(t[0]);u++){var a=$l.getCellElement(t[i],u),c=n(a,e);!0===c&&!1===o?$l.mutateCell(t[i],u,oe.elementnew(r(),!0)):!0===c&&(o=!1)}return t},Ef=function(t,e){return At.foldl(t,function(t,n){return At.exists(t,function(t){return e(t.element(),n.element())})?t:t.concat([n])},[])},kf=function(t,e,n,r){if(e>0&&e<t.length){var o=t[e-1].cells(),i=Ef(o,n);At.each(i,function(o){for(var i=V.none(),u=e;u<t.length;u++)for(var a=0;a<$l.cellLength(t[0]);a++){var c=t[u].cells()[a],l=n(c.element(),o.element());l&&(i.isNone()&&(i=V.some(r())),i.each(function(e){$l.mutateCell(t[u],a,oe.elementnew(e,!0))}))}})}return t},Of={merge:Af,unmerge:Df,splitRows:kf},Nf=function(t,e,n,r){var o=$l.getCell(t[e],n),i=F.curry(r,o.element()),u=t[e];return t.length>1&&$l.cellLength(u)>1&&(n>0&&i($l.getCellElement(u,n-1))||n<u.length-1&&i($l.getCellElement(u,n+1))||e>0&&i($l.getCellElement(t[e-1],n))||e<t.length-1&&i($l.getCellElement(t[e+1],n)))},Bf=function(t,e,n,r,o){for(var i=t.row(),u=t.column(),a=n.length,c=$l.cellLength(n[0]),l=i+a,s=u+c,f=i;f<l;f++)for(var d=u;d<s;d++){Nf(e,f,d,o)&&Of.unmerge(e,$l.getCellElement(e[f],d),o,r.cell);var m=$l.getCellElement(n[f-i],d-u),g=r.replace(m);$l.mutateCell(e[f],d,oe.elementnew(g,!0))}return e},Pf=function(t,e,n,r,o){return Tf.measure(t,e,n).map(function(i){var u=Tf.tailor(e,i,r);return Bf(t,u,n,r,o)})},If=function(t,e,n,r,o){Of.splitRows(e,t,o,r.cell);var i=Tf.measureWidth(n,e),u=Tf.tailor(n,i,r),a=Tf.measureWidth(e,u),c=Tf.tailor(e,a,r);return c.slice(0,t).concat(u).concat(c.slice(t,c.length))},Wf={merge:Pf,insert:If},Mf=function(t,e,n,r,o){var i=t.slice(0,e),u=t.slice(e),a=$l.mapCells(t[n],function(n,i){return e>0&&e<t.length&&r($l.getCellElement(t[e-1],i),$l.getCellElement(t[e],i))?$l.getCell(t[e],i):oe.elementnew(o(n.element(),r),!0)});return i.concat([a]).concat(u)},Lf=function(t,e,n,r,o){return At.map(t,function(t){var i=e>0&&e<$l.cellLength(t)&&r($l.getCellElement(t,e-1),$l.getCellElement(t,e)),u=i?$l.getCell(t,e):oe.elementnew(o($l.getCellElement(t,n),r),!0);return $l.addCell(t,e,u)})},Ff=function(t,e,n,r,o){var i=n+1;return At.map(t,function(t,u){var a=u===e,c=a?oe.elementnew(o($l.getCellElement(t,n),r),!0):$l.getCell(t,n);return $l.addCell(t,i,c)})},qf=function(t,e,n,r,o){var i=e+1,u=t.slice(0,i),a=t.slice(i),c=$l.mapCells(t[e],function(t,e){return e===n?oe.elementnew(o(t.element(),r),!0):t});return u.concat([c]).concat(a)},Hf=function(t,e,n){var r=At.map(t,function(t){var r=t.cells().slice(0,e).concat(t.cells().slice(n+1));return oe.rowcells(r,t.section())});return At.filter(r,function(t){return t.cells().length>0})},jf=function(t,e,n){return t.slice(0,e).concat(t.slice(n+1))},_f={insertRowAt:Mf,insertColumnAt:Lf,splitCellIntoColumns:Ff,splitCellIntoRows:qf,deleteRowsAt:jf,deleteColumnsAt:Hf},zf=function(t,e,n,r){var o=function(t){return At.exists(e,function(e){return n(t.element(),e.element())})};return At.map(t,function(t){return $l.mapCells(t,function(t){return o(t)?oe.elementnew(r(t.element(),n),!0):t})})},Uf=function(t,e,n,r){return void 0!==$l.getCellElement(t[e],n)&&e>0&&r($l.getCellElement(t[e-1],n),$l.getCellElement(t[e],n))},Vf=function(t,e,n){return e>0&&n($l.getCellElement(t,e-1),$l.getCellElement(t,e))},Gf=function(t,e,n,r){var o=At.bind(t,function(r,o){return Uf(t,o,e,n)||Vf(r,e,n)?[]:[$l.getCell(r,e)]});return zf(t,o,n,r)},Yf=function(t,e,n,r){var o=t[e],i=At.bind(o.cells(),function(r,i){return Uf(t,e,i,n)||Vf(o,i,n)?[]:[r]});return zf(t,i,n,r)},Xf={replaceColumn:Gf,replaceRow:Yf},Kf=function(){return td(function(t,e,n,r,o){return t()})},$f=function(t){return td(function(e,n,r,o,i){return n(t)})},Jf=function(t,e){return td(function(n,r,o,i,u){return o(t,e)})},Qf=function(t,e,n){return td(function(r,o,i,u,a){return u(t,e,n)})},Zf=function(t,e){return td(function(n,r,o,i,u){return u(t,e)})},td=function(t){return{fold:t}},ed={none:Kf,only:$f,left:Jf,middle:Qf,right:Zf},nd=function(t,e){return 0===t.length?ed.none():1===t.length?ed.only(0):0===e?ed.left(0,1):e===t.length-1?ed.right(e-1,e):e>0&&e<t.length-1?ed.middle(e-1,e,e+1):ed.none()},rd=function(t,e,n,r){var o=t.slice(0),i=nd(t,e),u=function(t){return At.map(t,F.constant(0))},a=F.constant(u(o)),c=function(t){return r.singleColumnWidth(o[t],n)},l=function(t,e){if(n>=0){var i=Math.max(r.minCellWidth(),o[e]-n);return u(o.slice(0,t)).concat([n,i-o[e]]).concat(u(o.slice(e+1)))}var a=Math.max(r.minCellWidth(),o[t]+n),c=o[t]-a;return u(o.slice(0,t)).concat([a-o[t],c]).concat(u(o.slice(e+1)))},s=l,f=function(t,e,n){return l(e,n)},d=function(t,e){if(n>=0)return u(o.slice(0,e)).concat([n]);var i=Math.max(r.minCellWidth(),o[e]+n);return u(o.slice(0,e)).concat([i-o[e]])};return i.fold(a,c,s,f,d)},od={determine:rd},id=function(t,e){return Pr.has(t,e)&&parseInt(Pr.get(t,e),10)>1},ud=function(t){return id(t,"colspan")},ad=function(t){return id(t,"rowspan")},cd=function(t,e){return parseInt(Zo.get(t,e),10)},ld={hasColspan:ud,hasRowspan:ad,minWidth:F.constant(10),minHeight:F.constant(10),getInt:cd},sd=function(t,e,n){return Zo.getRaw(t,e).fold(function(){return n(t)+"px"},function(t){return t})},fd=function(t){return sd(t,"width",Cc.getPixelWidth)},dd=function(t){return sd(t,"height",Cc.getHeight)},md=function(t,e,n,r,o){var i=vs.columns(t),u=At.map(i,function(t){return t.map(e.edge)});return At.map(i,function(t,e){return t.filter(F.not(ld.hasColspan)).fold(function(){var t=ms.deduce(u,e);return r(t)},function(t){return n(t,o)})})},gd=function(t){return t.map(function(t){return t+"px"}).getOr("")},pd=function(t,e){return md(t,e,fd,gd)},hd=function(t,e,n){return md(t,e,Cc.getPercentageWidth,function(t){return t.fold(function(){return n.minCellWidth()},function(t){return t/n.pixelWidth()*100})},n)},vd=function(t,e,n){return md(t,e,Cc.getPixelWidth,function(t){return t.getOrThunk(n.minCellWidth)},n)},bd=function(t,e,n,r){var o=vs.rows(t),i=At.map(o,function(t){return t.map(e.edge)});return At.map(o,function(t,e){return t.filter(F.not(ld.hasRowspan)).fold(function(){var t=ms.deduce(i,e);return r(t)},function(t){return n(t)})})},wd=function(t,e){return bd(t,e,Cc.getHeight,function(t){return t.getOrThunk(ld.minHeight)})},yd=function(t,e){return bd(t,e,dd,gd)},xd={getRawWidths:pd,getPixelWidths:vd,getPercentageWidths:hd,getPixelHeights:wd,getRawHeights:yd},Cd=function(t,e,n){for(var r=0,o=t;o<e;o++)r+=void 0!==n[o]?n[o]:0;return r},Sd=function(t,e){var n=Io.justCells(t);return At.map(n,function(t){var n=Cd(t.column(),t.column()+t.colspan(),e);return{element:t.element,width:F.constant(n),colspan:t.colspan}})},Rd=function(t,e){var n=Io.justCells(t);return At.map(n,function(t){var n=Cd(t.row(),t.row()+t.rowspan(),e);return{element:t.element,height:F.constant(n),rowspan:t.rowspan}})},Td=function(t,e){return At.map(t.all(),function(t,n){return{element:t.element,height:F.constant(e[n])}})},Ad={recalculateWidth:Sd,recalculateHeight:Rd,matchRowHeight:Td},Dd=function(t,e){var n=parseFloat(t),r=Va.get(e),o=function(t){return t/r*100},i=function(t,e){return[100-t]},u=function(){return ld.minWidth()/r*100},a=function(t,e,r){var o=n+r;Cc.setPercentageWidth(t,o)};return{width:F.constant(n),pixelWidth:F.constant(r),getWidths:xd.getPercentageWidths,getCellDelta:o,singleColumnWidth:i,minCellWidth:u,setElementWidth:Cc.setPercentageWidth,setTableWidth:a}},Ed=function(t){var e=parseInt(t,10),n=F.identity,r=function(t,e){return[Math.max(ld.minWidth(),t+e)-t]},o=function(t,e,n){var r=At.foldr(e,function(t,e){return t+e},0);Cc.setPixelWidth(t,r)};return{width:F.constant(e),pixelWidth:F.constant(e),getWidths:xd.getPixelWidths,getCellDelta:n,singleColumnWidth:r,minCellWidth:ld.minWidth,setElementWidth:Cc.setPixelWidth,setTableWidth:o}},kd=function(t,e){if(Cc.percentageBasedSizeRegex().test(e)){var n=Cc.percentageBasedSizeRegex().exec(e);return Dd(n[1],t)}if(Cc.pixelBasedSizeRegex().test(e)){var r=Cc.pixelBasedSizeRegex().exec(e);return Ed(r[1])}var o=Va.get(t);return Ed(o)},Od=function(t){return Cc.getRawWidth(t).fold(function(){var e=Va.get(t);return Ed(e)},function(e){return kd(t,e)})},Nd={getTableSize:Od},Bd=function(t){return Io.generate(t)},Pd=function(t){return At.foldr(t,function(t,e){return t+e},0)},Id=function(t){var e=Do.fromTable(t);return Bd(e)},Wd=function(t,e,n,r){var o=Nd.getTableSize(t),i=o.getCellDelta(e),u=Id(t),a=o.getWidths(u,r,o),c=od.determine(a,n,i,o),l=At.map(c,function(t,e){return t+a[e]}),s=Ad.recalculateWidth(u,l);At.each(s,function(t){o.setElementWidth(t.element(),t.width())}),n===u.grid().columns()-1&&o.setTableWidth(t,l,i)},Md=function(t,e,n,r){var o=Id(t),i=xd.getPixelHeights(o,r),u=At.map(i,function(t,r){return n===r?Math.max(e+t,ld.minHeight()):t}),a=Ad.recalculateHeight(o,u),c=Ad.matchRowHeight(o,u);At.each(c,function(t){Cc.setHeight(t.element(),t.height())}),At.each(a,function(t){Cc.setHeight(t.element(),t.height())});var l=Pd(u);Cc.setHeight(t,l)},Ld=function(t,e,n){var r=Nd.getTableSize(t),o=Bd(e),i=r.getWidths(o,n,r),u=Ad.recalculateWidth(o,i);At.each(u,function(t){r.setElementWidth(t.element(),t.width())});var a=At.foldr(i,function(t,e){return e+t},0);u.length>0&&r.setElementWidth(t,a)},Fd={adjustWidth:Wd,adjustHeight:Md,adjustWidthTo:Ld},qd=function(t){0===Ro.cells(t).length&&pi.remove(t)},Hd=Ut.immutable("grid","cursor"),jd=function(t,e,n){return _d(t,e,n).orThunk(function(){return _d(t,0,0)})},_d=function(t,e,n){return V.from(t[e]).bind(function(t){return V.from(t.cells()[n]).bind(function(t){return V.from(t.element())})})},zd=function(t,e,n){return Hd(t,_d(t,e,n))},Ud=function(t){return At.foldl(t,function(t,e){return At.exists(t,function(t){return t.row()===e.row()})?t:t.concat([e])},[]).sort(function(t,e){return t.row()-e.row()})},Vd=function(t){return At.foldl(t,function(t,e){return At.exists(t,function(t){return t.column()===e.column()})?t:t.concat([e])},[]).sort(function(t,e){return t.column()-e.column()})},Gd=function(t,e,n,r){var o=e.row(),i=e.row(),u=_f.insertRowAt(t,i,o,n,r.getOrInit);return zd(u,i,e.column())},Yd=function(t,e,n,r){var o=e[0].row(),i=e[0].row(),u=Ud(e),a=At.foldl(u,function(t,e){return _f.insertRowAt(t,i,o,n,r.getOrInit)},t);return zd(a,i,e[0].column())},Xd=function(t,e,n,r){var o=e.row(),i=e.row()+e.rowspan(),u=_f.insertRowAt(t,i,o,n,r.getOrInit);return zd(u,i,e.column())},Kd=function(t,e,n,r){var o=Ud(e),i=o[o.length-1].row(),u=o[o.length-1].row()+o[o.length-1].rowspan(),a=At.foldl(o,function(t,e){return _f.insertRowAt(t,u,i,n,r.getOrInit)},t);return zd(a,u,e[0].column())},$d=function(t,e,n,r){var o=e.column(),i=e.column(),u=_f.insertColumnAt(t,i,o,n,r.getOrInit);return zd(u,e.row(),i)},Jd=function(t,e,n,r){var o=Vd(e),i=o[0].column(),u=o[0].column(),a=At.foldl(o,function(t,e){return _f.insertColumnAt(t,u,i,n,r.getOrInit)},t);return zd(a,e[0].row(),u)},Qd=function(t,e,n,r){var o=e.column(),i=e.column()+e.colspan(),u=_f.insertColumnAt(t,i,o,n,r.getOrInit);return zd(u,e.row(),i)},Zd=function(t,e,n,r){var o=e[e.length-1].column(),i=e[e.length-1].column()+e[e.length-1].colspan(),u=Vd(e),a=At.foldl(u,function(t,e){return _f.insertColumnAt(t,i,o,n,r.getOrInit)},t);return zd(a,e[0].row(),i)},tm=function(t,e,n,r){var o=Xf.replaceRow(t,e.row(),n,r.replaceOrInit);return zd(o,e.row(),e.column())},em=function(t,e,n,r){var o=Xf.replaceColumn(t,e.column(),n,r.replaceOrInit);return zd(o,e.row(),e.column())},nm=function(t,e,n,r){var o=Xf.replaceRow(t,e.row(),n,r.replaceOrInit);return zd(o,e.row(),e.column())},rm=function(t,e,n,r){var o=Xf.replaceColumn(t,e.column(),n,r.replaceOrInit);return zd(o,e.row(),e.column())},om=function(t,e,n,r){var o=_f.splitCellIntoColumns(t,e.row(),e.column(),n,r.getOrInit);return zd(o,e.row(),e.column())},im=function(t,e,n,r){var o=_f.splitCellIntoRows(t,e.row(),e.column(),n,r.getOrInit);return zd(o,e.row(),e.column())},um=function(t,e,n,r){var o=Vd(e),i=_f.deleteColumnsAt(t,o[0].column(),o[o.length-1].column()),u=jd(i,e[0].row(),e[0].column());return Hd(i,u)},am=function(t,e,n,r){var o=Ud(e),i=_f.deleteRowsAt(t,o[0].row(),o[o.length-1].row()),u=jd(i,e[0].row(),e[0].column());return Hd(i,u)},cm=function(t,e,n,r){var o=e.cells();Bl.merge(o);var i=Of.merge(t,e.bounds(),n,F.constant(o[0]));return Hd(i,V.from(o[0]))},lm=function(t,e,n,r){var o=At.foldr(e,function(t,e){return Of.unmerge(t,e,n,r.combine(e))},t);return Hd(o,V.from(e[0]))},sm=function(t,e,n,r){var o=function(t,e){var n=Do.fromTable(t),r=Io.generate(n);return os.toGrid(r,e,!0)}(e.clipboard(),e.generators()),i=oe.address(e.row(),e.column());return Wf.merge(i,t,o,e.generators(),n).fold(function(){return Hd(t,V.some(e.element()))},function(t){var n=jd(t,e.row(),e.column());return Hd(t,n)})},fm=function(t,e,n){var r=Do.fromPastedRows(t,n),o=Io.generate(r);return os.toGrid(o,e,!0)},dm=function(t,e,n,r){var o=t[e.cells[0].row()],i=e.cells[0].row(),u=fm(e.clipboard(),e.generators(),o),a=Wf.insert(i,t,u,e.generators(),n),c=jd(a,e.cells[0].row(),e.cells[0].column());return Hd(a,c)},mm=function(t,e,n,r){var o=t[e.cells[0].row()],i=e.cells[e.cells.length-1].row()+e.cells[e.cells.length-1].rowspan(),u=fm(e.clipboard(),e.generators(),o),a=Wf.insert(i,t,u,e.generators(),n),c=jd(a,e.cells[0].row(),e.cells[0].column());return Hd(a,c)},gm=Fd.adjustWidthTo,pm={insertRowBefore:pf.run(Gd,pf.onCell,F.noop,F.noop,sl.modification),insertRowsBefore:pf.run(Yd,pf.onCells,F.noop,F.noop,sl.modification),insertRowAfter:pf.run(Xd,pf.onCell,F.noop,F.noop,sl.modification),insertRowsAfter:pf.run(Kd,pf.onCells,F.noop,F.noop,sl.modification),insertColumnBefore:pf.run($d,pf.onCell,gm,F.noop,sl.modification),insertColumnsBefore:pf.run(Jd,pf.onCells,gm,F.noop,sl.modification),insertColumnAfter:pf.run(Qd,pf.onCell,gm,F.noop,sl.modification),insertColumnsAfter:pf.run(Zd,pf.onCells,gm,F.noop,sl.modification),splitCellIntoColumns:pf.run(om,pf.onCell,gm,F.noop,sl.modification),splitCellIntoRows:pf.run(im,pf.onCell,F.noop,F.noop,sl.modification),eraseColumns:pf.run(um,pf.onCells,gm,qd,sl.modification),eraseRows:pf.run(am,pf.onCells,F.noop,qd,sl.modification),makeColumnHeader:pf.run(em,pf.onCell,F.noop,F.noop,sl.transform("row","th")),unmakeColumnHeader:pf.run(rm,pf.onCell,F.noop,F.noop,sl.transform(null,"td")),makeRowHeader:pf.run(tm,pf.onCell,F.noop,F.noop,sl.transform("col","th")),unmakeRowHeader:pf.run(nm,pf.onCell,F.noop,F.noop,sl.transform(null,"td")),mergeCells:pf.run(cm,pf.onMergable,F.noop,F.noop,sl.merging),unmergeCells:pf.run(lm,pf.onUnmergable,gm,F.noop,sl.merging),pasteCells:pf.run(sm,pf.onPaste,gm,F.noop,sl.modification),pasteRowsBefore:pf.run(dm,pf.onPasteRows,F.noop,F.noop,sl.modification),pasteRowsAfter:pf.run(mm,pf.onPasteRows,F.noop,F.noop,sl.modification)},hm=function(t){return se.fromDom(t.getBody())},vm=function(t){return t.getBoundingClientRect().width},bm=function(t){return t.getBoundingClientRect().height},wm=function(t){return function(e){return zn.eq(e,hm(t))}},ym=function(t){return t?t.replace(/px$/,""):""},xm=function(t){return/^[0-9]+$/.test(t)&&(t+="px"),t},Cm=function(t,e){return function(n){return"rtl"===Sm(n)?e:t}},Sm=function(t){return"rtl"===Zo.get(t,"direction")?"rtl":"ltr"},Rm={onDirection:Cm,getDirection:Sm},Tm={isRtl:F.constant(!1)},Am={isRtl:F.constant(!0)},Dm=function(t){return"rtl"===Rm.getDirection(t)?Am:Tm},Em={directionAt:Dm},km=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],Om={"border-collapse":"collapse",width:"100%"},Nm={border:"1"},Bm=function(t){return t.getParam("table_default_attributes",Nm,"object")},Pm=function(t){return t.getParam("table_default_styles",Om,"object")},Im=function(t){return t.getParam("table_resize_bars",!0,"boolean")},Wm=function(t){return t.getParam("table_tab_navigation",!0,"boolean")},Mm=function(t){return t.getParam("table_cell_advtab",!0,"boolean")},Lm=function(t){return t.getParam("table_row_advtab",!0,"boolean")},Fm=function(t){return t.getParam("table_advtab",!0,"boolean")},qm=function(t){return t.getParam("table_appearance_options",!0,"boolean")},Hm=function(t){return t.getParam("table_grid",!0,"boolean")},jm=function(t){return t.getParam("table_style_by_css",!1,"boolean")},_m=function(t){return t.getParam("table_cell_class_list",[],"array")},zm=function(t){return t.getParam("table_row_class_list",[],"array")},Um=function(t){return t.getParam("table_class_list",[],"array")},Vm=function(t){return t.getParam("color_picker_callback")},Gm=function(t){return!1===t.getParam("table_responsive_width")},Ym=function(t){var e=t.getParam("table_clone_elements");return X.isString(e)?V.some(e.split(/[ ,]/)):Array.isArray(e)?V.some(e):V.none()},Xm=function(t){var e=t.getParam("object_resizing",!0);return"table"===e||e},Km=function(t){var e=t.getParam("table_toolbar",km);return""===e||!1===e?[]:X.isString(e)?e.split(/[ ,]/):X.isArray(e)?e:[]},$m=function(t,e){return t.fire("newrow",{node:e})},Jm=function(t,e){return t.fire("newcell",{node:e})},Qm=function(t,e,n,r){t.fire("ObjectResizeStart",{target:e,width:n,height:r})},Zm=function(t,e,n,r){t.fire("ObjectResized",{target:e,width:n,height:r})},tg=function(t,e){var n=function(t){return"table"===Cr.name(hm(t))},r=function(e){var r=Qc.getGridSize(e);return!1===n(t)||r.rows()>1},o=function(e){var r=Qc.getGridSize(e);return!1===n(t)||r.columns()>1},i=Ym(t),a=function(e,n,r,o){return function(a,c){var l=Kr.descendants(a,"td[data-mce-style],th[data-mce-style]");At.each(l,function(t){Pr.remove(t,"data-mce-style")});var s=o(),f=se.fromDom(t.getDoc()),d=u(Em.directionAt),m=Zi.cellOperations(r,f,i);return n(a)?e(s,a,c,m,d).bind(function(e){return At.each(e.newRows(),function(e){$m(t,e.dom())}),At.each(e.newCells(),function(e){Jm(t,e.dom())}),e.cursor().map(function(e){var n=t.dom.createRng();return n.setStart(e.dom(),0),n.setEnd(e.dom(),0),n})}):V.none()}};return{deleteRow:a(pm.eraseRows,r,F.noop,e),deleteColumn:a(pm.eraseColumns,o,F.noop,e),insertRowsBefore:a(pm.insertRowsBefore,F.always,F.noop,e),insertRowsAfter:a(pm.insertRowsAfter,F.always,F.noop,e),insertColumnsBefore:a(pm.insertColumnsBefore,F.always,Rc.halve,e),insertColumnsAfter:a(pm.insertColumnsAfter,F.always,Rc.halve,e),mergeCells:a(pm.mergeCells,F.always,F.noop,e),unmergeCells:a(pm.unmergeCells,F.always,F.noop,e),pasteRowsBefore:a(pm.pasteRowsBefore,F.always,F.noop,e),pasteRowsAfter:a(pm.pasteRowsAfter,F.always,F.noop,e),pasteCells:a(pm.pasteCells,F.always,F.noop,e)}},eg=function(t,e,n){var r=Do.fromTable(t),o=Io.generate(r);return pf.onCells(o,e).map(function(t){var e=os.toGrid(o,n,!1),r=e.slice(t[0].row(),t[t.length-1].row()+t[t.length-1].rowspan()),i=pf.toDetailList(r,n);return cs.copy(i)})},ng={copyRows:eg},rg=tinymce.util.Tools.resolve("tinymce.util.Tools"),og=function(t,e,n){var r,o=t.select("td,th",e);return r=function(e,r){for(var o=0;o<r.length;o++){var i=t.getStyle(r[o],n);if(void 0===e&&(e=i),e!==i)return""}return e}(r,o)},ig=function(t,e,n){
n&&t.formatter.apply("align"+n,{},e)},ug=function(t,e,n){n&&t.formatter.apply("valign"+n,{},e)},ag=function(t,e){rg.each("left center right".split(" "),function(n){t.formatter.remove("align"+n,{},e)})},cg=function(t,e){rg.each("top middle bottom".split(" "),function(n){t.formatter.remove("valign"+n,{},e)})},lg={applyAlign:ig,applyVAlign:ug,unApplyAlign:ag,unApplyVAlign:cg,getTDTHOverallStyle:og},sg=function(t,e,n){var r=function(t,n){return n=n||[],rg.each(t,function(t){var o={text:t.text||t.title};t.menu?o.menu=r(t.menu):(o.value=t.value,e&&e(o)),n.push(o)}),n};return r(t,n||[])},fg=function(t,e){var n=t.dom,r=e.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);"style"===e.control.name()?(r.find("#borderStyle").value(i["border-style"]||"")[0].fire("select"),r.find("#borderColor").value(i["border-color"]||"")[0].fire("change"),r.find("#backgroundColor").value(i["background-color"]||"")[0].fire("change"),r.find("#width").value(i.width||"").fire("change"),r.find("#height").value(i.height||"").fire("change")):(i["border-style"]=o.borderStyle,i["border-color"]=o.borderColor,i["background-color"]=o.backgroundColor,i.width=o.width?xm(o.width):"",i.height=o.height?xm(o.height):""),r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(i))))},dg=function(t,e){var n=t.parseStyle(t.getAttrib(e,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=t.serializeStyle(n),r},mg=function(t){var e=function(){var e=Vm(t);if(e)return function(n){return e.call(t,function(t){n.control.value(t).fire("change")},n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:F.curry(fg,t)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:F.curry(fg,t),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:e()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:e()}]}]}},gg={createStyleForm:mg,buildListItems:sg,updateStyleField:fg,extractAdvancedStyles:dg},pg=function(t,e){delete t.dataset.mceStyle,t.style.cssText+=";"+e},hg=function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class"),type:e.nodeName.toLowerCase(),style:"",align:"",valign:""};return rg.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),rg.each("top middle bottom".split(" "),function(n){t.formatter.matchNode(e,"valign"+n)&&(r.valign=n)}),Mm(t)&&rg.extend(r,gg.extractAdvancedStyles(n,e)),r},vg=function(t,e,n){function r(t,e,n){n&&u.setAttrib(t,e,n)}function o(t,e,n){n&&u.setStyle(t,e,n)}var i,u=t.dom;gg.updateStyleField(t,n),i=n.control.rootControl.toJSON(),t.undoManager.transact(function(){rg.each(e,function(n){r(n,"scope",i.scope),1===e.length?r(n,"style",i.style):pg(n,i.style),r(n,"class",i.class),o(n,"width",xm(i.width)),o(n,"height",xm(i.height)),i.type&&n.nodeName.toLowerCase()!==i.type&&(n=u.rename(n,i.type)),1===e.length&&(lg.unApplyAlign(t,n),lg.unApplyVAlign(t,n)),i.align&&lg.applyAlign(t,n,i.align),i.valign&&lg.applyVAlign(t,n,i.valign)}),t.focus()})},bg=function(t){var e,n,r,o=[];if(o=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),e=t.dom.getParent(t.selection.getStart(),"td,th"),!o.length&&e&&o.push(e),e=e||o[0]){n=o.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:e.nodeName.toLowerCase()}:hg(t,e),_m(t).length>0&&(r={name:"class",type:"listbox",label:"Class",values:gg.buildListItems(_m(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[e.value]})})})});var i={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:F.curry(gg.updateStyleField,t)},{label:"Height",name:"height",onchange:F.curry(gg.updateStyleField,t)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};Mm(t)?t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:i},gg.createStyleForm(t)],onsubmit:F.curry(vg,t,o)}):t.windowManager.open({title:"Cell properties",data:n,body:i,onsubmit:F.curry(vg,t,o)})}},wg={open:bg},yg=function(t,e){var n=t.dom,r={height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class"),align:"",style:"",type:e.parentNode.nodeName.toLowerCase()};return rg.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),Lm(t)&&rg.extend(r,gg.extractAdvancedStyles(n,e)),r},xg=function(t,e,n){var r=t.getParent(e,"table"),o=e.parentNode,i=t.select(n,r)[0];i||(i=t.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?t.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(e),o.hasChildNodes()||t.remove(o)},Cg=function(t){var e,n,r,o,i,u,a=t.dom,l=[];e=a.getParent(t.selection.getStart(),"table"),n=a.getParent(t.selection.getStart(),"td,th"),rg.each(e.rows,function(t){rg.each(t.cells,function(e){if(a.getAttrib(e,"data-mce-selected")||e===n)return l.push(t),!1})}),(r=l[0])&&(i=l.length>1?{height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:yg(t,r),zm(t).length>0&&(o={name:"class",type:"listbox",label:"Class",values:gg.buildListItems(zm(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})})}),u={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},o]},Lm(t)?t.windowManager.open({title:"Row properties",data:i,bodyType:"tabpanel",body:[{title:"General",type:"form",items:u},gg.createStyleForm(t)],onsubmit:F.curry(c,t,l,i)}):t.windowManager.open({title:"Row properties",data:i,body:u,onsubmit:F.curry(c,t,l,i)}))},Sg={open:Cg},Rg=tinymce.util.Tools.resolve("tinymce.Env"),Tg={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Ag=function(){return se.fromTag("table")},Dg=function(){return se.fromTag("tbody")},Eg=function(){return se.fromTag("tr")},kg=function(){return se.fromTag("th")},Og=function(){return se.fromTag("td")},Ng=function(t,e,n,r,o){void 0===o&&(o=Tg);var i=Ag();Zo.setAll(i,o.styles),Pr.setAll(i,o.attributes);var u=Dg();ui.append(i,u);for(var a=[],c=0;c<t;c++){for(var l=Eg(),s=0;s<e;s++){var f=c<n||s<r?kg():Og();s<r&&Pr.set(f,"scope","row"),c<n&&Pr.set(f,"scope","col"),ui.append(f,se.fromTag("br")),o.percentages&&Zo.set(f,"width",100/e+"%"),ui.append(l,f)}a.push(l)}return fi.append(u,a),i},Bg=function(t){return t.dom().innerHTML},Pg=function(t,e){var n=sr.owner(t),r=n.dom(),o=se.fromDom(r.createDocumentFragment()),i=ou.fromHtml(e,r);fi.append(o,i),pi.empty(t),ui.append(t,o)},Ig=function(t){var e=se.fromTag("div"),n=se.fromDom(t.dom().cloneNode(!0));return ui.append(e,n),Bg(e)},Wg={get:Bg,set:Pg,getOuter:Ig},Mg=function(t,e){t.selection.select(e.dom(),!0),t.selection.collapse(!0)},Lg=function(t,e){lo.descendant(e,"td,th").each(F.curry(Mg,t))},Fg=function(t,e){At.each(Kr.descendants(e,"tr"),function(e){$m(t,e.dom()),At.each(Kr.descendants(e,"th,td"),function(e){Jm(t,e.dom())})})},qg=function(t){return X.isString(t)&&-1!==t.indexOf("%")},Hg=function(t,e,n){var r=Pm(t),o={styles:r,attributes:Bm(t),percentages:qg(r.width)&&!Gm(t)},i=Ng(n,e,0,0,o);Pr.set(i,"data-mce-id","__mce");var u=Wg.getOuter(i);return t.insertContent(u),lo.descendant(hm(t),'table[data-mce-id="__mce"]').map(function(e){return Gm(t)&&Zo.set(e,"width",Zo.get(e,"width")),Pr.remove(e,"data-mce-id"),Fg(t,e),Lg(t,e),e.dom()}).getOr(null)},jg={insert:Hg},_g=function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),cellspacing:n.getStyle(e,"border-spacing")||n.getAttrib(e,"cellspacing"),cellpadding:n.getAttrib(e,"data-mce-cell-padding")||n.getAttrib(e,"cellpadding")||lg.getTDTHOverallStyle(t.dom,e,"padding"),border:n.getAttrib(e,"data-mce-border")||n.getAttrib(e,"border")||lg.getTDTHOverallStyle(t.dom,e,"border"),borderColor:n.getAttrib(e,"data-mce-border-color"),caption:!!n.select("caption",e)[0],class:n.getAttrib(e,"class")};return rg.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),Fm(t)&&rg.extend(r,gg.extractAdvancedStyles(n,e)),r},zg=function(t,e,n){var r=t.dom,o={},i={};if(o.class=n.class,i.height=xm(n.height),r.getAttrib(e,"width")&&!jm(t)?o.width=ym(n.width):i.width=xm(n.width),jm(t)?(i["border-width"]=xm(n.border),i["border-spacing"]=xm(n.cellspacing),rg.extend(o,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):rg.extend(o,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),jm(t)&&e.children)for(var u=0;u<e.children.length;u++)l(r,e.children[u],{"border-width":xm(n.border),"border-color":n.borderColor,padding:xm(n.cellpadding)});n.style?rg.extend(i,r.parseStyle(n.style)):i=rg.extend({},r.parseStyle(r.getAttrib(e,"style")),i),o.style=r.serializeStyle(i),r.setAttribs(e,o)},Ug=function(t,e,n){var r,o,i=t.dom;gg.updateStyleField(t,n),o=n.control.rootControl.toJSON(),!1===o.class&&delete o.class,t.undoManager.transact(function(){e||(e=jg.insert(t,o.cols||1,o.rows||1)),zg(t,e,o),r=i.select("caption",e)[0],r&&!o.caption&&i.remove(r),!r&&o.caption&&(r=i.create("caption"),r.innerHTML=Rg.ie?" ":'<br data-mce-bogus="1"/>',e.insertBefore(r,e.firstChild)),lg.unApplyAlign(t,e),o.align&&lg.applyAlign(t,e,o.align),t.focus(),t.addVisual()})},Vg=function(t,e){var n,r,o,i,u,a=t.dom,c={};!0===e?(n=a.getParent(t.selection.getStart(),"table"))&&(c=_g(t,n)):(r={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),Um(t).length>0&&(c.class&&(c.class=c.class.replace(/\s*mce\-item\-table\s*/g,"")),i={name:"class",type:"listbox",label:"Class",values:gg.buildListItems(Um(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})})}),u={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:qm(t)?[r,o,{label:"Width",name:"width",onchange:F.curry(gg.updateStyleField,t)},{label:"Height",name:"height",onchange:F.curry(gg.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,o,{label:"Width",name:"width",onchange:F.curry(gg.updateStyleField,t)},{label:"Height",name:"height",onchange:F.curry(gg.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},i]},Fm(t)?t.windowManager.open({title:"Table properties",data:c,bodyType:"tabpanel",body:[{title:"General",type:"form",items:u},gg.createStyleForm(t)],onsubmit:F.curry(Ug,t,n)}):t.windowManager.open({title:"Table properties",data:c,body:u,onsubmit:F.curry(Ug,t,n)})},Gg={open:Vg},Yg=rg.each,Xg=function(t,e,n,r,o){var i=wm(t),u=function(){var e=se.fromDom(t.dom.getParent(t.selection.getStart(),"th,td"));Ro.table(e,i).filter(F.not(i)).each(function(e){var n=se.fromText("");ui.after(e,n),pi.remove(e);var r=t.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),t.selection.setRng(r)})},a=function(){return se.fromDom(t.dom.getParent(t.selection.getStart(),"th,td"))},c=function(t){return Ro.table(t,i)},l=function(t){return{width:vm(t.dom()),height:vm(t.dom())}},s=function(t,e,n){var r=l(n);e.width===r.width&&e.height===r.height||(Qm(t,n.dom(),e.width,e.height),Zm(t,n.dom(),r.width,r.height))},f=function(e){var o=a();c(o).each(function(i){var u=ka.forMenu(r,i,o),a=l(i);e(i,u).each(function(e){s(t,a,i),t.selection.setRng(e),t.focus(),n.clear(i)})})},d=function(e){var n=a();return c(n).bind(function(e){var o=se.fromDom(t.getDoc()),i=ka.forMenu(r,e,n),u=Zi.cellOperations(F.noop,o,V.none());return ng.copyRows(e,i,u)})},m=function(e){o.get().each(function(o){var i=At.map(o,function(t){return ki.deep(t)}),u=a();c(u).bind(function(o){var a=se.fromDom(t.getDoc()),c=Zi.paste(a),l=ka.pasteRows(r,o,u,i,c);e(o,l).each(function(e){t.selection.setRng(e),t.focus(),n.clear(o)})})})};Yg({mceTableSplitCells:function(){f(e.unmergeCells)},mceTableMergeCells:function(){f(e.mergeCells)},mceTableInsertRowBefore:function(){f(e.insertRowsBefore)},mceTableInsertRowAfter:function(){f(e.insertRowsAfter)},mceTableInsertColBefore:function(){f(e.insertColumnsBefore)},mceTableInsertColAfter:function(){f(e.insertColumnsAfter)},mceTableDeleteCol:function(){f(e.deleteColumn)},mceTableDeleteRow:function(){f(e.deleteRow)},mceTableCutRow:function(t){o.set(d()),f(e.deleteRow)},mceTableCopyRow:function(t){o.set(d())},mceTablePasteRowBefore:function(t){m(e.pasteRowsBefore)},mceTablePasteRowAfter:function(t){m(e.pasteRowsAfter)},mceTableDelete:u},function(e,n){t.addCommand(n,e)}),Yg({mceInsertTable:F.curry(Gg.open,t),mceTableProps:F.curry(Gg.open,t,!0),mceTableRowProps:F.curry(Sg.open,t),mceTableCellProps:F.curry(wg.open,t)},function(e,n){t.addCommand(n,function(t,n){e(n)})})},Kg={registerCommands:Xg},$g=function(t){var e=V.from(t.dom().documentElement).map(se.fromDom).getOr(t);return{parent:F.constant(e),view:F.constant(t),origin:F.constant(Ec(0,0))}},Jg=function(t,e){var n=F.curry(Ic.absolute,e);return{parent:F.constant(e),view:F.constant(t),origin:n}},Qg=function(t,e){return{parent:F.constant(e),view:F.constant(t),origin:F.constant(Ec(0,0))}},Zg={only:$g,detached:Jg,body:Qg},tp=function(t){return{registry:Mt.map(t,function(t){return{bind:t.bind,unbind:t.unbind}}),trigger:Mt.map(t,function(t){return t.trigger})}},ep={create:tp},np=ol.exactly(["compare","extract","mutate","sink"]),rp=ol.exactly(["element","start","stop","destroy"]),op=ol.exactly(["forceDrop","drop","move","delayDrop"]),ip={mode:np,sink:rp,api:op},up=Cs.css("ephox-dragster"),ap={resolve:up.resolve},cp=function(t,e,n,r,o,i,u){return{target:F.constant(t),x:F.constant(e),y:F.constant(n),stop:r,prevent:o,kill:i,raw:F.constant(u)}},lp=function(t,e){return function(n){if(t(n)){var r=se.fromDom(n.target),o=function(){n.stopPropagation()},i=function(){n.preventDefault()},u=F.compose(i,o),a=cp(r,n.clientX,n.clientY,o,i,u,n);e(a)}}},sp=function(t,e,n,r,o){var i=lp(n,r);return t.dom().addEventListener(e,i,o),{unbind:F.curry(mp,t,e,i,o)}},fp=function(t,e,n,r){return sp(t,e,n,r,!1)},dp=function(t,e,n,r){return sp(t,e,n,r,!0)},mp=function(t,e,n,r){t.dom().removeEventListener(e,n,r)},gp={bind:fp,capture:dp},pp=F.constant(!0),hp=function(t,e,n){return gp.bind(t,e,pp,n)},vp=function(t,e,n){return gp.capture(t,e,pp,n)},bp={bind:hp,capture:vp},wp=function(t,e){return Ec(e.left()-t.left(),e.top()-t.top())},yp=function(t){return V.some(Ec(t.x(),t.y()))},xp=function(t,e){t.mutate(e.left(),e.top())},Cp=function(t,e){var n=f(e),r=bp.bind(n.element(),"mousedown",t.forceDrop),o=bp.bind(n.element(),"mouseup",t.drop),i=bp.bind(n.element(),"mousemove",t.move),u=bp.bind(n.element(),"mouseout",t.delayDrop),a=function(){n.destroy(),o.unbind(),i.unbind(),u.unbind(),r.unbind()},c=function(t){ui.append(t,n.element())},l=function(){pi.remove(n.element())};return ip.sink({element:n.element,start:c,stop:l,destroy:a})},Sp=ip.mode({compare:wp,extract:yp,sink:Cp,mutate:xp}),Rp=function(t,e){var n=null,r=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null,r=null)},throttle:function(){r=arguments,null===n&&(n=setTimeout(function(){t.apply(null,r),n=null,r=null},e))}}},Tp=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){var r=arguments;null===n&&(n=setTimeout(function(){t.apply(null,r),n=null,r=null},e))}}},Ap=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){var r=arguments;null!==n&&clearTimeout(n),n=setTimeout(function(){t.apply(null,r),n=null,r=null},e)}}},Dp={adaptable:Rp,first:Tp,last:Ap},Ep=function(t,e,n){var r=!1,o=ep.create({start:s([]),stop:s([])}),i=g(),u=function(){p.stop(),i.isOn()&&(i.off(),o.trigger.stop())},a=Dp.last(u,200),c=function(t){p.start(t),i.on(),o.trigger.start()},l=function(t,n){a.cancel(),i.onEvent(t,e)};i.events.move.bind(function(n){e.mutate(t,n.info())});var f=function(){r=!0},d=function(){r=!1},m=function(t){return function(){var e=Array.prototype.slice.call(arguments,0);if(r)return t.apply(null,e)}},p=e.sink(ip.api({forceDrop:u,drop:m(u),move:m(l),delayDrop:m(a.throttle)}),n),h=function(){p.destroy()};return{element:p.element,go:c,on:f,off:d,destroy:h,events:o.registry}},kp={setup:Ep},Op=function(t,e){var n=void 0!==e?e:{},r=void 0!==n.mode?n.mode:Sp;return kp.setup(t,r,e)},Np={transform:Op},Bp=function(t){return lo.first(t).isSome()},Pp=function(t,e,n){return lo.ancestor(t,e,n).isSome()},Ip=function(t,e){return lo.sibling(t,e).isSome()},Wp=function(t,e){return lo.child(t,e).isSome()},Mp=function(t,e){return lo.descendant(t,e).isSome()},Lp=function(t,e,n){return lo.closest(t,e,n).isSome()},Fp={any:Bp,ancestor:Pp,sibling:Ip,child:Wp,descendant:Mp,closest:Lp},qp=Rs.resolve("resizer-bar-dragging"),Hp=function(){var t=se.fromTag("div");return Zo.setAll(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),ui.append(Lr.body(),t),t},jp=function(t,e){return t.inline?Zg.body(hm(t),Hp()):Zg.only(se.fromDom(t.getDoc()))},_p=function(t,e){t.inline&&pi.remove(e.parent())},zp={get:jp,remove:_p},Up=function(t){var e,n,r=V.none(),o=V.none(),i=V.none(),a=/(\d+(\.\d+)?)%/,c=function(t){return"TABLE"===t.nodeName},l=function(e){return t.dom.getStyle(e,"width")||t.dom.getAttrib(e,"width")},s=function(){return o},f=function(){return i.getOr(Zg.only(se.fromDom(t.getBody())))},d=function(){o.each(function(t){t.destroy()}),i.each(function(e){zp.remove(t,e)})};return t.on("init",function(){var e=u(Em.directionAt),n=zp.get(t);if(i=V.some(n),Xm(t)&&Im(t)){var a=b(n,e);a.on(),a.events.startDrag.bind(function(e){r=V.some(t.selection.getRng())}),a.events.beforeResize.bind(function(e){var n=e.table().dom();Qm(t,n,vm(n),bm(n))}),a.events.afterResize.bind(function(e){var n=e.table(),o=n.dom(),i=Kr.descendants(n,"td[data-mce-style],th[data-mce-style]");At.each(i,function(t){Pr.remove(t,"data-mce-style")}),r.each(function(e){t.selection.setRng(e),t.focus()}),Zm(t,o,vm(o),bm(o)),t.undoManager.add()}),o=V.some(a)}}),t.on("ObjectResizeStart",function(t){var r=t.target;c(r)&&(e=t.width,n=l(r))}),t.on("ObjectResized",function(r){var o=r.target;if(c(o)){var i=o;if(a.test(n)){var u=parseFloat(a.exec(n)[1]),l=r.width*u/e;t.dom.setStyle(i,"width",l+"%")}else{var s=[];rg.each(i.rows,function(e){rg.each(e.cells,function(e){var n=t.dom.getStyle(e,"width",!0);s.push({cell:e,width:n})})}),rg.each(s,function(e){t.dom.setStyle(e.cell,"width",e.width),t.dom.setAttrib(e.cell,"width",null)})}}}),{lazyResize:s,lazyWire:f,destroy:d}},Vp=function(t){return Kp(function(e,n,r,o){return e(t)})},Gp=function(t){return Kp(function(e,n,r,o){return n(t)})},Yp=function(t,e){return Kp(function(n,r,o,i){return o(t,e)})},Xp=function(t){return Kp(function(e,n,r,o){return o(t)})},Kp=function(t){return{fold:t}},$p={none:Vp,first:Gp,middle:Yp,last:Xp},Jp=function(t,e){return Ro.table(t,e).bind(function(e){var n=Ro.cells(e);return At.findIndex(n,function(e){return zn.eq(t,e)}).map(function(t){return{index:F.constant(t),all:F.constant(n)}})})},Qp=function(t,e){return Jp(t,e).fold(function(){return $p.none(t)},function(e){return e.index()+1<e.all().length?$p.middle(t,e.all()[e.index()+1]):$p.last(t)})},Zp=function(t,e){return Jp(t,e).fold(function(){return $p.none()},function(e){return e.index()-1>=0?$p.middle(t,e.all()[e.index()-1]):$p.first(t)})},th={next:Qp,prev:Zp},eh=ha.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),nh=function(t,e,n,r){return t.fold(e,n,r)},rh=function(t){return t.fold(F.identity,F.identity,F.identity)},oh={before:eh.before,on:eh.on,after:eh.after,cata:nh,getStart:rh},ih=ha.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),uh=Ut.immutable("start","soffset","finish","foffset"),ah=function(t){return ih.exact(t.start(),t.soffset(),t.finish(),t.foffset())},ch=function(t){return t.match({domRange:function(t){return se.fromDom(t.startContainer)},relative:function(t,e){return oh.getStart(t)},exact:function(t,e,n,r){return t}})},lh=function(t){var e=ch(t);return sr.defaultView(e)},sh={domRange:ih.domRange,relative:ih.relative,exact:ih.exact,exactFromRange:ah,range:uh,getWin:lh},fh=function(t,e,n,r){var o=sr.owner(t),i=o.dom().createRange();return i.setStart(t.dom(),e),i.setEnd(n.dom(),r),i},dh=function(t,e,n,r){var o=fh(t,e,n,r);return se.fromDom(o.commonAncestorContainer)},mh=function(t,e,n,r){var o=fh(t,e,n,r),i=zn.eq(t,n)&&e===r;return o.collapsed&&!i},gh={after:mh,commonAncestorContainer:dh},ph=function(t,e){var n=e||document,r=n.createDocumentFragment();return At.each(t,function(t){r.appendChild(t.dom())}),se.fromDom(r)},hh={fromElements:ph},vh=function(t,e){var n=t.document.createRange();return bh(n,e),n},bh=function(t,e){t.selectNodeContents(e.dom())},wh=function(t,e){return e.compareBoundaryPoints(t.END_TO_START,t)<1&&e.compareBoundaryPoints(t.START_TO_END,t)>-1},yh=function(t){return t.document.createRange()},xh=function(t,e){e.fold(function(e){t.setStartBefore(e.dom())},function(e,n){t.setStart(e.dom(),n)},function(e){t.setStartAfter(e.dom())})},Ch=function(t,e){e.fold(function(e){t.setEndBefore(e.dom())},function(e,n){t.setEnd(e.dom(),n)},function(e){t.setEndAfter(e.dom())})},Sh=function(t,e){Ah(t),t.insertNode(e.dom())},Rh=function(t,e,n){var r=t.document.createRange();return xh(r,e),Ch(r,n),r},Th=function(t,e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i},Ah=function(t){t.deleteContents()},Dh=function(t){var e=t.cloneContents();return se.fromDom(e)},Eh=function(t){return{left:F.constant(t.left),top:F.constant(t.top),right:F.constant(t.right),bottom:F.constant(t.bottom),width:F.constant(t.width),height:F.constant(t.height)}},kh=function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?V.some(n).map(Eh):V.none()},Oh=function(t){var e=t.getBoundingClientRect();return e.width>0||e.height>0?V.some(e).map(Eh):V.none()},Nh=function(t){return t.toString()},Bh={create:yh,replaceWith:Sh,selectNodeContents:vh,selectNodeContentsUsing:bh,relativeToNative:Rh,exactToNative:Th,deleteContents:Ah,cloneFragment:Dh,getFirstRect:kh,getBounds:Oh,isWithin:wh,toString:Nh},Ph=ha.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ih=function(t,e,n){return e(se.fromDom(n.startContainer),n.startOffset,se.fromDom(n.endContainer),n.endOffset)},Wh=function(t,e){return e.match({domRange:function(t){return{ltr:F.constant(t),rtl:V.none}},relative:function(e,n){return{ltr:Le.cached(function(){return Bh.relativeToNative(t,e,n)}),rtl:Le.cached(function(){return V.some(Bh.relativeToNative(t,n,e))})}},exact:function(e,n,r,o){return{ltr:Le.cached(function(){return Bh.exactToNative(t,e,n,r,o)}),rtl:Le.cached(function(){return V.some(Bh.exactToNative(t,r,o,e,n))})}}})},Mh=function(t,e){var n=e.ltr();if(n.collapsed){return e.rtl().filter(function(t){return!1===t.collapsed}).map(function(t){return Ph.rtl(se.fromDom(t.endContainer),t.endOffset,se.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return Ih(0,Ph.ltr,n)})}return Ih(0,Ph.ltr,n)},Lh=function(t,e){var n=Wh(t,e);return Mh(0,n)},Fh=function(t,e){return Lh(t,e).match({ltr:function(e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(e,n,r,o){var i=t.document.createRange();return i.setStart(r.dom(),o),i.setEnd(e.dom(),n),i}})},qh={ltr:Ph.ltr,rtl:Ph.rtl,diagnose:Lh,asLtrRange:Fh},Hh=function(t,e,n,r,o){if(0===o)return 0;if(e===r)return o-1;for(var i=r,u=1;u<o;u++){var a=t(u),c=Math.abs(e-a.left);if(n>a.bottom);else{if(n<a.top||c>i)return u-1;i=c}}return 0},jh=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},_h={inRect:jh,searchForPoint:Hh},zh=function(t,e,n,r,o){var i=function(n){var r=t.dom().createRange();return r.setStart(e.dom(),n),r.collapse(!0),r},u=function(t){return i(t).getBoundingClientRect()},a=Ii.get(e).length,c=_h.searchForPoint(u,n,r,o.right,a);return i(c)},Uh=function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getClientRects();return _l.findMap(i,function(t){return _h.inRect(t,n,r)?V.some(t):V.none()}).map(function(o){return zh(t,e,n,r,o)})},Vh={locate:Uh},Gh=function(t,e,n,r){var o=t.dom().createRange(),i=sr.children(e);return _l.findMap(i,function(e){return o.selectNode(e.dom()),_h.inRect(o.getBoundingClientRect(),n,r)?Yh(t,e,n,r):V.none()})},Yh=function(t,e,n,r){return(Cr.isText(e)?Vh.locate:Gh)(t,e,n,r)},Xh=function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,n)),a=Math.max(i.top,Math.min(i.bottom,r));return Yh(t,e,u,a)},Kh={locate:Xh},$h=function(t,e){return e-t.left<t.right-e},Jh=function(t,e,n){var r=t.dom().createRange();return r.selectNode(e.dom()),r.collapse(n),r},Qh=function(t,e,n){var r=t.dom().createRange();r.selectNode(e.dom());var o=r.getBoundingClientRect(),i=$h(o,n);return(!0===i?Vi.first:Vi.last)(e).map(function(e){return Jh(t,e,i)})},Zh=function(t,e,n){var r=e.dom().getBoundingClientRect(),o=$h(r,n);return V.some(Jh(t,e,o))},tv=function(t,e,n){return(0===sr.children(e).length?Zh:Qh)(t,e,n)},ev={search:tv},nv=function(t,e,n){return V.from(t.dom().caretPositionFromPoint(e,n)).bind(function(e){if(null===e.offsetNode)return V.none();var n=t.dom().createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),V.some(n)})},rv=function(t,e,n){return V.from(t.dom().caretRangeFromPoint(e,n))},ov=function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,n)),a=Math.max(i.top,Math.min(i.bottom,r));return Kh.locate(t,e,u,a)},iv=function(t,e,n){return se.fromPoint(t,e,n).bind(function(r){var o=function(){return ev.search(t,r,e)};return 0===sr.children(r).length?o():ov(t,r,e,n).orThunk(o)})},uv=document.caretPositionFromPoint?nv:document.caretRangeFromPoint?rv:iv,av=function(t,e,n){var r=se.fromDom(t.document);return uv(r,e,n).map(function(t){return sh.range(se.fromDom(t.startContainer),t.startOffset,se.fromDom(t.endContainer),t.endOffset)})},cv={fromPoint:av},lv=function(t,e,n,r){var o=Bh.create(t),i=be.is(e,r)?[e]:[],u=i.concat(Kr.descendants(e,r));return At.filter(u,function(t){return Bh.selectNodeContentsUsing(o,t),Bh.isWithin(n,o)})},sv=function(t,e,n){var r=qh.asLtrRange(t,e),o=se.fromDom(r.commonAncestorContainer);return Cr.isElement(o)?lv(t,o,r,n):[]},fv={find:sv},dv=function(t,e){var n=Cr.name(t);return"input"===n?oh.after(t):At.contains(["br","img"],n)?0===e?oh.before(t):oh.after(t):oh.on(t,e)},mv=function(t,e){var n=t.fold(oh.before,dv,oh.after),r=e.fold(oh.before,dv,oh.after);return sh.relative(n,r)},gv=function(t,e,n,r){var o=dv(t,e),i=dv(n,r);return sh.relative(o,i)},pv=function(t){return t.match({domRange:function(t){var e=se.fromDom(t.startContainer),n=se.fromDom(t.endContainer);return gv(e,t.startOffset,n,t.endOffset)},relative:mv,exact:gv})},hv={beforeSpecial:dv,preprocess:pv,preprocessRelative:mv,preprocessExact:gv},vv=function(t,e){V.from(t.getSelection()).each(function(t){t.removeAllRanges(),t.addRange(e)})},bv=function(t,e,n,r,o){var i=Bh.exactToNative(t,e,n,r,o);vv(t,i)},wv=function(t,e,n){return fv.find(t,e,n)},yv=function(t,e){return qh.diagnose(t,e).match({ltr:function(e,n,r,o){bv(t,e,n,r,o)},rtl:function(e,n,r,o){var i=t.getSelection();i.setBaseAndExtent?i.setBaseAndExtent(e.dom(),n,r.dom(),o):i.extend?(i.collapse(e.dom(),n),i.extend(r.dom(),o)):bv(t,r,o,e,n)}})},xv=function(t,e,n,r,o){var i=hv.preprocessExact(e,n,r,o);yv(t,i)},Cv=function(t,e,n){var r=hv.preprocessRelative(e,n);yv(t,r)},Sv=function(t){var e=sh.getWin(t).dom(),n=function(t,n,r,o){return Bh.exactToNative(e,t,n,r,o)},r=hv.preprocess(t);return qh.diagnose(e,r).match({ltr:n,rtl:n})},Rv=function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return V.some(sh.range(se.fromDom(e.startContainer),e.startOffset,se.fromDom(n.endContainer),n.endOffset))}return V.none()},Tv=function(t){var e=se.fromDom(t.anchorNode),n=se.fromDom(t.focusNode);return gh.after(e,t.anchorOffset,n,t.focusOffset)?V.some(sh.range(se.fromDom(t.anchorNode),t.anchorOffset,se.fromDom(t.focusNode),t.focusOffset)):Rv(t)},Av=function(t,e){var n=Bh.selectNodeContents(t,e);vv(t,n)},Dv=function(t,e){var n=Bh.selectNodeContents(t,e);return sh.range(se.fromDom(n.startContainer),n.startOffset,se.fromDom(n.endContainer),n.endOffset)},Ev=function(t){return V.from(t.getSelection()).filter(function(t){return t.rangeCount>0}).bind(Tv)},kv=function(t){return Ev(t).map(function(t){return sh.exact(t.start(),t.soffset(),t.finish(),t.foffset())})},Ov=function(t,e){var n=qh.asLtrRange(t,e);return Bh.getFirstRect(n)},Nv=function(t,e){var n=qh.asLtrRange(t,e);return Bh.getBounds(n)},Bv=function(t,e,n){return cv.fromPoint(t,e,n)},Pv=function(t,e){var n=qh.asLtrRange(t,e);return Bh.toString(n)},Iv=function(t){t.getSelection().removeAllRanges()},Wv=function(t,e){var n=qh.asLtrRange(t,e);return Bh.cloneFragment(n)},Mv=function(t,e,n){var r=qh.asLtrRange(t,e),o=hh.fromElements(n,t.document);Bh.replaceWith(r,o)},Lv=function(t,e){var n=qh.asLtrRange(t,e);Bh.deleteContents(n)},Fv=function(t,e,n,r){return zn.eq(t,n)&&e===r},qv={setExact:xv,getExact:Ev,get:kv,setRelative:Cv,toNative:Sv,setToElement:Av,clear:Iv,clone:Wv,replace:Mv,deleteAt:Lv,forElement:Dv,getFirstRect:Ov,getBounds:Nv,getAtPoint:Bv,findWithin:wv,getAsString:Pv,isCollapsed:Fv},Hv=tinymce.util.Tools.resolve("tinymce.util.VK"),jv=function(t,e,n,r){return Vv(t,e,th.next(n),r)},_v=function(t,e,n,r){return Vv(t,e,th.prev(n),r)},zv=function(t,e){var n=sh.exact(e,0,e,0);return qv.toNative(n)},Uv=function(t,e){var n=Kr.descendants(e,"tr");return At.last(n).bind(function(t){return lo.descendant(t,"td,th").map(function(t){
return zv(0,t)})})},Vv=function(t,e,n,r,o){return n.fold(V.none,V.none,function(t,e){return Vi.first(e).map(function(t){return zv(0,t)})},function(n){return Ro.table(n,e).bind(function(e){var o=ka.noMenu(n);return t.undoManager.transact(function(){r.insertRowsAfter(e,o)}),Uv(0,e)})})},Gv=["table","li","dl"],Yv=function(t,e,n,r){if(t.keyCode===Hv.TAB){var o=hm(e),i=function(t){var e=Cr.name(t);return zn.eq(t,o)||At.contains(Gv,e)},u=e.selection.getRng();if(u.collapsed){var a=se.fromDom(u.startContainer);Ro.cell(a,i).each(function(o){t.preventDefault(),(t.shiftKey?_v:jv)(e,i,o,n,r).each(function(t){e.selection.setRng(t)})})}}},Xv={handle:Yv},Kv=Ut.immutable("selection","kill"),$v={response:Kv},Jv=function(t){return function(e){return e===t}},Qv=Jv(38),Zv=Jv(40),tb=function(t){return t>=37&&t<=40},eb={ltr:{isBackward:Jv(37),isForward:Jv(39)},rtl:{isBackward:Jv(39),isForward:Jv(37)},isUp:Qv,isDown:Zv,isNavigation:tb},nb=function(t,e){var n=qh.asLtrRange(t,e);return{start:F.constant(se.fromDom(n.startContainer)),soffset:F.constant(n.startOffset),finish:F.constant(se.fromDom(n.endContainer)),foffset:F.constant(n.endOffset)}},rb=function(t,e,n,r){return{start:F.constant(oh.on(t,e)),finish:F.constant(oh.on(n,r))}},ob={convertToRange:nb,makeSitus:rb},ib=Wn.detect().browser.isSafari(),ub=function(t){var e=void 0!==t?t.dom():document,n=e.body.scrollLeft||e.documentElement.scrollLeft,r=e.body.scrollTop||e.documentElement.scrollTop;return Ec(n,r)},ab=function(t,e,n){(void 0!==n?n.dom():document).defaultView.scrollTo(t,e)},cb=function(t,e,n){(void 0!==n?n.dom():document).defaultView.scrollBy(t,e)},lb=function(t,e){var n=Ic.absolute(e),r=se.fromDom(t.document);ab(n.left(),n.top(),r)},sb=function(t,e){var n=ub(t);e();var r=ub(t);n.top()===r.top()&&n.left()===r.left()||ab(n.left(),n.top(),t)},fb=function(t){var e=V.none(),n=function(){e=V.some(ub(t))},r=function(){e.each(function(e){ab(e.left(),e.top(),t)})};return n(),{save:n,restore:r}},db=function(t,e){ib&&X.isFunction(t.dom().scrollIntoViewIfNeeded)?t.dom().scrollIntoViewIfNeeded(!1):t.dom().scrollIntoView(e)},mb=function(t,e){var n=e.dom().getBoundingClientRect(),r=t.dom().getBoundingClientRect();r.top<n.top?db(t,!0):r.bottom>n.bottom&&db(t,!1)},gb=function(){var t=se.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>');ui.after(Lr.body(),t);var e=t.dom().offsetWidth-t.dom().clientWidth;return pi.remove(t),e},pb={get:ub,to:ab,by:cb,preserve:sb,capture:fb,intoView:db,intoViewIfNeeded:mb,setToElement:lb,scrollBarWidth:gb},hb=function(t,e,n,r,o,i,u){return zn.eq(n,o)&&r===i?V.none():lo.closest(n,"td,th",e).bind(function(n){return lo.closest(o,"td,th",e).bind(function(r){return vb(t,e,n,r,u)})})},vb=function(t,e,n,r,o){return zn.eq(n,r)?V.none():la.identify(n,r,e).bind(function(e){var r=e.boxes().getOr([]);return r.length>0?(o(t,r,e.start(),e.finish()),V.some($v.response(V.some(ob.makeSitus(n,0,n,ji.getEnd(n))),!0))):V.none()})},bb=function(t,e,n,r,o){var i=function(t){return o.clear(n),o.selectRange(n,t.boxes(),t.start(),t.finish()),t.boxes()};return la.shiftSelection(r,t,e,o.firstSelectedSelector(),o.lastSelectedSelector()).map(i)},wb={sync:hb,detect:vb,update:bb},yb=Ut.immutableBag(["left","top","right","bottom"],[]),xb=function(t,e){return yb({left:t.left(),top:t.top()+e,right:t.right(),bottom:t.bottom()+e})},Cb=function(t,e){return yb({left:t.left(),top:t.top()-e,right:t.right(),bottom:t.bottom()-e})},Sb=function(t,e){var n=t.bottom()-t.top();return yb({left:t.left(),top:e-n,right:t.right(),bottom:e})},Rb=function(t,e){var n=t.bottom()-t.top();return yb({left:t.left(),top:e,right:t.right(),bottom:e+n})},Tb=function(t,e,n){return yb({left:t.left()+e,top:t.top()+n,right:t.right()+e,bottom:t.bottom()+n})},Ab=function(t){return t.top()},Db=function(t){return t.bottom()},Eb=function(t){return"("+t.left()+", "+t.top()+") -> ("+t.right()+", "+t.bottom()+")"},kb={nu:yb,moveUp:Cb,moveDown:xb,moveBottomTo:Sb,moveTopTo:Rb,getTop:Ab,getBottom:Db,translate:Tb,toString:Eb},Ob=function(t,e,n){return n>=0&&n<ji.getEnd(e)?t.getRangedRect(e,n,e,n+1):n>0?t.getRangedRect(e,n-1,e,n):V.none()},Nb=function(t){return kb.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},Bb=function(t,e){return V.some(t.getRect(e))},Pb=function(t,e,n){return Cr.isElement(e)?Bb(t,e).map(Nb):Cr.isText(e)?Ob(t,e,n).map(Nb):V.none()},Ib=function(t,e){return Cr.isElement(e)?Bb(t,e).map(Nb):Cr.isText(e)?t.getRangedRect(e,0,e,ji.getEnd(e)).map(Nb):V.none()},Wb={getBoxAt:Pb,getEntireBox:Ib},Mb=Ut.immutable("item","mode"),Lb=function(t,e,n,r){var o=void 0!==r?r:Fb;return t.property().parent(e).map(function(t){return Mb(t,o)})},Fb=function(t,e,n,r){var o=void 0!==r?r:qb;return n.sibling(t,e).map(function(t){return Mb(t,o)})},qb=function(t,e,n,r){var o=void 0!==r?r:qb,i=t.property().children(e);return n.first(i).map(function(t){return Mb(t,o)})},Hb=[{current:Lb,next:Fb,fallback:V.none()},{current:Fb,next:qb,fallback:V.some(Lb)},{current:qb,next:qb,fallback:V.some(Fb)}],jb=function(t,e,n,r,o){var o=void 0!==o?o:Hb;return At.find(o,function(t){return t.current===n}).bind(function(n){return n.current(t,e,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return jb(t,e,n,r)})})})},_b={backtrack:Lb,sidestep:Fb,advance:qb,go:jb},zb=function(){return{sibling:function(t,e){return t.query().prevSibling(e)},first:function(t){return t.length>0?V.some(t[t.length-1]):V.none()}}},Ub=function(){return{sibling:function(t,e){return t.query().nextSibling(e)},first:function(t){return t.length>0?V.some(t[0]):V.none()}}},Vb={left:zb,right:Ub},Gb=function(t,e,n,r,o,i){return _b.go(t,e,r,o).bind(function(e){return i(e.item())?V.none():n(e.item())?V.some(e.item()):Gb(t,e.item(),n,e.mode(),o,i)})},Yb=function(t,e,n,r){return Gb(t,e,n,_b.sidestep,Vb.left(),r)},Xb=function(t,e,n,r){return Gb(t,e,n,_b.sidestep,Vb.right(),r)},Kb={left:Yb,right:Xb},$b=function(t,e){return 0===t.property().children(e).length},Jb=function(t,e,n){return Zb(t,e,F.curry($b,t),n)},Qb=function(t,e,n){return tw(t,e,F.curry($b,t),n)},Zb=function(t,e,n,r){return Kb.left(t,e,n,r)},tw=function(t,e,n,r){return Kb.right(t,e,n,r)},ew=function(){return{left:Vb.left,right:Vb.right}},nw=function(t,e,n,r,o){return _b.go(t,e,n,r,o)},rw={before:Jb,after:Qb,seekLeft:Zb,seekRight:tw,walkers:ew,walk:nw,backtrack:_b.backtrack,sidestep:_b.sidestep,advance:_b.advance},ow=o(),iw=function(t,e,n){return rw.gather(ow,t,e,n)},uw=function(t,e){return rw.before(ow,t,e)},aw=function(t,e){return rw.after(ow,t,e)},cw=function(t,e,n){return rw.seekLeft(ow,t,e,n)},lw=function(t,e,n){return rw.seekRight(ow,t,e,n)},sw=function(){return rw.walkers()},fw=function(t,e,n,r){return rw.walk(ow,t,e,n,r)},dw={gather:iw,before:uw,after:aw,seekLeft:cw,seekRight:lw,walkers:sw,walk:fw},mw=ha.generate([{none:[]},{retry:["caret"]}]),gw=function(t,e){return t.left()<e.left()||Math.abs(e.right()-t.left())<1||t.left()>e.right()},pw=function(t,e,n){return no.closest(e,Ol.isBlock).fold(F.constant(!1),function(e){return Wb.getEntireBox(t,e).exists(function(t){return gw(n,t)})})},hw=function(t,e,n,r,o){var i=kb.moveDown(o,5);return Math.abs(n.bottom()-r.bottom())<1?mw.retry(i):n.top()>o.bottom()?mw.retry(i):n.top()===o.bottom()?mw.retry(kb.moveDown(o,1)):pw(t,e,o)?mw.retry(kb.translate(i,5,0)):mw.none()},vw=function(t,e,n,r,o){var i=kb.moveUp(o,5);return Math.abs(n.top()-r.top())<1?mw.retry(i):n.bottom()<o.top()?mw.retry(i):n.bottom()===o.top()?mw.retry(kb.moveUp(o,1)):pw(t,e,o)?mw.retry(kb.translate(i,5,0)):mw.none()},bw={point:kb.getTop,adjuster:vw,move:kb.moveUp,gather:dw.before},ww={point:kb.getBottom,adjuster:hw,move:kb.moveDown,gather:dw.after},yw=function(t,e,n){return t.elementFromPoint(e,n).filter(function(t){return"table"===Cr.name(t)}).isSome()},xw=function(t,e,n,r,o){return Cw(t,e,n,e.move(r,5),o)},Cw=function(t,e,n,r,o){return 0===o?V.some(r):yw(t,r.left(),e.point(r))?xw(t,e,n,r,o-1):t.situsFromPoint(r.left(),e.point(r)).bind(function(i){return i.start().fold(V.none,function(i,u){return Wb.getEntireBox(t,i,u).bind(function(u){return e.adjuster(t,i,u,n,r).fold(V.none,function(r){return Cw(t,e,n,r,o-1)})}).orThunk(function(){return V.some(r)})},V.none)})},Sw=function(t,e){return t.situsFromPoint(e.left(),e.bottom()+5)},Rw=function(t,e){return t.situsFromPoint(e.left(),e.top()-5)},Tw=function(t,e,n){return t.point(e)>n.getInnerHeight()?V.some(t.point(e)-n.getInnerHeight()):t.point(e)<0?V.some(-t.point(e)):V.none()},Aw=function(t,e,n){var r=t.move(n,5),o=Cw(e,t,n,r,100).getOr(r);return Tw(t,o,e).fold(function(){return e.situsFromPoint(o.left(),t.point(o))},function(n){return e.scrollBy(0,n),e.situsFromPoint(o.left(),t.point(o)-n)})},Dw={tryUp:F.curry(Aw,bw),tryDown:F.curry(Aw,ww),ieTryUp:Rw,ieTryDown:Sw,getJumpSize:F.constant(5)},Ew=ha.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),kw=function(t,e,n){var r=t.getRect(e),o=t.getRect(n);return o.right>r.left&&o.left<r.right},Ow=function(t,e,n,r,o,i,u){return lo.closest(r,"td,th",u).bind(function(n){return lo.closest(e,"td,th",u).map(function(e){return zn.eq(n,e)?zn.eq(r,n)&&ji.getEnd(n)===o?i(e):Ew.none("in same cell"):Mu.sharedOne(Nw,[n,e]).fold(function(){return kw(t,e,n)?Ew.success():i(e)},function(t){return i(e)})})}).getOr(Ew.none("default"))},Nw=function(t){return lo.closest(t,"tr")},Bw=function(t,e,n,r,o){return t.fold(e,n,r,o)},Pw={verify:Ow,cata:Bw,adt:Ew},Iw=Ut.immutable("element","offset"),Ww=Ut.immutable("element","deltaOffset"),Mw=Ut.immutable("element","start","finish"),Lw=Ut.immutable("begin","end"),Fw=Ut.immutable("element","text"),qw={point:Iw,delta:Ww,range:Mw,points:Lw,text:Fw},Hw=Ut.immutable("ancestor","descendants","element","index"),jw=Ut.immutable("parent","children","element","index"),_w=function(t,e){return no.closest(t,function(t){return sr.parent(t).exists(function(t){return zn.eq(t,e)})})},zw=function(t){return sr.parent(t).bind(function(e){var n=sr.children(e);return Uw(n,t).map(function(r){return jw(e,n,t,r)})})},Uw=function(t,e){return At.findIndex(t,F.curry(zn.eq,e))},Vw=function(t,e){return sr.parent(t).bind(function(n){var r=Kr.children(n,e);return Uw(r,t).map(function(e){return jw(n,r,t,e)})})},Gw=function(t,e,n){return lo.closest(t,e).bind(function(e){var r=Kr.descendants(e,n);return Uw(r,t).map(function(n){return Hw(e,r,t,n)})})},Yw={childOf:_w,indexOf:Uw,indexInParent:zw,selectorsInParent:Vw,descendantsInAncestor:Gw},Xw=function(t){return"br"===Cr.name(t)},Kw=function(t,e,n){return e(t,n).bind(function(t){return Cr.isText(t)&&0===Ii.get(t).trim().length?Kw(t,e,n):V.some(t)})},$w=function(t,e,n){return n.traverse(e).orThunk(function(){return Kw(e,n.gather,t)}).map(n.relative)},Jw=function(t,e){return sr.child(t,e).filter(Xw).orThunk(function(){return sr.child(t,e-1).filter(Xw)})},Qw=function(t,e,n,r){return Jw(e,n).bind(function(e){return r.traverse(e).fold(function(){return Kw(e,r.gather,t).map(r.relative)},function(t){return Yw.indexInParent(t).map(function(t){return oh.on(t.parent(),t.index())})})})},Zw=function(t,e,n,r){return(Xw(e)?$w(t,e,r):Qw(t,e,n,r)).map(function(t){return{start:F.constant(t),finish:F.constant(t)}})},ty=function(t){return Pw.cata(t,function(t){return V.none()},function(){return V.none()},function(t){return V.some(qw.point(t,0))},function(t){return V.some(qw.point(t,ji.getEnd(t)))})},ey={tryBr:Zw,process:ty},ny=Wn.detect(),ry=function(t,e,n){return t.getSelection().bind(function(r){return ey.tryBr(e,r.finish(),r.foffset(),n).fold(function(){return V.some(qw.point(r.finish(),r.foffset()))},function(o){var i=t.fromSitus(o),u=Pw.verify(t,r.finish(),r.foffset(),i.finish(),i.foffset(),n.failure,e);return ey.process(u)})})},oy=function(t,e,n,r,o,i){return 0===i?V.none():ay(t,e,n,r,o).bind(function(u){var a=t.fromSitus(u),c=Pw.verify(t,n,r,a.finish(),a.foffset(),o.failure,e);return Pw.cata(c,function(){return V.none()},function(){return V.some(u)},function(u){return zn.eq(n,u)&&0===r?iy(t,n,r,kb.moveUp,o):oy(t,e,u,0,o,i-1)},function(u){return zn.eq(n,u)&&r===ji.getEnd(u)?iy(t,n,r,kb.moveDown,o):oy(t,e,u,ji.getEnd(u),o,i-1)})})},iy=function(t,e,n,r,o){return Wb.getBoxAt(t,e,n).bind(function(e){return uy(t,o,r(e,Dw.getJumpSize()))})},uy=function(t,e,n){return ny.browser.isChrome()||ny.browser.isSafari()||ny.browser.isFirefox()||ny.browser.isEdge()?e.otherRetry(t,n):ny.browser.isIE()?e.ieRetry(t,n):V.none()},ay=function(t,e,n,r,o){return Wb.getBoxAt(t,n,r).bind(function(e){return uy(t,o,e)})},cy=function(t,e,n){return ry(t,e,n).bind(function(r){return oy(t,e,r.element(),r.offset(),n,20).map(t.fromSitus)})},ly={handle:cy},sy=function(t){return no.first(t).isSome()},fy=function(t,e,n){return no.ancestor(t,e,n).isSome()},dy=function(t,e,n){return no.closest(t,e,n).isSome()},my=function(t,e){return no.sibling(t,e).isSome()},gy=function(t,e){return no.child(t,e).isSome()},py=function(t,e){return no.descendant(t,e).isSome()},hy={any:sy,ancestor:fy,closest:dy,sibling:my,child:gy,descendant:py},vy=Wn.detect(),by=function(t,e){return hy.ancestor(t,function(t){return sr.parent(t).exists(function(t){return zn.eq(t,e)})})},wy=function(t,e,n,r,o){return lo.closest(r,"td,th",e).bind(function(r){return lo.closest(r,"table",e).bind(function(i){return by(o,i)?ly.handle(t,e,n).bind(function(t){return lo.closest(t.finish(),"td,th",e).map(function(e){return{start:F.constant(r),finish:F.constant(e),range:F.constant(t)}})}):V.none()})})},yy=function(t,e,n,r,o,i){return vy.browser.isIE()?V.none():i(r,e).orThunk(function(){return wy(t,e,n,r,o).map(function(t){var e=t.range();return $v.response(V.some(ob.makeSitus(e.start(),e.soffset(),e.finish(),e.foffset())),!0)})})},xy=function(t,e){return lo.closest(t,"tr",e).bind(function(t){return lo.closest(t,"table",e).bind(function(n){var r=Kr.descendants(n,"tr");return zn.eq(t,r[0])?dw.seekLeft(n,function(t){return Vi.last(t).isSome()},e).map(function(t){var e=ji.getEnd(t);return $v.response(V.some(ob.makeSitus(t,e,t,e)),!0)}):V.none()})})},Cy=function(t,e){return lo.closest(t,"tr",e).bind(function(t){return lo.closest(t,"table",e).bind(function(n){var r=Kr.descendants(n,"tr");return zn.eq(t,r[r.length-1])?dw.seekRight(n,function(t){return Vi.first(t).isSome()},e).map(function(t){return $v.response(V.some(ob.makeSitus(t,0,t,0)),!0)}):V.none()})})},Sy=function(t,e,n,r,o,i,u){return wy(t,n,r,o,i).bind(function(t){return wb.detect(e,n,t.start(),t.finish(),u)})},Ry={navigate:yy,select:Sy,firstUpCheck:xy,lastDownCheck:Cy},Ty=function(t,e){return lo.closest(t,"td,th",e)},Ay={down:{traverse:sr.nextSibling,gather:dw.after,relative:oh.before,otherRetry:Dw.tryDown,ieRetry:Dw.ieTryDown,failure:Pw.adt.failedDown},up:{traverse:sr.prevSibling,gather:dw.before,relative:oh.before,otherRetry:Dw.tryUp,ieRetry:Dw.ieTryUp,failure:Pw.adt.failedUp}},Dy=Ut.immutable("rows","cols"),Ey=function(t,e,n,r){var o=w(t),i=y(o,e,n,r);return{mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},ky=function(t,e,n,r){var o=w(t),i=function(){return r.clear(e),V.none()};return{keydown:function(t,u,a,c,l,s){var f=t.raw().which,d=!0===t.raw().shiftKey;return la.retrieve(e,r.selectedSelector()).fold(function(){return eb.isDown(f)&&d?F.curry(Ry.select,o,e,n,Ay.down,c,u,r.selectRange):eb.isUp(f)&&d?F.curry(Ry.select,o,e,n,Ay.up,c,u,r.selectRange):eb.isDown(f)?F.curry(Ry.navigate,o,n,Ay.down,c,u,Ry.lastDownCheck):eb.isUp(f)?F.curry(Ry.navigate,o,n,Ay.up,c,u,Ry.firstUpCheck):V.none},function(t){var n=function(n){return function(){return _l.findMap(n,function(n){return wb.update(n.rows(),n.cols(),e,t,r)}).fold(function(){return la.getEdges(e,r.firstSelectedSelector(),r.lastSelectedSelector()).map(function(t){var n=eb.isDown(f)||s.isForward(f)?oh.after:oh.before;return o.setRelativeSelection(oh.on(t.first(),0),n(t.table())),r.clear(e),$v.response(V.none(),!0)})},function(t){return V.some($v.response(V.none(),!0))})}};return eb.isDown(f)&&d?n([Dy(1,0)]):eb.isUp(f)&&d?n([Dy(-1,0)]):s.isBackward(f)&&d?n([Dy(0,-1),Dy(-1,0)]):s.isForward(f)&&d?n([Dy(0,1),Dy(1,0)]):eb.isNavigation(f)&&!1===d?i:V.none})()},keyup:function(t,o,i,u,a){return la.retrieve(e,r.selectedSelector()).fold(function(){var c=t.raw().which;return 0==(!0===t.raw().shiftKey)?V.none():eb.isNavigation(c)?wb.sync(e,n,o,i,u,a,r.selectRange):V.none()},V.none)}}},Oy={mouse:Ey,keyboard:ky},Ny=function(t,e){At.each(e,function(e){js.add(t,e)})},By=function(t,e){At.each(e,function(e){js.remove(t,e)})},Py=function(t,e){At.each(e,function(e){js.toggle(t,e)})},Iy=function(t,e){return At.forall(e,function(e){return js.has(t,e)})},Wy=function(t,e){return At.exists(e,function(e){return js.has(t,e)})},My=function(t){for(var e=t.dom().classList,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e.item(r);return n},Ly=function(t){return Is.supports(t)?My(t):Is.get(t)},Fy={add:Ny,remove:By,toggle:Py,hasAll:Iy,hasAny:Wy,get:Ly},qy=function(t){return function(e){js.add(e,t)}},Hy=function(t){return function(e){js.remove(e,t)}},jy=function(t){return function(e){Fy.remove(e,t)}},_y=function(t){return function(e){return js.has(e,t)}},zy={addClass:qy,removeClass:Hy,removeClasses:jy,hasClass:_y},Uy=function(t){var e=zy.addClass(t.selected()),n=zy.removeClasses([t.selected(),t.lastSelected(),t.firstSelected()]),r=function(e){var r=Kr.descendants(e,t.selectedSelector());At.each(r,n)};return{clear:r,selectRange:function(n,o,i,u){r(n),At.each(o,e),js.add(i,t.firstSelected()),js.add(u,t.lastSelected())},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},Vy=function(t){var e=function(e){Pr.remove(e,t.selected()),Pr.remove(e,t.firstSelected()),Pr.remove(e,t.lastSelected())},n=function(e){Pr.set(e,t.selected(),"1")},r=function(n){var r=Kr.descendants(n,t.selectedSelector());At.each(r,e)};return{clear:r,selectRange:function(e,o,i,u){r(e),At.each(o,n),Pr.set(i,t.firstSelected(),"1"),Pr.set(u,t.lastSelected(),"1")},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},Gy={byClass:Uy,byAttr:Vy},Yy=function(t){return{get:function(){var e=hm(t);return da.retrieve(e,ga.selectedSelector()).fold(function(){return void 0===t.selection.getStart()?wa.none():wa.single(t.selection)},function(t){return wa.multiple(t)})}}},Xy=rg.each,Ky=function(t){function e(e){return function(){t.execCommand(e)}}var n=[];Xy("inserttable tableprops deletetable | cell row column".split(" "),function(e){"|"===e?n.push({text:"-"}):n.push(t.menuItems[e])}),t.addButton("table",{type:"menubutton",title:"Table",menu:n}),t.addButton("tableprops",{title:"Table properties",onclick:F.curry(Gg.open,t,!0),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:e("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:e("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:e("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:e("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:e("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:e("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:e("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:e("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:e("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:e("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:e("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:e("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:e("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:e("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:e("mceTableDeleteCol")})},$y=function(t){var e=function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},n=Km(t);n.length>0&&t.addContextToolbar(e,n.join(" "))},Jy={addButtons:Ky,addToolbars:$y},Qy=function(t,e){function n(e){return function(){t.execCommand(e)}}var r=V.none(),o=[],i=[],u=[],a=[],c=function(t){t.disabled(!0)},l=function(t){t.disabled(!1)},s=function(){var t=this;o.push(t),r.fold(function(){c(t)},function(e){l(t)})},f=function(){var t=this;i.push(t),r.fold(function(){c(t)},function(e){l(t)})},d=function(){var t=this;u.push(t),r.fold(function(){c(t)},function(e){t.disabled(e.mergable().isNone())})},m=function(){var t=this;a.push(t),r.fold(function(){c(t)},function(e){t.disabled(e.unmergable().isNone())})},g=function(){r.fold(function(){At.each(o,c),At.each(i,c),At.each(u,c),At.each(a,c)},function(t){At.each(o,l),At.each(i,l),At.each(u,function(e){e.disabled(t.mergable().isNone())}),At.each(a,function(e){e.disabled(t.unmergable().isNone())})})};t.on("init",function(){t.on("nodechange",function(n){var o=V.from(t.dom.getParent(t.selection.getStart(),"th,td"));r=o.bind(function(t){var n=se.fromDom(t);return Ro.table(n).map(function(t){return ka.forMenu(e,t,n)})}),g()})});var p=function(t,e,n,r){var o,i,u,a,c,l=r.getEl().getElementsByTagName("table")[0],s=r.isRtl()||"tl-tr"===r.parent().rel;for(l.nextSibling.innerHTML=e+1+" x "+(n+1),s&&(e=9-e),i=0;i<10;i++)for(o=0;o<10;o++)a=l.rows[i].childNodes[o].firstChild,c=(s?o>=e:o<=e)&&i<=n,t.dom.toggleClass(a,"mce-active",c),c&&(u=a);return u.parentNode},h=!1===Hm(t)?{text:"Table",icon:"table",context:"table",onclick:F.curry(Gg.open,t)}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),Gg.open(t))},onshow:function(){p(t,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");t.dom.removeClass(e,"mce-active"),t.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:function(){var t="";t='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var e=0;e<10;e++){t+="<tr>";for(var n=0;n<10;n++)t+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*e+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+e+'"></a></td>';t+="</tr>"}return t+="</table>",t+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var n,r,o=e.target;"A"===o.tagName.toUpperCase()&&(n=parseInt(o.getAttribute("data-mce-x"),10),r=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(p(t,n,r,e.control),this.lastX=n,this.lastY=r))},onclick:function(e){var n=this;"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),n.parent().cancel(),t.undoManager.transact(function(){jg.insert(t,n.lastX+1,n.lastY+1)}),t.addVisual())}}]},v={text:"Table properties",context:"table",onPostRender:s,onclick:F.curry(Gg.open,t,!0)},b={text:"Delete table",context:"table",onPostRender:s,cmd:"mceTableDelete"},w={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:n("mceTableInsertRowBefore"),onPostRender:f},{text:"Insert row after",onclick:n("mceTableInsertRowAfter"),onPostRender:f},{text:"Delete row",onclick:n("mceTableDeleteRow"),onPostRender:f},{text:"Row properties",onclick:n("mceTableRowProps"),onPostRender:f},{text:"-"},{text:"Cut row",onclick:n("mceTableCutRow"),onPostRender:f},{text:"Copy row",onclick:n("mceTableCopyRow"),onPostRender:f},{text:"Paste row before",onclick:n("mceTablePasteRowBefore"),onPostRender:f},{text:"Paste row after",onclick:n("mceTablePasteRowAfter"),onPostRender:f}]},y={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:n("mceTableInsertColBefore"),onPostRender:f},{text:"Insert column after",onclick:n("mceTableInsertColAfter"),onPostRender:f},{text:"Delete column",onclick:n("mceTableDeleteCol"),onPostRender:f}]},x={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:n("mceTableCellProps"),onPostRender:f},{text:"Merge cells",onclick:n("mceTableMergeCells"),onPostRender:d},{text:"Split cell",onclick:n("mceTableSplitCells"),onPostRender:m}]};t.addMenuItem("inserttable",h),t.addMenuItem("tableprops",v),t.addMenuItem("deletetable",b),t.addMenuItem("row",w),t.addMenuItem("column",y),t.addMenuItem("cell",x)},Zy={addMenuItems:Qy},tx=function(t){return t.get().fold(function(){},function(t){return At.map(t,function(t){return t.dom()})})},ex=function(t,e){var n=At.map(t,se.fromDom);e.set(V.from(n))},nx=function(t,e){return{insertTable:function(e,n){return jg.insert(t,e,n)},setClipboardRows:function(t){return ex(t,e)},getClipboardRows:function(){return tx(e)}}};R.add("table",C)}()}();