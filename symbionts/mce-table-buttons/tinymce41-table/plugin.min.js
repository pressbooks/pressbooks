(function(b,g){var d={};function c(m,n){var l,j=[];for(var k=0;k<m.length;++k){l=d[m[k]]||e(m[k]);if(!l){throw"module definition dependecy not found: "+m[k]}j.push(l)}n.apply(null,j)}function h(k,j,i){if(typeof k!=="string"){throw"invalid module definition, module id must be defined and be a string"}if(j===g){throw"invalid module definition, dependencies must be specified"}if(i===g){throw"invalid module definition, definition function must be specified"}c(j,function(){d[k]=i.apply(null,arguments)})}function f(i){return !!d[i]}function e(l){var j=b;var i=l.split(/[.\/]/);for(var k=0;k<i.length;++k){if(!j[i[k]]){return}j=j[i[k]]}return j}function a(l){for(var k=0;k<l.length;k++){var m=b;var o=l[k];var j=o.split(/[.\/]/);for(var n=0;n<j.length-1;++n){if(m[j[n]]===g){m[j[n]]={}}m=m[j[n]]}m[j[j.length-1]]=d[o]}}h("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env"],function(k,j){var l=k.each;function i(n,m){return parseInt(n.getAttribute(m)||1,10)}return function(v,O){var n,N,S,J,w,R=v.selection,M=R.dom;function B(){var T=0;n=[];N=0;l(["thead","tbody","tfoot"],function(U){var V=M.select("> "+U+" tr",O);l(V,function(W,X){X+=T;l(M.select("> td, > th",W),function(ad,Y){var Z,aa,ab,ac;if(n[X]){while(n[X][Y]){Y++}}ab=i(ad,"rowspan");ac=i(ad,"colspan");for(aa=X;aa<X+ab;aa++){if(!n[aa]){n[aa]=[]}for(Z=Y;Z<Y+ac;Z++){n[aa][Z]={part:U,real:aa==X&&Z==Y,elm:ad,rowspan:ab,colspan:ac}}}N=Math.max(N,Y+1)})});T+=V.length})}function G(U,T){U=U.cloneNode(T);U.removeAttribute("id");return U}function F(T,V){var U;U=n[V];if(U){return U[T]}}function A(V,T,U){if(V){U=parseInt(U,10);if(U===1){V.removeAttribute(T,1)}else{V.setAttribute(T,U,1)}}}function p(T){return T&&(M.hasClass(T.elm,"mce-item-selected")||T==w)}function r(){var T=[];l(O.rows,function(U){l(U.cells,function(V){if(M.hasClass(V,"mce-item-selected")||(w&&V==w.elm)){T.push(U);return false}})});return T}function z(){var T=M.createRng();T.setStartAfter(O);T.setEndAfter(O);R.setRng(T);M.remove(O)}function m(T){var V,U={};if(v.settings.table_clone_elements!==false){U=k.makeMap((v.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)}k.walk(T,function(X){var W;if(X.nodeType==3){l(M.getParents(X.parentNode,null,T).reverse(),function(Y){if(!U[Y.nodeName]){return}Y=G(Y,false);if(!V){V=W=Y}else{if(W){W.appendChild(Y)}}W=Y});if(W){W.innerHTML=j.ie?"&nbsp;":'<br data-mce-bogus="1" />'}return false}},"childNodes");T=G(T,false);A(T,"rowSpan",1);A(T,"colSpan",1);if(V){T.appendChild(V)}else{if(!j.ie||j.ie>10){T.innerHTML='<br data-mce-bogus="1" />'}}return T}function y(){var T=M.createRng(),U;l(M.select("tr",O),function(V){if(V.cells.length===0){M.remove(V)}});if(M.select("tr",O).length===0){T.setStartBefore(O);T.setEndBefore(O);R.setRng(T);M.remove(O);return}l(M.select("thead,tbody,tfoot",O),function(V){if(V.rows.length===0){M.remove(V)}});B();if(S){U=n[Math.min(n.length-1,S.y)];if(U){R.select(U[Math.min(U.length-1,S.x)].elm,true);R.collapse(true)}}}function C(Z,X,ab,Y){var W,U,T,V,aa;W=n[X][Z].elm.parentNode;for(T=1;T<=ab;T++){W=M.getNext(W,"tr");if(W){for(U=Z;U>=0;U--){aa=n[X+T][U].elm;if(aa.parentNode==W){for(V=1;V<=Y;V++){M.insertAfter(m(aa),aa)}break}}if(U==-1){for(V=1;V<=Y;V++){W.insertBefore(m(W.cells[0]),W.cells[0])}}}}}function I(){l(n,function(T,U){l(T,function(W,V){var Z,Y,X;if(p(W)){W=W.elm;Z=i(W,"colspan");Y=i(W,"rowspan");if(Z>1||Y>1){A(W,"rowSpan",1);A(W,"colSpan",1);for(X=0;X<Z-1;X++){M.insertAfter(m(W),W)}C(V,U,Y-1,Z)}}})})}function x(ad,aa,ag){var Z,W,V,af,ae,ac,Y,ab,T,U,X;if(ad){Z=L(ad);W=Z.x;V=Z.y;af=W+(aa-1);ae=V+(ag-1)}else{S=J=null;l(n,function(ah,ai){l(ah,function(ak,aj){if(p(ak)){if(!S){S={x:aj,y:ai}}J={x:aj,y:ai}}})});if(S){W=S.x;V=S.y;af=J.x;ae=J.y}}ab=F(W,V);T=F(af,ae);if(ab&&T&&ab.part==T.part){I();B();ab=F(W,V).elm;A(ab,"colSpan",(af-W)+1);A(ab,"rowSpan",(ae-V)+1);for(Y=V;Y<=ae;Y++){for(ac=W;ac<=af;ac++){if(!n[Y]||!n[Y][ac]){continue}ad=n[Y][ac].elm;if(ad!=ab){U=k.grep(ad.childNodes);l(U,function(ah){ab.appendChild(ah)});if(U.length){U=k.grep(ab.childNodes);X=0;l(U,function(ah){if(ah.nodeName=="BR"&&M.getAttrib(ah,"data-mce-bogus")&&X++<U.length-1){ab.removeChild(ah)}})}M.remove(ad)}}}y()}}function s(X){var T,Z,W,Y,aa,ab,U,ac,V;l(n,function(ad,ae){l(ad,function(af){if(p(af)){af=af.elm;aa=af.parentNode;ab=G(aa,false);T=ae;if(X){return false}}});if(X){return !T}});if(T===g){return}for(Y=0;Y<n[0].length;Y++){if(!n[T][Y]){continue}Z=n[T][Y].elm;if(Z!=W){if(!X){V=i(Z,"rowspan");if(V>1){A(Z,"rowSpan",V+1);continue}}else{if(T>0&&n[T-1][Y]){ac=n[T-1][Y].elm;V=i(ac,"rowSpan");if(V>1){A(ac,"rowSpan",V+1);continue}}}U=m(Z);A(U,"colSpan",Z.colSpan);ab.appendChild(U);W=Z}}if(ab.hasChildNodes()){if(!X){M.insertAfter(ab,aa)}else{aa.parentNode.insertBefore(ab,aa)}}}function o(U){var V,T;l(n,function(W){l(W,function(Y,X){if(p(Y)){V=X;if(U){return false}}});if(U){return !V}});l(n,function(Z,aa){var W,X,Y;if(!Z[V]){return}W=Z[V].elm;if(W!=T){Y=i(W,"colspan");X=i(W,"rowspan");if(Y==1){if(!U){M.insertAfter(m(W),W);C(V,aa,X-1,Y)}else{W.parentNode.insertBefore(m(W),W);C(V,aa,X-1,Y)}}else{A(W,"colSpan",W.colSpan+1)}T=W}})}function u(){var T=[];l(n,function(U){l(U,function(W,V){if(p(W)&&k.inArray(T,V)===-1){l(n,function(Z){var X=Z[V].elm,Y;Y=i(X,"colSpan");if(Y>1){A(X,"colSpan",Y-1)}else{M.remove(X)}});T.push(V)}})});y()}function t(){var U;function T(W){var X,V;l(W.cells,function(Y){var Z=i(Y,"rowSpan");if(Z>1){A(Y,"rowSpan",Z-1);X=L(Y);C(X.x,X.y,1,1)}});X=L(W.cells[0]);l(n[X.y],function(Y){var Z;Y=Y.elm;if(Y!=V){Z=i(Y,"rowSpan");if(Z<=1){M.remove(Y)}else{A(Y,"rowSpan",Z-1)}V=Y}})}U=r();l(U.reverse(),function(V){T(V)});y()}function K(){var T=r();M.remove(T);y();return T}function Q(){var T=r();l(T,function(V,U){T[U]=G(V,true)});return T}function H(V,U){var W=r(),T=W[U?0:W.length-1],X=T.cells.length;if(!V){return}l(n,function(Z){var Y;X=0;l(Z,function(aa){if(aa.real){X+=aa.colspan}if(aa.elm.parentNode==T){Y=1}});if(Y){return false}});if(!U){V.reverse()}l(V,function(ab){var Z,aa=ab.cells.length,Y;for(Z=0;Z<aa;Z++){Y=ab.cells[Z];A(Y,"colSpan",1);A(Y,"rowSpan",1)}for(Z=aa;Z<X;Z++){ab.appendChild(m(ab.cells[aa-1]))}for(Z=X;Z<aa;Z++){M.remove(ab.cells[Z])}if(U){T.parentNode.insertBefore(ab,T)}else{M.insertAfter(ab,T)}});M.removeClass(M.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected")}function L(T){var U;l(n,function(V,W){l(V,function(Y,X){if(Y.elm==T){U={x:X,y:W};return false}});return !U});return U}function E(T){S=L(T)}function P(){var U,T;U=T=0;l(n,function(V,W){l(V,function(Y,X){var aa,Z;if(p(Y)){Y=n[W][X];if(X>U){U=X}if(W>T){T=W}if(Y.real){aa=Y.colspan-1;Z=Y.rowspan-1;if(aa){if(X+aa>U){U=X+aa}}if(Z){if(W+Z>T){T=W+Z}}}}})});return{x:U,y:T}}function D(ab){var W,V,ad,ac,U,T,X,Y,aa,Z;J=L(ab);if(S&&J){W=Math.min(S.x,J.x);V=Math.min(S.y,J.y);ad=Math.max(S.x,J.x);ac=Math.max(S.y,J.y);U=ad;T=ac;for(Z=V;Z<=T;Z++){ab=n[Z][W];if(!ab.real){if(W-(ab.colspan-1)<W){W-=ab.colspan-1}}}for(aa=W;aa<=U;aa++){ab=n[V][aa];if(!ab.real){if(V-(ab.rowspan-1)<V){V-=ab.rowspan-1}}}for(Z=V;Z<=ac;Z++){for(aa=W;aa<=ad;aa++){ab=n[Z][aa];if(ab.real){X=ab.colspan-1;Y=ab.rowspan-1;if(X){if(aa+X>U){U=aa+X}}if(Y){if(Z+Y>T){T=Z+Y}}}}}M.removeClass(M.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected");for(Z=V;Z<=T;Z++){for(aa=W;aa<=U;aa++){if(n[Z][aa]){M.addClass(n[Z][aa].elm,"mce-item-selected")}}}}}function q(V,X){var W,U,T;W=L(V);U=W.y*N+W.x;do{U+=X;T=F(U%N,Math.floor(U/N));if(!T){break}if(T.elm!=V){R.select(T.elm,true);if(M.isEmpty(T.elm)){R.collapse(true)}return true}}while(T.elm==V);return false}O=O||M.getParent(R.getStart(),"table");B();w=M.getParent(R.getStart(),"th,td");if(w){S=L(w);J=P();w=F(S.x,S.y)}k.extend(this,{deleteTable:z,split:I,merge:x,insertRow:s,insertCol:o,deleteCols:u,deleteRows:t,cutRows:K,copyRows:Q,pasteRows:H,getPos:L,setStartCell:E,setEndCell:D,moveRelIdx:q,refresh:B})}});h("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools"],function(m,j,k){var l=k.each;function i(o,n){return parseInt(o.getAttribute(n)||1,10)}return function(r){function s(){function t(C){var I=C.keyCode;function A(R,N){var M=R?"previousSibling":"nextSibling";var S=r.dom.getParent(N,"tr");var Q=S[M];if(Q){E(r,N,Q,R);C.preventDefault();return true}else{var T=r.dom.getParent(S,"table");var P=S.parentNode;var L=P.nodeName.toLowerCase();if(L==="tbody"||L===(R?"tfoot":"thead")){var O=v(R,T,P,"tbody");if(O!==null){return x(R,O,N)}}return H(R,S,M,T)}}function v(P,N,O,R){var M=r.dom.select(">"+R,N);var L=M.indexOf(O);if(P&&L===0||!P&&L===M.length-1){return y(P,N)}else{if(L===-1){var Q=O.tagName.toLowerCase()==="thead"?0:M.length-1;return M[Q]}else{return M[L+(P?-1:1)]}}}function y(O,N){var M=O?"thead":"tfoot";var L=r.dom.select(">"+M,N);return L.length!==0?L[0]:null}function x(O,N,M){var L=u(N,O);if(L){E(r,M,L,O)}C.preventDefault();return true}function H(R,O,L,Q){var M=Q[L];if(M){G(M);return true}else{var P=r.dom.getParent(Q,"td,th");if(P){return A(R,P,C)}else{var N=u(O,!R);G(N);C.preventDefault();return false}}}function u(M,L){var N=M&&M[L?"lastChild":"firstChild"];return N&&N.nodeName==="BR"?r.dom.getParent(N,"td,th"):N}function G(L){r.selection.setCursorLocation(L,0)}function D(){return I==m.UP||I==m.DOWN}function F(M){var N=M.selection.getNode();var L=M.dom.getParent(N,"tr");return L!==null}function B(M){var L=0;var N=M;while(N.previousSibling){N=N.previousSibling;L=L+i(N,"colspan")}return L}function w(N,L){var O=0,M=0;l(N.children,function(P,Q){O=O+i(P,"colspan");M=Q;if(O>L){return false}});return M}function E(N,Q,S,P){var R=B(r.dom.getParent(Q,"td,th"));var M=w(S,R);var L=S.childNodes[M];var O=u(L,P);G(O||L)}function K(L){var N=r.selection.getNode();var O=r.dom.getParent(N,"td,th");var M=r.dom.getParent(L,"td,th");return O&&O!==M&&z(O,M)}function z(M,L){return r.dom.getParent(M,"TABLE")===r.dom.getParent(L,"TABLE")}if(D()&&F(r)){var J=r.selection.getNode();setTimeout(function(){if(K(J)){A(!C.shiftKey&&I===m.UP,J,C)}},0)}}r.on("KeyDown",function(u){t(u)})}function n(){function t(v,w){var x=w.ownerDocument,u=x.createRange(),y;u.setStartBefore(w);u.setEnd(v.endContainer,v.endOffset);y=x.createElement("body");y.appendChild(u.cloneContents());return y.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length===0}r.on("KeyDown",function(w){var u,v,x=r.dom;if(w.keyCode==37||w.keyCode==38){u=r.selection.getRng();v=x.getParent(u.startContainer,"table");if(v&&r.getBody().firstChild==v){if(t(u,v)){u=x.createRng();u.setStartBefore(v);u.setEndBefore(v);r.selection.setRng(u);w.preventDefault()}}}})}function p(){r.on("KeyDown SetContent VisualAid",function(){var t;for(t=r.getBody().lastChild;t;t=t.previousSibling){if(t.nodeType==3){if(t.nodeValue.length>0){break}}else{if(t.nodeType==1&&(t.tagName=="BR"||!t.getAttribute("data-mce-bogus"))){break}}}if(t&&t.nodeName=="TABLE"){if(r.settings.forced_root_block){r.dom.add(r.getBody(),r.settings.forced_root_block,r.settings.forced_root_block_attrs,j.ie&&j.ie<11?"&nbsp;":'<br data-mce-bogus="1" />')}else{r.dom.add(r.getBody(),"br",{"data-mce-bogus":"1"})}}});r.on("PreProcess",function(u){var t=u.node.lastChild;if(t&&(t.nodeName=="BR"||(t.childNodes.length==1&&(t.firstChild.nodeName=="BR"||t.firstChild.nodeValue=="\u00a0")))&&t.previousSibling&&t.previousSibling.nodeName=="TABLE"){r.dom.remove(t)}})}function o(){function t(A,w,x,C){var y=3,D=A.dom.getParent(w.startContainer,"TABLE");var z,v,B;if(D){z=D.parentNode}v=w.startContainer.nodeType==y&&w.startOffset===0&&w.endOffset===0&&C&&(x.nodeName=="TR"||x==z);B=(x.nodeName=="TD"||x.nodeName=="TH")&&!C;return v||B}function u(){var w=r.selection.getRng();var y=r.selection.getNode();var x=r.dom.getParent(w.startContainer,"TD,TH");if(!t(r,w,y,x)){return}if(!x){x=y}var v=x.lastChild;while(v.lastChild){v=v.lastChild}if(v.nodeType==3){w.setEnd(v,v.data.length);r.selection.setRng(w)}}r.on("KeyDown",function(){u()});r.on("MouseDown",function(v){if(v.button!=2){u()}})}function q(){r.on("keydown",function(w){if((w.keyCode==m.DELETE||w.keyCode==m.BACKSPACE)&&!w.isDefaultPrevented()){var v=r.dom.getParent(r.selection.getStart(),"table");if(v){var t=r.dom.select("td,th",v),u=t.length;while(u--){if(!r.dom.hasClass(t[u],"mce-item-selected")){return}}w.preventDefault();r.execCommand("mceTableDelete")}}})}q();if(j.webkit){s();o()}if(j.gecko){n();p()}if(j.ie>10){n();p()}}});h("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(j,k,i){return function(p){var n=p.dom,s,r,m,t=true,q;function o(u){p.getBody().style.webkitUserSelect="";if(u||t){p.dom.removeClass(p.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected");t=false}}function l(y){var w,v,x=y.target;if(q){return}if(r&&(s||x!=r)&&(x.nodeName=="TD"||x.nodeName=="TH")){v=n.getParent(x,"table");if(v==m){if(!s){s=new j(p,v);s.setStartCell(r);p.getBody().style.webkitUserSelect="none"}s.setEndCell(x);t=true}w=p.selection.getSel();try{if(w.removeAllRanges){w.removeAllRanges()}else{w.empty()}}catch(u){}y.preventDefault()}}p.on("MouseDown",function(u){if(u.button!=2&&!q){o();r=n.getParent(u.target,"td,th");m=n.getParent(r,"table")}});p.on("mouseover",l);p.on("remove",function(){n.unbind(p.getDoc(),"mouseover",l)});p.on("MouseUp",function(){var v,z=p.selection,u,A,y,x;function w(B,D){var C=new k(B,B);do{if(B.nodeType==3&&i.trim(B.nodeValue).length!==0){if(D){v.setStart(B,0)}else{v.setEnd(B,B.nodeValue.length)}return}if(B.nodeName=="BR"){if(D){v.setStartBefore(B)}else{v.setEndBefore(B)}return}}while((B=(D?C.next():C.prev())))}if(r){if(s){p.getBody().style.webkitUserSelect=""}u=n.select("td.mce-item-selected,th.mce-item-selected");if(u.length>0){v=n.createRng();y=u[0];v.setStartBefore(y);v.setEndAfter(y);w(y,1);A=new k(y,n.getParent(u[0],"table"));do{if(y.nodeName=="TD"||y.nodeName=="TH"){if(!n.hasClass(y,"mce-item-selected")){break}x=y}}while((y=A.next()));w(x);z.setRng(v)}p.nodeChanged();r=s=m=null}});p.on("KeyUp Drop SetContent",function(u){o(u.type=="setcontent");r=s=m=null;q=false});p.on("ObjectResizeStart ObjectResized",function(u){q=u.type!="objectresized"});return{clear:o}}});h("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(j,i){var k=j.each;return function(n){var v=this;function q(){var w=n.settings.color_picker_callback;if(w){return function(){var x=this;w.call(n,function(y){x.value(y).fire("change")},x.value())}}}function s(w){return{title:"Advanced",type:"form",defaults:{onchange:function(){u(w,this.parents().reverse()[0],this.name()=="style")}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:q()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:q()}]}]}}function m(w){return w?w.replace(/px$/,""):""}function t(w){if(/^[0-9]+$/.test(w)){w+="px"}return w}function r(w){k("left center right".split(" "),function(x){n.formatter.remove("align"+x,{},w)})}function o(w){k("top middle bottom".split(" "),function(x){n.formatter.remove("valign"+x,{},w)})}function p(y,w,z){function x(B,A){A=A||[];j.each(B,function(D){var C={text:D.text||D.title};if(D.menu){C.menu=x(D.menu)}else{C.value=D.value;if(w){w(C)}}A.push(C)});return A}return x(y,z||[])}function u(A,z,w){var y=z.toJSON();var x=A.parseStyle(y.style);if(w){z.find("#borderColor").value(x["border-color"]||"")[0].fire("change");z.find("#backgroundColor").value(x["background-color"]||"")[0].fire("change")}else{x["border-color"]=y.borderColor;x["background-color"]=y.backgroundColor}z.find("#style").value(A.serializeStyle(A.parseStyle(A.serializeStyle(x))))}function l(y,x,z){var w=y.parseStyle(y.getAttrib(z,"style"));if(w["border-color"]){x.borderColor=w["border-color"]}if(w["background-color"]){x.backgroundColor=w["background-color"]}x.style=y.serializeStyle(w)}v.tableProps=function(){v.table(true)};v.table=function(A){var y=n.dom,D,E,C,x,z={},F;function G(){var H;u(y,this);z=j.extend(z,this.toJSON());j.each("backgroundColor borderColor".split(" "),function(I){delete z[I]});if(z["extra-class"]!==false){z["class"]+=" "+z["extra-class"]}if(z["class"]===false){delete z["class"]}n.undoManager.transact(function(){if(!D){D=n.plugins.table.insertTable(z.cols||1,z.rows||1)}n.dom.setAttribs(D,{cellspacing:z.cellspacing,cellpadding:z.cellpadding,border:z.border,style:z.style,"class":z["class"]});if(y.getAttrib(D,"width")){y.setAttrib(D,"width",m(z.width))}else{y.setStyle(D,"width",t(z.width))}y.setStyle(D,"height",t(z.height));H=y.select("caption",D)[0];if(H&&!z.caption){y.remove(H)}if(!H&&z.caption){H=y.create("caption");H.innerHTML=!i.ie?'<br data-mce-bogus="1"/>':"\u00a0";D.insertBefore(H,D.firstChild)}r(D);if(z.align){n.formatter.apply("align"+z.align,{},D)}n.focus();n.addVisual()})}if(A===true){D=y.getParent(n.selection.getStart(),"table");if(D){var B=y.getAttrib(D,"class");var w=B.split(" ");z={width:m(y.getStyle(D,"width")||y.getAttrib(D,"width")),height:m(y.getStyle(D,"height")||y.getAttrib(D,"height")),cellspacing:D?y.getAttrib(D,"cellspacing"):"",cellpadding:D?y.getAttrib(D,"cellpadding"):"",border:D?y.getAttrib(D,"border"):"",caption:!!y.select("caption",D)[0],"class":w[0],"extra-class":w[1],};k("left center right".split(" "),function(H){if(n.formatter.matchNode(D,"align"+H)){z.align=H}})}}else{E={label:"Cols",name:"cols"};C={label:"Rows",name:"rows"}}if(n.settings.table_class_list){if(z["class"]){z["class"]=z["class"].replace(/\s*mce\-item\-table\s*/g,"")}if(z["extra-class"]){z["extra-class"]=z["extra-class"].replace(/\s*mce\-item\-table\s*/g,"")}x={name:"class",type:"listbox",label:"Table type",values:p(n.settings.table_class_list,function(H){if(H.value){H.textStyle=function(){return n.formatter.getCssText({block:"table",classes:[H.value]})}}})}}F={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:false,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[E,C,{label:"Caption",name:"caption",type:"checkbox"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},x,{label:"Custom class",name:"extra-class",type:"textbox",}]};if(n.settings.table_advtab!==false){l(y,z,D);n.windowManager.open({title:"Table properties",data:z,bodyType:"tabpanel",body:[{title:"General",type:"form",items:F},s(y)],onsubmit:G})}else{n.windowManager.open({title:"Table properties",data:z,body:F,onsubmit:G})}};v.merge=function(x,w){n.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var y=this.toJSON();n.undoManager.transact(function(){x.merge(w,y.cols,y.rows)})}})};v.cell=function(){var C=n.dom,y,B,z,w=[];function A(){u(C,this);B=j.extend(B,this.toJSON());n.undoManager.transact(function(){k(w,function(D){n.dom.setAttribs(D,{scope:B.scope,style:B.style,"class":B["class"]});n.dom.setStyles(D,{width:t(B.width),height:t(B.height)});if(B.type&&D.nodeName.toLowerCase()!=B.type){D=C.rename(D,B.type)}r(D);if(B.align){n.formatter.apply("align"+B.align,{},D)}o(D);if(B.valign){n.formatter.apply("valign"+B.valign,{},D)}});n.focus()})}w=n.dom.select("td.mce-item-selected,th.mce-item-selected");y=n.dom.getParent(n.selection.getStart(),"td,th");if(!w.length&&y){w.push(y)}y=y||w[0];if(!y){return}B={width:m(C.getStyle(y,"width")||C.getAttrib(y,"width")),height:m(C.getStyle(y,"height")||C.getAttrib(y,"height")),scope:C.getAttrib(y,"scope"),"class":C.getAttrib(y,"class")};B.type=y.nodeName.toLowerCase();k("left center right".split(" "),function(D){if(n.formatter.matchNode(y,"align"+D)){B.align=D}});k("top middle bottom".split(" "),function(D){if(n.formatter.matchNode(y,"valign"+D)){B.valign=D}});if(n.settings.table_cell_class_list){z={name:"class",type:"listbox",label:"Cell style",minWidth:90,maxWidth:null,values:p(n.settings.table_cell_class_list,function(D){if(D.value){D.textStyle=function(){return n.formatter.getCssText({block:"td",classes:[D.value]})}}})}}var x={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:false,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},z,{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},]};if(n.settings.table_cell_advtab!==false){l(C,B,y);n.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:B,body:[{title:"General",type:"form",items:x},s(C)],onsubmit:A})}else{n.windowManager.open({title:"Cell properties",data:B,body:x,onsubmit:A})}};v.row=function(){var y=n.dom,B,C,D,w,z,E=[],x;function A(){var F,G,H;u(y,this);z=j.extend(z,this.toJSON());n.undoManager.transact(function(){var I=z.type;k(E,function(J){n.dom.setAttribs(J,{scope:z.scope,style:z.style,"class":z["class"]});n.dom.setStyles(J,{height:t(z.height)});if(I!=J.parentNode.nodeName.toLowerCase()){F=y.getParent(J,"table");G=J.parentNode;H=y.select(I,F)[0];if(!H){H=y.create(I);if(F.firstChild){F.insertBefore(H,F.firstChild)}else{F.appendChild(H)}}H.appendChild(J);if(!G.hasChildNodes()){y.remove(G)}}r(J);if(z.align){n.formatter.apply("align"+z.align,{},J)}});n.focus()})}B=n.dom.getParent(n.selection.getStart(),"table");C=n.dom.getParent(n.selection.getStart(),"td,th");k(B.rows,function(F){k(F.cells,function(G){if(y.hasClass(G,"mce-item-selected")||G==C){E.push(F);return false}})});D=E[0];if(!D){return}z={height:m(y.getStyle(D,"height")||y.getAttrib(D,"height")),scope:y.getAttrib(D,"scope"),"class":y.getAttrib(D,"class")};z.type=D.parentNode.nodeName.toLowerCase();k("left center right".split(" "),function(F){if(n.formatter.matchNode(D,"align"+F)){z.align=F}});if(n.settings.table_row_class_list){w={name:"class",type:"listbox",label:"Row style",values:p(n.settings.table_row_class_list,function(F){if(F.value){F.textStyle=function(){return n.formatter.getCssText({block:"tr",classes:[F.value]})}}})}}x={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},w,{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"}]};if(n.settings.table_row_advtab!==false){l(y,z,D);n.windowManager.open({title:"Row properties",data:z,bodyType:"tabpanel",body:[{title:"General",type:"form",items:x},s(y)],onsubmit:A})}else{n.windowManager.open({title:"Row properties",data:z,body:x,onsubmit:A})}}}});h("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(q,p,r,n,i,o,k,j){var m=i.each;function l(A){var B,D=this,u=new n(A);function w(E){return function(){A.execCommand(E)}}function x(I,H){var J,E,G,F;G='<table id="__mce"><tbody>';for(J=0;J<H;J++){G+="<tr>";for(E=0;E<I;E++){G+="<td>"+(k.ie?" ":"<br>")+"</td>"}G+="</tr>"}G+="</tbody></table>";A.undoManager.transact(function(){A.insertContent(G);F=A.dom.get("__mce");A.dom.setAttrib(F,"id",null);A.dom.setAttribs(F,A.settings.table_default_attributes||{});A.dom.setStyles(F,A.settings.table_default_styles||{})});return F}function v(F,E){function G(){F.disabled(!A.dom.getParent(A.selection.getStart(),E));A.selection.selectorChanged(E,function(H){F.disabled(!H)})}if(A.initialized){G()}else{A.on("init",G)}}function z(){v(this,"table")}function y(){v(this,"td,th")}function C(){var F="";F='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var G=0;G<10;G++){F+="<tr>";for(var E=0;E<10;E++){F+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(G*10+E)+'" href="#" data-mce-x="'+E+'" data-mce-y="'+G+'"></a></td>'}F+="</tr>"}F+="</table>";F+='<div class="mce-text-center" role="presentation">1 x 1</div>';return F}function t(H,F,G){var M=G.getEl().getElementsByTagName("table")[0];var K,J,N,L,E;var I=G.isRtl()||G.parent().rel=="tl-tr";M.nextSibling.innerHTML=(H+1)+" x "+(F+1);if(I){H=9-H}for(J=0;J<10;J++){for(K=0;K<10;K++){L=M.rows[J].childNodes[K].firstChild;E=(I?K>=H:K<=H)&&J<=F;A.dom.toggleClass(L,"mce-active",E);if(E){N=L}}}return N.parentNode}if(A.settings.table_grid===false){A.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:u.table})}else{A.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:true,onclick:function(E){if(E.aria){this.parent().hideAll();E.stopImmediatePropagation();u.table()}},onshow:function(){t(0,0,this.menu.items()[0])},onhide:function(){var E=this.menu.items()[0].getEl().getElementsByTagName("a");A.dom.removeClass(E,"mce-active");A.dom.addClass(E[0],"mce-active")},menu:[{type:"container",html:C(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(G){var F=G.target,E,H;if(F.tagName.toUpperCase()=="A"){E=parseInt(F.getAttribute("data-mce-x"),10);H=parseInt(F.getAttribute("data-mce-y"),10);if(this.isRtl()||this.parent().rel=="tl-tr"){E=9-E}if(E!==this.lastX||H!==this.lastY){t(E,H,G.control);this.lastX=E;this.lastY=H}}},onclick:function(F){var E=this;if(F.target.tagName.toUpperCase()=="A"){F.preventDefault();F.stopPropagation();E.parent().cancel();A.undoManager.transact(function(){x(E.lastX+1,E.lastY+1)});A.addVisual()}}}]})}A.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:z,onclick:u.tableProps});A.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:z,cmd:"mceTableDelete"});A.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:w("mceTableCellProps"),onPostRender:y},{text:"Merge cells",onclick:w("mceTableMergeCells"),onPostRender:y},{text:"Split cell",onclick:w("mceTableSplitCells"),onPostRender:y}]});A.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:w("mceTableInsertRowBefore"),onPostRender:y},{text:"Insert row after",onclick:w("mceTableInsertRowAfter"),onPostRender:y},{text:"Delete row",onclick:w("mceTableDeleteRow"),onPostRender:y},{text:"Row properties",onclick:w("mceTableRowProps"),onPostRender:y},{text:"-"},{text:"Cut row",onclick:w("mceTableCutRow"),onPostRender:y},{text:"Copy row",onclick:w("mceTableCopyRow"),onPostRender:y},{text:"Paste row before",onclick:w("mceTablePasteRowBefore"),onPostRender:y},{text:"Paste row after",onclick:w("mceTablePasteRowAfter"),onPostRender:y}]});A.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:w("mceTableInsertColBefore"),onPostRender:y},{text:"Insert column after",onclick:w("mceTableInsertColAfter"),onPostRender:y},{text:"Delete column",onclick:w("mceTableDeleteCol"),onPostRender:y}]});var s=[];m("inserttable tableprops deletetable | cell row column".split(" "),function(E){if(E=="|"){s.push({text:"-"})}else{s.push(A.menuItems[E])}});A.addButton("table",{type:"menubutton",title:"Table",menu:s});if(!k.isIE){A.on("click",function(E){E=E.target;if(E.nodeName==="TABLE"){A.selection.select(E);A.nodeChanged()}})}D.quirks=new p(A);A.on("Init",function(){D.cellSelection=new r(A)});m({mceTableSplitCells:function(E){E.split()},mceTableMergeCells:function(F){var E;E=A.dom.getParent(A.selection.getStart(),"th,td");if(!A.dom.select("td.mce-item-selected,th.mce-item-selected").length){u.merge(F,E)}else{F.merge()}},mceTableInsertRowBefore:function(E){E.insertRow(true)},mceTableInsertRowAfter:function(E){E.insertRow()},mceTableInsertColBefore:function(E){E.insertCol(true)},mceTableInsertColAfter:function(E){E.insertCol()},mceTableDeleteCol:function(E){E.deleteCols()},mceTableDeleteRow:function(E){E.deleteRows()},mceTableCutRow:function(E){B=E.cutRows()},mceTableCopyRow:function(E){B=E.copyRows()},mceTablePasteRowBefore:function(E){E.pasteRows(B,true)},mceTablePasteRowAfter:function(E){E.pasteRows(B)},mceTableDelete:function(E){E.deleteTable()}},function(F,E){A.addCommand(E,function(){var G=new q(A);if(G){F(G);A.execCommand("mceRepaint");D.cellSelection.clear()}})});m({mceInsertTable:u.table,mceTableProps:function(){u.table(true)},mceTableRowProps:u.row,mceTableCellProps:u.cell},function(F,E){A.addCommand(E,function(G,H){F(H)})});if(A.settings.table_tab_navigation!==false){A.on("keydown",function(G){var F,E,H;if(G.keyCode==9){F=A.dom.getParent(A.selection.getStart(),"th,td");if(F){G.preventDefault();E=new q(A);H=G.shiftKey?-1:1;A.undoManager.transact(function(){if(!E.moveRelIdx(F,H)&&H>0){E.insertRow();E.refresh();E.moveRelIdx(F,H)}})}}})}D.insertTable=x}j.add("table",l)})})(this);