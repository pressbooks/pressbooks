!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=4)}({4:function(e,n,t){e.exports=t("dvui")},ZDLt:function(e,n,t){"use strict";var r=function(e){return e>9?e:"0".concat(e)};n.a=function(e){var n=document.getElementById("pb-sse-seconds"),t=document.getElementById("pb-sse-minutes"),o=0;t.textContent="00:",n.textContent="00",setInterval(function(){n.textContent=r(++o%60),t.textContent=r(parseInt(o/60,10))+":"},1e3)}},dvui:function(e,n,t){"use strict";t.r(n);var r=t("ZDLt");jQuery(function(e){e(document).ready(function(){var n;e(".front-background-image-upload-button").click(function(t){t.preventDefault(),n||(n=wp.media.frames.file_frame=wp.media({multiple:!1})).on("select",function(){var t=n.state().get("selection").first().toJSON();e("#front_background_image").val(t.url),e(".front-background-image").attr("src",t.url),e(".front-background-image-preview-wrap").removeClass("hidden"),e(".front-background-image-upload-button, .front-background-image-description").addClass("hidden")}),n.open()})}),e(".delete-front-background-image").on("click",function(){e("#front_background_image").val(""),e(".front-background-image-preview-wrap").addClass("hidden"),e(".front-background-image-upload-button, .front-background-image-description").removeClass("hidden")});var n=e("#ppi"),t=e("#custom_ppi");""!==n.val()&&t.parent().parent().hide(),n.on("change",function(){""===e(this).val()?t.parent().parent().show():(t.parent().parent().hide(),t.val(e(this).val()))}),e(".colorpicker").wpColorPicker();var o=e(".settings-form"),a=e("#generate-pdf"),i=e("#generate-jpg"),u=e("#pb-sse-progressbar"),c=e("#pb-sse-info"),d=function(n){var t=e("form."+n),r=PB_CoverGeneratorToken.ajaxUrl+(PB_CoverGeneratorToken.ajaxUrl.includes("?")?"&":"?")+e.param(t.find(":input")),o=new EventSource(r);o.onopen=function(){e(window).on("beforeunload",function(){return PB_CoverGeneratorToken.unloadWarning})},o.onmessage=function(n){var t=JSON.parse(n.data);switch(t.action){case"updateStatusBar":u.val(parseInt(t.percentage,10)),c.html(t.info);break;case"complete":o.close(),e(window).unbind("beforeunload"),t.error?(u.removeAttr("value"),c.html(t.error+" "+PB_CoverGeneratorToken.reloadSnippet)):window.location=PB_CoverGeneratorToken.redirectUrl}},o.onerror=function(){o.close(),u.removeAttr("value"),c.html("EventStream Connection Error "+PB_CoverGeneratorToken.reloadSnippet),e(window).unbind("beforeunload")}};o.on("saveAndGenerate",function(n,t){return a.hide(),i.hide(),u.val(0).show(),Object(r.a)(null),c.html(PB_CoverGeneratorToken.ajaxSubmitMsg),e(this).ajaxSubmit({done:d(t),timeout:5e3}),!1}),a.click(function(){var n=tinymce.get("pb_about_unlimited");if(n){var t=n.getContent();e("#pb_about_unlimited").val(t)}o.trigger("saveAndGenerate",["pdf"])}),i.click(function(){o.trigger("saveAndGenerate",["jpg"])})})}});