!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=4)}({4:function(e,t,n){e.exports=n("dvui")},EuuU:function(e,t,n){"use strict";t.a=function(e,t,n){var r,o=document.createElement("div"),a=document.createElement("p"),i=document.getElementsByTagName("h1")[0];if(a.appendChild(document.createTextNode(t)),o.classList.add("notice","notice-".concat(e)),o.appendChild(a),n){r=document.createElement("button");var c=document.createElement("span");r.classList.add("notice-dismiss"),c.classList.add("screen-reader-text"),c.appendChild(document.createTextNode("Dismiss this notice.")),r.appendChild(c),o.classList.add("is-dismissible"),o.appendChild(r)}i.parentNode.insertBefore(o,i.nextSibling),r&&(r.onclick=function(){o.parentNode.removeChild(o)})}},ZDLt:function(e,t,n){"use strict";var r=function(e){return e>9?e:"0".concat(e)};t.a=function(){var e=document.getElementById("pb-sse-seconds"),t=document.getElementById("pb-sse-minutes"),n=0;return t.textContent="00:",e.textContent="00",setInterval(function(){e.textContent=r(++n%60),t.textContent=r(parseInt(n/60,10))+":"},1e3)}},dvui:function(e,t,n){"use strict";n.r(t);var r=n("EuuU"),o=n("xvUD"),a=n("ZDLt");jQuery(function(e){e(document).ready(function(){var t;e(".front-background-image-upload-button").click(function(n){n.preventDefault(),t||(t=wp.media.frames.file_frame=wp.media({multiple:!1})).on("select",function(){var n=t.state().get("selection").first().toJSON();e("#front_background_image").val(n.url),e(".front-background-image").attr("src",n.url),e(".front-background-image-preview-wrap").removeClass("hidden"),e(".front-background-image-upload-button, .front-background-image-description").addClass("hidden")}),t.open()})}),e(".delete-front-background-image").on("click",function(){e("#front_background_image").val(""),e(".front-background-image-preview-wrap").addClass("hidden"),e(".front-background-image-upload-button, .front-background-image-description").removeClass("hidden")});var t=e("#ppi"),n=e("#custom_ppi");""!==t.val()&&n.parent().parent().hide(),t.on("change",function(){""===e(this).val()?n.parent().parent().show():(n.parent().parent().hide(),n.val(e(this).val()))}),e(".colorpicker").wpColorPicker();var i=e(".settings-form"),c=e("#generate-pdf"),u=e("#generate-jpg"),d=e("#pb-sse-progressbar"),s=e("#pb-sse-info"),l=e(".notice"),p=null,f=function(t){var n=e("form."+t),a=PB_CoverGeneratorToken.ajaxUrl+(PB_CoverGeneratorToken.ajaxUrl.includes("?")?"&":"?")+e.param(n.find(":input")),i=new EventSource(a);i.onopen=function(){e(window).on("beforeunload",function(){return PB_CoverGeneratorToken.unloadWarning})},i.onmessage=function(t){var n=JSON.parse(t.data);switch(n.action){case"updateStatusBar":d.val(parseInt(n.percentage,10)),s.html(n.info);break;case"complete":i.close(),e(window).unbind("beforeunload"),n.error?(d.val(0).hide(),c.attr("disabled",!1).show(),u.attr("disabled",!1).show(),Object(r.a)("error",n.error,!0),p&&Object(o.a)(p)):window.location=PB_CoverGeneratorToken.redirectUrl}},i.onerror=function(){i.close(),d.removeAttr("value"),s.html("EventStream Connection Error "+PB_CoverGeneratorToken.reloadSnippet),e(window).unbind("beforeunload"),p&&Object(o.a)(p)}};i.on("saveAndGenerate",function(t,n){return c.hide(),u.hide(),d.val(0).show(),l.remove(),p=Object(a.a)(),s.html(PB_CoverGeneratorToken.ajaxSubmitMsg),e(this).ajaxSubmit({done:f(n),timeout:5e3}),!1}),c.click(function(){var t=tinymce.get("pb_about_unlimited");if(t){var n=t.getContent();e("#pb_about_unlimited").val(n)}i.trigger("saveAndGenerate",["pdf"])}),u.click(function(){i.trigger("saveAndGenerate",["jpg"])})})},xvUD:function(e,t,n){"use strict";t.a=function(e){var t=document.getElementById("pb-sse-seconds");document.getElementById("pb-sse-minutes").textContent="",t.textContent="",clearInterval(e)}}});