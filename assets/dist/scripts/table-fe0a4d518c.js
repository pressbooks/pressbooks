!function(e,t){"use strict";function n(e,t){for(var n,o=[],l=0;l<e.length;++l){if(n=a[e[l]]||r(e[l]),!n)throw"module definition dependecy not found: "+e[l];o.push(n)}t.apply(null,o)}function o(e,o,r){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(o===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";n(o,function(){a[e]=r.apply(null,arguments)})}function r(t){for(var n=e,o=t.split(/[.\/]/),r=0;r<o.length;++r){if(!n[o[r]])return;n=n[o[r]]}return n}var a={};o("tinymce/tableplugin/Utils",["tinymce/Env"],function(e){function t(e,t){return parseInt(e.getAttribute(t)||1,10)}function n(t){(!e.ie||e.ie>9)&&(t.hasChildNodes()||(t.innerHTML='<br data-mce-bogus="1" />'))}return{getSpanVal:t,paddCell:n}}),o("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils"],function(e,n,o){var r=e.each,a=o.getSpanVal;return function(l,i,c){function s(){l.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function d(e){return e===l.getBody()}function u(t,n){return t?(n=e.map(n.split(","),function(e){return e.toLowerCase()}),e.grep(t.childNodes,function(t){return e.inArray(n,t.nodeName.toLowerCase())!==-1})):[]}function f(){var e=0;O=[],U=0,r(["thead","tbody","tfoot"],function(t){var n=u(i,t)[0],o=u(n,"tr");r(o,function(n,o){o+=e,r(u(n,"td,th"),function(e,n){var r,l,i,c;if(O[o])for(;O[o][n];)n++;for(i=a(e,"rowspan"),c=a(e,"colspan"),l=o;l<o+i;l++)for(O[l]||(O[l]=[]),r=n;r<n+c;r++)O[l][r]={part:t,real:l==o&&r==n,elm:e,rowspan:i,colspan:c};U=Math.max(U,n+1)})}),e+=o.length})}function m(e){return l.fire("newrow",{node:e}),e}function g(e){return l.fire("newcell",{node:e}),e}function p(e,t){return e=e.cloneNode(t),e.removeAttribute("id"),e}function b(e,t){var n;if(n=O[t])return n[e]}function h(e,t,n){e&&(n=parseInt(n,10),1===n?e.removeAttribute(t,1):e.setAttribute(t,n,1))}function v(e){return e&&(!!K.getAttrib(e.elm,"data-mce-selected")||e==c)}function y(){var e=[];return r(i.rows,function(t){r(t.cells,function(n){if(K.getAttrib(n,"data-mce-selected")||c&&n==c.elm)return e.push(t),!1})}),e}function w(){var e=K.createRng();d(i)||(e.setStartAfter(i),e.setEndAfter(i),j.setRng(e),K.remove(i))}function x(t){var a,i={};return l.settings.table_clone_elements!==!1&&(i=e.makeMap((l.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),e.walk(t,function(e){var o;if(3==e.nodeType)return r(K.getParents(e.parentNode,null,t).reverse(),function(e){i[e.nodeName]&&(e=p(e,!1),a?o&&o.appendChild(e):a=o=e,o=e)}),o&&(o.innerHTML=n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),t=p(t,!1),g(t),h(t,"rowSpan",1),h(t,"colSpan",1),a?t.appendChild(a):o.paddCell(t),t}function C(){var e,t=K.createRng();return r(K.select("tr",i),function(e){0===e.cells.length&&K.remove(e)}),0===K.select("tr",i).length?(t.setStartBefore(i),t.setEndBefore(i),j.setRng(t),void K.remove(i)):(r(K.select("thead,tbody,tfoot",i),function(e){0===e.rows.length&&K.remove(e)}),f(),void(V&&(e=O[Math.min(O.length-1,V.y)],e&&(j.select(e[Math.min(e.length-1,V.x)].elm,!0),j.collapse(!0)))))}function A(e,t,n,o){var r,a,l,i,c;for(r=O[t][e].elm.parentNode,l=1;l<=n;l++)if(r=K.getNext(r,"tr")){for(a=e;a>=0;a--)if(c=O[t+l][a].elm,c.parentNode==r){for(i=1;i<=o;i++)K.insertAfter(x(c),c);break}if(a==-1)for(i=1;i<=o;i++)r.insertBefore(x(r.cells[0]),r.cells[0])}}function S(){r(O,function(e,t){r(e,function(e,n){var o,r,l;if(v(e)&&(e=e.elm,o=a(e,"colspan"),r=a(e,"rowspan"),o>1||r>1)){for(h(e,"rowSpan",1),h(e,"colSpan",1),l=0;l<o-1;l++)K.insertAfter(x(e),e);A(n,t,r-1,o)}})})}function T(t,n,o){var a,l,i,c,s,d,u,m,g,p,y;if(t?(a=E(t),l=a.x,i=a.y,c=l+(n-1),s=i+(o-1)):(V=G=null,r(O,function(e,t){r(e,function(e,n){v(e)&&(V||(V={x:n,y:t}),G={x:n,y:t})})}),V&&(l=V.x,i=V.y,c=G.x,s=G.y)),m=b(l,i),g=b(c,s),m&&g&&m.part==g.part){S(),f(),m=b(l,i).elm;var w=c-l+1,x=s-i+1;for(w===U&&x===O.length&&(w=1,x=1),w===U&&x>1&&(x=1),h(m,"colSpan",w),h(m,"rowSpan",x),u=i;u<=s;u++)for(d=l;d<=c;d++)O[u]&&O[u][d]&&(t=O[u][d].elm,t!=m&&(p=e.grep(t.childNodes),r(p,function(e){m.appendChild(e)}),p.length&&(p=e.grep(m.childNodes),y=0,r(p,function(e){"BR"==e.nodeName&&y++<p.length-1&&m.removeChild(e)})),K.remove(t)));C()}}function R(e){var n,o,l,i,c,s,d,u,f,g;if(r(O,function(t,o){if(r(t,function(t){if(v(t)&&(t=t.elm,c=t.parentNode,s=m(p(c,!1)),n=o,e))return!1}),e)return!n}),n!==t){for(i=0,g=0;i<O[0].length;i+=g)if(O[n][i]&&(o=O[n][i].elm,g=a(o,"colspan"),o!=l)){if(e){if(n>0&&O[n-1][i]&&(u=O[n-1][i].elm,f=a(u,"rowSpan"),f>1)){h(u,"rowSpan",f+1);continue}}else if(f=a(o,"rowspan"),f>1){h(o,"rowSpan",f+1);continue}d=x(o),h(d,"colSpan",o.colSpan),s.appendChild(d),l=o}s.hasChildNodes()&&(e?c.parentNode.insertBefore(s,c):K.insertAfter(s,c))}}function P(e){var t,n;r(O,function(n){if(r(n,function(n,o){if(v(n)&&(t=o,e))return!1}),e)return!t}),r(O,function(o,r){var l,i,c;o[t]&&(l=o[t].elm,l!=n&&(c=a(l,"colspan"),i=a(l,"rowspan"),1==c?e?(l.parentNode.insertBefore(x(l),l),A(t,r,i-1,c)):(K.insertAfter(x(l),l),A(t,r,i-1,c)):h(l,"colSpan",l.colSpan+1),n=l))})}function N(t){return e.grep(B(t),v)}function B(e){var t=[];return r(e,function(e){r(e,function(e){t.push(e)})}),t}function k(){var t=[];if(d(i)){if(1==O[0].length)return;if(N(O).length==B(O).length)return}r(O,function(n){r(n,function(n,o){v(n)&&e.inArray(t,o)===-1&&(r(O,function(e){var t,n=e[o].elm;t=a(n,"colSpan"),t>1?h(n,"colSpan",t-1):K.remove(n)}),t.push(o))})}),C()}function I(){function e(e){var t,n;r(e.cells,function(e){var n=a(e,"rowSpan");n>1&&(h(e,"rowSpan",n-1),t=E(e),A(t.x,t.y,1,1))}),t=E(e.cells[0]),r(O[t.y],function(e){var t;e=e.elm,e!=n&&(t=a(e,"rowSpan"),t<=1?K.remove(e):h(e,"rowSpan",t-1),n=e)})}var t;t=y(),d(i)&&t.length==i.rows.length||(r(t.reverse(),function(t){e(t)}),C())}function _(){var e=y();if(!d(i)||e.length!=i.rows.length)return K.remove(e),C(),e}function M(){var e=y();return r(e,function(t,n){e[n]=p(t,!0)}),e}function D(t,n){var o,a=y(),l=a[n?0:a.length-1],i=l.cells.length;t&&(o=e.map(t,function(e){return e.cloneNode(!0)}),r(O,function(e){var t;if(i=0,r(e,function(e){e.real&&(i+=e.colspan),e.elm.parentNode==l&&(t=1)}),t)return!1}),n||o.reverse(),r(o,function(e){var t,o,r=e.cells.length;for(m(e),t=0;t<r;t++)o=e.cells[t],g(o),h(o,"colSpan",1),h(o,"rowSpan",1);for(t=r;t<i;t++)e.appendChild(g(x(e.cells[r-1])));for(t=i;t<r;t++)K.remove(e.cells[t]);n?l.parentNode.insertBefore(e,l):K.insertAfter(e,l)}),s())}function E(e){var t;return r(O,function(n,o){return r(n,function(n,r){if(n.elm==e)return t={x:r,y:o},!1}),!t}),t}function z(e){V=E(e)}function L(){var e,t;return e=t=0,r(O,function(n,o){r(n,function(n,r){var a,l;v(n)&&(n=O[o][r],r>e&&(e=r),o>t&&(t=o),n.real&&(a=n.colspan-1,l=n.rowspan-1,a&&r+a>e&&(e=r+a),l&&o+l>t&&(t=o+l)))})}),{x:e,y:t}}function H(e){var t,n,o,r,a,l,i,c,d,u;if(G=E(e),V&&G){for(t=Math.min(V.x,G.x),n=Math.min(V.y,G.y),o=Math.max(V.x,G.x),r=Math.max(V.y,G.y),a=o,l=r,u=n;u<=r;u++)for(d=t;d<=o;d++)e=O[u][d],e.real&&(i=e.colspan-1,c=e.rowspan-1,i&&d+i>a&&(a=d+i),c&&u+c>l&&(l=u+c));for(s(),u=n;u<=l;u++)for(d=t;d<=a;d++)O[u][d]&&K.setAttrib(O[u][d].elm,"data-mce-selected","1")}}function W(e,t){var n,o,r;n=E(e),o=n.y*U+n.x;do{if(o+=t,r=b(o%U,Math.floor(o/U)),!r)break;if(r.elm!=e)return j.select(r.elm,!0),K.isEmpty(r.elm)&&j.collapse(!0),!0}while(r.elm==e);return!1}var O,U,V,G,j=l.selection,K=j.dom;i=i||K.getParent(j.getStart(!0),"table"),f(),c=c||K.getParent(j.getStart(!0),"th,td"),c&&(V=E(c),G=L(),c=b(V.x,V.y)),e.extend(this,{deleteTable:w,split:S,merge:T,insertRow:R,insertCol:P,deleteCols:k,deleteRows:I,cutRows:_,copyRows:M,pasteRows:D,getPos:E,setStartCell:z,setEndCell:H,moveRelIdx:W,refresh:f})}}),o("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(e,t,n,o,r){var a=o.each,l=r.getSpanVal;return function(i){function c(){function n(n){function o(e,t){var o=e?"previousSibling":"nextSibling",a=i.dom.getParent(t,"tr"),l=a[o];if(l)return h(i,t,l,e),n.preventDefault(),!0;var c=i.dom.getParent(a,"table"),u=a.parentNode,f=u.nodeName.toLowerCase();if("tbody"===f||f===(e?"tfoot":"thead")){var m=r(e,c,u,"tbody");if(null!==m)return s(e,m,t)}return d(e,a,o,c)}function r(e,t,n,o){var r=i.dom.select(">"+o,t),a=r.indexOf(n);if(e&&0===a||!e&&a===r.length-1)return c(e,t);if(a===-1){var l="thead"===n.tagName.toLowerCase()?0:r.length-1;return r[l]}return r[a+(e?-1:1)]}function c(e,t){var n=e?"thead":"tfoot",o=i.dom.select(">"+n,t);return 0!==o.length?o[0]:null}function s(e,t,o){var r=u(t,e);return r&&h(i,o,r,e),n.preventDefault(),!0}function d(e,t,r,a){var l=a[r];if(l)return f(l),!0;var c=i.dom.getParent(a,"td,th");if(c)return o(e,c,n);var s=u(t,!e);return f(s),n.preventDefault(),!1}function u(e,t){var n=e&&e[t?"lastChild":"firstChild"];return n&&"BR"===n.nodeName?i.dom.getParent(n,"td,th"):n}function f(e){i.selection.setCursorLocation(e,0)}function m(){return w==e.UP||w==e.DOWN}function g(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"tr");return null!==n}function p(e){for(var t=0,n=e;n.previousSibling;)n=n.previousSibling,t+=l(n,"colspan");return t}function b(e,t){var n=0,o=0;return a(e.children,function(e,r){if(n+=l(e,"colspan"),o=r,n>t)return!1}),o}function h(e,t,n,o){var r=p(i.dom.getParent(t,"td,th")),a=b(n,r),l=n.childNodes[a],c=u(l,o);f(c||l)}function v(e){var t=i.selection.getNode(),n=i.dom.getParent(t,"td,th"),o=i.dom.getParent(e,"td,th");return n&&n!==o&&y(n,o)}function y(e,t){return i.dom.getParent(e,"TABLE")===i.dom.getParent(t,"TABLE")}var w=n.keyCode;if(m()&&g(i)){var x=i.selection.getNode();t.setEditorTimeout(i,function(){v(x)&&o(!n.shiftKey&&w===e.UP,x,n)},0)}}i.on("KeyDown",function(e){n(e)})}function s(){function e(e,t){var n,o=t.ownerDocument,r=o.createRange();return r.setStartBefore(t),r.setEnd(e.endContainer,e.endOffset),n=o.createElement("body"),n.appendChild(r.cloneContents()),0===n.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}i.on("KeyDown",function(t){var n,o,r=i.dom;37!=t.keyCode&&38!=t.keyCode||(n=i.selection.getRng(),o=r.getParent(n.startContainer,"table"),o&&i.getBody().firstChild==o&&e(n,o)&&(n=r.createRng(),n.setStartBefore(o),n.setEndBefore(o),i.selection.setRng(n),t.preventDefault()))})}function d(){i.on("KeyDown SetContent VisualAid",function(){var e;for(e=i.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(e.nodeValue.length>0)break}else if(1==e.nodeType&&("BR"==e.tagName||!e.getAttribute("data-mce-bogus")))break;e&&"TABLE"==e.nodeName&&(i.settings.forced_root_block?i.dom.add(i.getBody(),i.settings.forced_root_block,i.settings.forced_root_block_attrs,n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):i.dom.add(i.getBody(),"br",{"data-mce-bogus":"1"}))}),i.on("PreProcess",function(e){var t=e.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||" "==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&i.dom.remove(t)})}function u(){function e(e,t,n,o){var r,a,l,i=3,c=e.dom.getParent(t.startContainer,"TABLE");return c&&(r=c.parentNode),a=t.startContainer.nodeType==i&&0===t.startOffset&&0===t.endOffset&&o&&("TR"==n.nodeName||n==r),l=("TD"==n.nodeName||"TH"==n.nodeName)&&!o,a||l}function t(){var t=i.selection.getRng(),n=i.selection.getNode(),o=i.dom.getParent(t.startContainer,"TD,TH");if(e(i,t,n,o)){o||(o=n);for(var r=o.lastChild;r.lastChild;)r=r.lastChild;3==r.nodeType&&(t.setEnd(r,r.data.length),i.selection.setRng(t))}}i.on("KeyDown",function(){t()}),i.on("MouseDown",function(e){2!=e.button&&t()})}function f(){function t(e){i.selection.select(e,!0),i.selection.collapse(!0)}function n(e){i.$(e).empty(),r.paddCell(e)}i.on("keydown",function(r){if((r.keyCode==e.DELETE||r.keyCode==e.BACKSPACE)&&!r.isDefaultPrevented()){var a,l,c,s;if(a=i.dom.getParent(i.selection.getStart(),"table")){if(l=i.dom.select("td,th",a),c=o.grep(l,function(e){return!!i.dom.getAttrib(e,"data-mce-selected")}),0===c.length)return s=i.dom.getParent(i.selection.getStart(),"td,th"),void(i.selection.isCollapsed()&&s&&i.dom.isEmpty(s)&&(r.preventDefault(),n(s),t(s)));r.preventDefault(),i.undoManager.transact(function(){l.length==c.length?i.execCommand("mceTableDelete"):(o.each(c,n),t(c[0]))})}}})}f(),n.webkit&&(c(),u()),n.gecko&&(s(),d()),n.ie>9&&(s(),d())}}),o("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(e,t,n){return function(o,r){function a(e){o.getBody().style.webkitUserSelect="",(e||g)&&(o.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),g=!1)}function l(e,t){return!(!e||!t)&&e===m.getParent(t,"table")}function i(t){var n,a,i=t.target;if(!f&&i!==u&&(u=i,d&&s)){if(a=m.getParent(i,"td,th"),l(d,a)||(a=m.getParent(d,"td,th")),s===a&&!g)return;if(r(!0),l(d,a)){t.preventDefault(),c||(c=new e(o,d,s),o.getBody().style.webkitUserSelect="none"),c.setEndCell(a),g=!0,n=o.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(p){}}}}var c,s,d,u,f,m=o.dom,g=!0,p=function(){s=c=d=u=null,r(!1)};return o.on("SelectionChange",function(e){g&&e.stopImmediatePropagation()},!0),o.on("MouseDown",function(e){2==e.button||f||(a(),s=m.getParent(e.target,"td,th"),d=m.getParent(s,"table"))}),o.on("mouseover",i),o.on("remove",function(){m.unbind(o.getDoc(),"mouseover",i),a()}),o.on("MouseUp",function(){function e(e,o){var a=new t(e,e);do{if(3==e.nodeType&&0!==n.trim(e.nodeValue).length)return void(o?r.setStart(e,0):r.setEnd(e,e.nodeValue.length));if("BR"==e.nodeName)return void(o?r.setStartBefore(e):r.setEndBefore(e))}while(e=o?a.next():a.prev())}var r,a,l,i,d,u=o.selection;if(s){if(c&&(o.getBody().style.webkitUserSelect=""),a=m.select("td[data-mce-selected],th[data-mce-selected]"),a.length>0){r=m.createRng(),i=a[0],r.setStartBefore(i),r.setEndAfter(i),e(i,1),l=new t(i,m.getParent(a[0],"table"));do if("TD"==i.nodeName||"TH"==i.nodeName){if(!m.getAttrib(i,"data-mce-selected"))break;d=i}while(i=l.next());e(d),u.setRng(r)}o.nodeChanged(),p()}}),o.on("KeyUp Drop SetContent",function(e){a("setcontent"==e.type),p(),f=!1}),o.on("ObjectResizeStart ObjectResized",function(e){f="objectresized"!=e.type}),{clear:a}}}),o("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(e,t){var n=e.each;return function(o){function r(){var e=o.settings.color_picker_callback;if(e)return function(){var t=this;e.call(o,function(e){t.value(e).fire("change")},t.value())}}function a(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){u(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:r()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:r()}]}]}}function l(e){return e?e.replace(/px$/,""):""}function i(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function c(e){n("left center right".split(" "),function(t){o.formatter.remove("align"+t,{},e)})}function s(e){n("top middle bottom".split(" "),function(t){o.formatter.remove("valign"+t,{},e)})}function d(t,n,o){function r(t,o){return o=o||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=r(e.menu):(t.value=e.value,n&&n(t)),o.push(t)}),o}return r(t,o||[])}function u(e,t,n){var o=t.toJSON(),r=e.parseStyle(o.style);n?(t.find("#borderColor").value(r["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(r["background-color"]||"")[0].fire("change")):(r["border-color"]=o.borderColor,r["background-color"]=o.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(r))))}function f(e,t,n){var o=e.parseStyle(e.getAttrib(n,"style"));o["border-color"]&&(t.borderColor=o["border-color"]),o["background-color"]&&(t.backgroundColor=o["background-color"]),t.style=e.serializeStyle(o)}function m(e,t,o){var r=e.parseStyle(e.getAttrib(t,"style"));n(o,function(e){r[e.name]=e.value}),e.setAttrib(t,"style",e.serializeStyle(e.parseStyle(e.serializeStyle(r))))}var g=this;g.tableProps=function(){g.table(!0)},g.table=function(r){function s(){function n(e,t,o){if("TD"===e.tagName||"TH"===e.tagName)x.setStyle(e,t,o);else if(e.children)for(var r=0;r<e.children.length;r++)n(e.children[r],t,o)}var r;u(x,this),C=e.extend(C,this.toJSON()),C["class"]===!1&&delete C["class"],o.undoManager.transact(function(){if(p||(p=o.plugins.table.insertTable(C.cols||1,C.rows||1)),o.dom.setAttribs(p,{style:C.style,"class":C["class"]}),o.settings.table_style_by_css){if(w=[],w.push({name:"border",value:C.border}),w.push({name:"border-spacing",value:i(C.cellspacing)}),m(x,p,w),x.setAttribs(p,{"data-mce-border-color":C.borderColor,"data-mce-cell-padding":C.cellpadding,"data-mce-border":C.border}),p.children)for(var e=0;e<p.children.length;e++)n(p.children[e],"border",C.border),n(p.children[e],"padding",i(C.cellpadding))}else o.dom.setAttribs(p,{border:C.border,cellpadding:C.cellpadding,cellspacing:C.cellspacing});x.getAttrib(p,"width")&&!o.settings.table_style_by_css?x.setAttrib(p,"width",l(C.width)):x.setStyle(p,"width",i(C.width)),x.setStyle(p,"height",i(C.height)),r=x.select("caption",p)[0],r&&!C.caption&&x.remove(r),!r&&C.caption&&(r=x.create("caption"),r.innerHTML=t.ie?" ":'<br data-mce-bogus="1"/>',p.insertBefore(r,p.firstChild)),c(p),C.align&&o.formatter.apply("align"+C.align,{},p),o.focus(),o.addVisual()})}function g(e,t){function n(e,n){for(var o=0;o<n.length;o++){var r=x.getStyle(n[o],t);if("undefined"==typeof e&&(e=r),e!=r)return""}return e}var r,a=o.dom.select("td,th",e);return r=n(r,a)}var p,b,h,v,y,w,x=o.dom,C={};r===!0?(p=x.getParent(o.selection.getStart(),"table"),p&&(C={width:l(x.getStyle(p,"width")||x.getAttrib(p,"width")),height:l(x.getStyle(p,"height")||x.getAttrib(p,"height")),cellspacing:l(x.getStyle(p,"border-spacing")||x.getAttrib(p,"cellspacing")),cellpadding:x.getAttrib(p,"data-mce-cell-padding")||x.getAttrib(p,"cellpadding")||g(p,"padding"),border:x.getAttrib(p,"data-mce-border")||x.getAttrib(p,"border")||g(p,"border"),borderColor:x.getAttrib(p,"data-mce-border-color"),caption:!!x.select("caption",p)[0],"class":x.getAttrib(p,"class")},n("left center right".split(" "),function(e){o.formatter.matchNode(p,"align"+e)&&(C.align=e)}))):(b={label:"Cols",name:"cols"},h={label:"Rows",name:"rows"}),o.settings.table_class_list&&(C["class"]&&(C["class"]=C["class"].replace(/\s*mce\-item\-table\s*/g,"")),v={name:"class",type:"listbox",label:"Class",values:d(o.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"table",classes:[e.value]})})})}),y={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:o.settings.table_appearance_options!==!1?[b,h,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[b,h,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},v]},o.settings.table_advtab!==!1?(f(x,C,p),o.windowManager.open({title:"Table properties",data:C,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},a(x)],onsubmit:s})):o.windowManager.open({title:"Table properties",data:C,body:y,onsubmit:s})},g.merge=function(e,t){o.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();o.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})},g.cell=function(){function t(){u(p,this),m=e.extend(m,this.toJSON()),o.undoManager.transact(function(){n(b,function(e){o.dom.setAttribs(e,{scope:m.scope,style:m.style,"class":m["class"]}),o.dom.setStyles(e,{width:i(m.width),height:i(m.height)}),m.type&&e.nodeName.toLowerCase()!=m.type&&(e=p.rename(e,m.type)),c(e),m.align&&o.formatter.apply("align"+m.align,{},e),s(e),m.valign&&o.formatter.apply("valign"+m.valign,{},e)}),o.focus()})}var r,m,g,p=o.dom,b=[];if(b=o.dom.select("td[data-mce-selected],th[data-mce-selected]"),r=o.dom.getParent(o.selection.getStart(),"td,th"),!b.length&&r&&b.push(r),r=r||b[0]){m={width:l(p.getStyle(r,"width")||p.getAttrib(r,"width")),height:l(p.getStyle(r,"height")||p.getAttrib(r,"height")),scope:p.getAttrib(r,"scope"),"class":p.getAttrib(r,"class")},m.type=r.nodeName.toLowerCase(),n("left center right".split(" "),function(e){o.formatter.matchNode(r,"align"+e)&&(m.align=e)}),n("top middle bottom".split(" "),function(e){o.formatter.matchNode(r,"valign"+e)&&(m.valign=e)}),o.settings.table_cell_class_list&&(g={name:"class",type:"listbox",label:"Class",values:d(o.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"td",classes:[e.value]})})})});var h={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},g]};o.settings.table_cell_advtab!==!1?(f(p,m,r),o.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:m,body:[{title:"General",type:"form",items:h},a(p)],onsubmit:t})):o.windowManager.open({title:"Cell properties",data:m,body:h,onsubmit:t})}},g.row=function(){function t(){var t,r,a;u(h,this),p=e.extend(p,this.toJSON()),o.undoManager.transact(function(){var e=p.type;n(v,function(n){o.dom.setAttribs(n,{scope:p.scope,style:p.style,"class":p["class"]}),o.dom.setStyles(n,{height:i(p.height)}),e!=n.parentNode.nodeName.toLowerCase()&&(t=h.getParent(n,"table"),r=n.parentNode,a=h.select(e,t)[0],a||(a=h.create(e),t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a)),a.appendChild(n),r.hasChildNodes()||h.remove(r)),c(n),p.align&&o.formatter.apply("align"+p.align,{},n)}),o.focus()})}var r,s,m,g,p,b,h=o.dom,v=[];r=o.dom.getParent(o.selection.getStart(),"table"),s=o.dom.getParent(o.selection.getStart(),"td,th"),n(r.rows,function(e){n(e.cells,function(t){if(h.getAttrib(t,"data-mce-selected")||t==s)return v.push(e),!1})}),m=v[0],m&&(p={height:l(h.getStyle(m,"height")||h.getAttrib(m,"height")),scope:h.getAttrib(m,"scope"),"class":h.getAttrib(m,"class")},p.type=m.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),function(e){o.formatter.matchNode(m,"align"+e)&&(p.align=e)}),o.settings.table_row_class_list&&(g={name:"class",type:"listbox",label:"Class",values:d(o.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"tr",classes:[e.value]})})})}),b={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},g]},o.settings.table_row_advtab!==!1?(f(h,p,m),o.windowManager.open({title:"Row properties",data:p,bodyType:"tabpanel",body:[{title:"General",type:"form",items:b},a(h)],onsubmit:t})):o.windowManager.open({title:"Row properties",data:p,body:b,onsubmit:t}))}}}),o("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(e,n){var o;return function(r){function a(e,t){return{index:e,y:r.dom.getPos(t).y}}function l(e,t){return{index:e,y:r.dom.getPos(t).y+t.offsetHeight}}function i(e,t){return{index:e,x:r.dom.getPos(t).x}}function c(e,t){return{index:e,x:r.dom.getPos(t).x+t.offsetWidth}}function s(){var e=r.getBody().dir;return"rtl"===e}function d(){return r.inline}function u(){return d?r.getBody().ownerDocument.body:r.getBody()}function f(e,t){return s()?c(e,t):i(e,t)}function m(e,t){return s()?i(e,t):c(e,t)}function g(e,t){return p(e,"width")/p(t,"width")*100}function p(e,t){var n=r.dom.getStyle(e,t,!0),o=parseInt(n,10);return o}function b(e){var t=p(e,"width"),n=p(e.parentElement,"width");return t/n*100}function h(e,t){var n=p(e,"width");return t/n*100}function v(e,t){var n=p(e.parentElement,"width");return t/n*100}function y(e,t,n){for(var o=[],r=1;r<n.length;r++){var a=n[r].element;o.push(e(r-1,a))}var l=n[n.length-1];return o.push(t(n.length-1,l.element)),o}function w(){var t=r.dom.select("."+fe,u());e.each(t,function(e){r.dom.remove(e)})}function x(e){w(),I(e)}function C(e,t,n,o,r,a,l,i){var c={"data-mce-bogus":"all","class":fe+" "+e,unselectable:"on","data-mce-resize":!1,style:"cursor: "+t+"; margin: 0; padding: 0; position: absolute; left: "+n+"px; top: "+o+"px; height: "+r+"px; width: "+a+"px; "};return c[l]=i,c}function A(t,n,o){e.each(t,function(e){var t=o.x,a=e.y-xe/2,l=xe,i=n;r.dom.add(u(),"div",C(me,ge,t,a,l,i,pe,e.index))})}function S(t,n,o){e.each(t,function(e){var t=e.x-xe/2,a=o.y,l=n,i=xe;r.dom.add(u(),"div",C(he,ve,t,a,l,i,ye,e.index))})}function T(t){return e.map(t.rows,function(t){var n=e.map(t.cells,function(e){var t=e.hasAttribute("rowspan")?parseInt(e.getAttribute("rowspan"),10):1,n=e.hasAttribute("colspan")?parseInt(e.getAttribute("colspan"),10):1;return{element:e,rowspan:t,colspan:n}});return{element:t,cells:n}})}function R(n){function o(e,t){return e+","+t}function r(e,t){return i[o(e,t)]}function a(){var t=[];return e.each(c,function(e){t=t.concat(e.cells)}),t}function l(){return c}var i={},c=[],s=0,d=0;return e.each(n,function(n,r){var a=[];e.each(n.cells,function(e){for(var n=0;i[o(r,n)]!==t;)n++;for(var l={element:e.element,colspan:e.colspan,rowspan:e.rowspan,rowIndex:r,colIndex:n},c=0;c<e.colspan;c++)for(var u=0;u<e.rowspan;u++){var f=r+u,m=n+c;i[o(f,m)]=l,s=Math.max(s,f+1),d=Math.max(d,m+1)}a.push(l)}),c.push({element:n.element,cells:a})}),{grid:{maxRows:s,maxCols:d},getAt:r,getAllCells:a,getAllRows:l}}function P(e,t){for(var n=[],o=e;o<t;o++)n.push(o);return n}function N(e,t,n){for(var o,r=e(),a=0;a<r.length;a++)t(r[a])&&(o=r[a]);return o?o:n()}function B(t){var n=P(0,t.grid.maxCols),o=P(0,t.grid.maxRows);return e.map(n,function(e){function n(){for(var n=[],r=0;r<o.length;r++){var a=t.getAt(r,e);a&&a.colIndex===e&&n.push(a)}return n}function r(e){return 1===e.colspan}function a(){for(var n,r=0;r<o.length;r++)if(n=t.getAt(r,e))return n;return null}return N(n,r,a)})}function k(t){var n=P(0,t.grid.maxCols),o=P(0,t.grid.maxRows);return e.map(o,function(e){function o(){for(var o=[],r=0;r<n.length;r++){var a=t.getAt(e,r);a&&a.rowIndex===e&&o.push(a)}return o}function r(e){return 1===e.rowspan}function a(){return t.getAt(e,0)}return N(o,r,a)})}function I(e){var t=T(e),n=R(t),o=k(n),i=B(n),c=r.dom.getPos(e),s=o.length>0?y(a,l,o):[],d=i.length>0?y(f,m,i):[];A(s,e.offsetWidth,c),S(d,e.offsetHeight,c)}function _(e,t,n,o){if(t<0||t>=e.length-1)return"";var r=e[t];if(r)r={value:r,delta:0};else for(var a=e.slice(0,t).reverse(),l=0;l<a.length;l++)a[l]&&(r={value:a[l],delta:l+1});var i=e[t+1];if(i)i={value:i,delta:1};else for(var c=e.slice(t+1),s=0;s<c.length;s++)c[s]&&(i={value:c[s],delta:s+1});var d=i.delta-r.delta,u=Math.abs(i.value-r.value)/d;return n?u/p(o,"width")*100:u}function M(e,t){var n=r.dom.getStyle(e,t);return n||(n=r.dom.getAttrib(e,t)),n||(n=r.dom.getStyle(e,t,!0)),n}function D(e,t,n){var o=M(e,"width"),r=parseInt(o,10),a=t?g(e,n):p(e,"width");return(t&&!G(o)||!t&&!j(o))&&(r=0),!isNaN(r)&&r>0?r:a}function E(t,n,o){for(var r=B(t),a=e.map(r,function(e){return f(e.colIndex,e.element).x}),l=[],i=0;i<r.length;i++){var c=r[i].element.hasAttribute("colspan")?parseInt(r[i].element.getAttribute("colspan"),10):1,s=c>1?_(a,i):D(r[i].element,n,o);s=s?s:Ce,l.push(s)}return l}function z(e){var t=M(e,"height"),n=parseInt(t,10);return G(t)&&(n=0),!isNaN(n)&&n>0?n:p(e,"height")}function L(t){for(var n=k(t),o=e.map(n,function(e){return a(e.rowIndex,e.element).y}),r=[],l=0;l<n.length;l++){var i=n[l].element.hasAttribute("rowspan")?parseInt(n[l].element.getAttribute("rowspan"),10):1,c=i>1?_(o,l):z(n[l].element);c=c?c:Ae,r.push(c)}return r}function H(t,n,o,r,a){function l(t){return e.map(t,function(){return 0})}function i(){var e;if(a)e=[100-u[0]];else{var t=Math.max(r,u[0]+o);e=[t-u[0]]}return e}function c(e,t){var n,a=l(u.slice(0,e)),i=l(u.slice(t+1));if(o>=0){var c=Math.max(r,u[t]-o);n=a.concat([o,c-u[t]]).concat(i)}else{var s=Math.max(r,u[e]+o),d=u[e]-s;n=a.concat([s-u[e],d]).concat(i)}return n}function s(e,t){var n,a=l(u.slice(0,t));if(o>=0)n=a.concat([o]);else{var i=Math.max(r,u[t]+o);n=a.concat([i-u[t]])}return n}var d,u=t.slice(0);return d=0===t.length?[]:1===t.length?i():0===n?c(0,1):n>0&&n<t.length-1?c(n,n+1):n===t.length-1?s(n-1,n):[]}function W(e,t,n){for(var o=0,r=e;r<t;r++)o+=n[r];return o}function O(t,n){var o=t.getAllCells();return e.map(o,function(e){var t=W(e.colIndex,e.colIndex+e.colspan,n);return{element:e.element,width:t,colspan:e.colspan}})}function U(t,n){var o=t.getAllCells();return e.map(o,function(e){var t=W(e.rowIndex,e.rowIndex+e.rowspan,n);return{element:e.element,height:t,rowspan:e.rowspan}})}function V(t,n){var o=t.getAllRows();return e.map(o,function(e,t){return{element:e.element,height:n[t]}})}function G(e){return Te.test(e)}function j(e){return Re.test(e)}function K(t,n,o){function a(t,n){e.each(t,function(e){r.dom.setStyle(e.element,"width",e.width+n),r.dom.setAttrib(e.element,"width",null)})}function l(){return o<d.grid.maxCols-1?b(t):b(t)+v(t,n)}function i(){return o<d.grid.maxCols-1?p(t,"width"):p(t,"width")+n}function c(e,n,a){o!=d.grid.maxCols-1&&a||(r.dom.setStyle(t,"width",e+n),r.dom.setAttrib(t,"width",null))}for(var s=T(t),d=R(s),u=G(t.width)||G(t.style.width),f=E(d,u,t),m=u?h(t,n):n,g=H(f,o,m,Ce,u,t),y=[],w=0;w<g.length;w++)y.push(g[w]+f[w]);var x=O(d,y),C=u?"%":"px",A=u?l():i();r.undoManager.transact(function(){a(x,C),c(A,C,u)})}function $(t,n,o){for(var a=T(t),l=R(a),i=L(l),c=[],s=0,d=0;d<i.length;d++)c.push(d===o?n+i[d]:i[d]),s+=s[d];var u=U(l,c),f=V(l,c);r.undoManager.transact(function(){e.each(f,function(e){r.dom.setStyle(e.element,"height",e.height+"px"),r.dom.setAttrib(e.element,"height",null)}),e.each(u,function(e){r.dom.setStyle(e.element,"height",e.height+"px"),r.dom.setAttrib(e.element,"height",null)}),r.dom.setStyle(t,"height",s+"px"),r.dom.setAttrib(t,"height",null)})}function X(){le=setTimeout(function(){Q()},200)}function Y(){clearTimeout(le)}function J(){var e=document.createElement("div");return e.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),e.setAttribute("data-mce-bogus","all"),e}function F(e,t){r.dom.bind(e,"mouseup",function(){Q()}),r.dom.bind(e,"mousemove",function(e){Y(),ie&&t(e)}),r.dom.bind(e,"mouseout",function(){
X()})}function Q(){if(r.dom.remove(ce),ie){r.dom.removeClass(se,Se),ie=!1;var e,t;if(Z(se)){var n=parseInt(r.dom.getAttrib(se,we),10),a=r.dom.getPos(se).x;e=parseInt(r.dom.getAttrib(se,ye),10),t=s()?n-a:a-n,K(o,t,e)}else if(ee(se)){var l=parseInt(r.dom.getAttrib(se,be),10),i=r.dom.getPos(se).y;e=parseInt(r.dom.getAttrib(se,pe),10),t=i-l,$(o,t,e)}x(o),r.nodeChanged()}}function q(e,t){ce=ce?ce:J(),ie=!0,r.dom.addClass(e,Se),se=e,F(ce,t),r.dom.add(u(),ce)}function Z(e){return r.dom.hasClass(e,he)}function ee(e){return r.dom.hasClass(e,me)}function te(e){de=de!==t?de:e.clientX;var n=e.clientX-de;de=e.clientX;var o=r.dom.getPos(se).x;r.dom.setStyle(se,"left",o+n+"px")}function ne(e){ue=ue!==t?ue:e.clientY;var n=e.clientY-ue;ue=e.clientY;var o=r.dom.getPos(se).y;r.dom.setStyle(se,"top",o+n+"px")}function oe(e){de=t,q(e,te)}function re(e){ue=t,q(e,ne)}function ae(e){var t=e.target,n=r.getBody();if(r.$.contains(n,o)||o===n)if(Z(t)){e.preventDefault();var a=r.dom.getPos(t).x;r.dom.setAttrib(t,we,a),oe(t)}else if(ee(t)){e.preventDefault();var l=r.dom.getPos(t).y;r.dom.setAttrib(t,be,l),re(t)}else w()}var le,ie,ce,se,de,ue,fe="mce-resize-bar",me="mce-resize-bar-row",ge="row-resize",pe="data-row",be="data-initial-top",he="mce-resize-bar-col",ve="col-resize",ye="data-col",we="data-initial-left",xe=4,Ce=10,Ae=10,Se="mce-resize-bar-dragging",Te=new RegExp(/(\d+(\.\d+)?%)/),Re=new RegExp(/px|em/);return r.on("init",function(){r.dom.bind(u(),"mousedown",ae)}),r.on("ObjectResized",function(t){var n=t.target;if("TABLE"===n.nodeName){var o=[];e.each(n.rows,function(t){e.each(t.cells,function(e){var t=r.dom.getStyle(e,"width",!0);o.push({cell:e,width:t})})}),e.each(o,function(e){r.dom.setStyle(e.cell,"width",e.width),r.dom.setAttrib(e.cell,"width",null)})}}),r.on("mouseover",function(e){if(!ie){var t=r.dom.getParent(e.target,"table");("TABLE"===e.target.nodeName||t)&&(o=t,x(t))}}),r.on("keydown",function(e){switch(e.keyCode){case n.LEFT:case n.RIGHT:case n.UP:case n.DOWN:w()}}),r.on("remove",function(){w(),r.dom.unbind(u(),"mousedown",ae)}),{adjustWidth:K,adjustHeight:$,clearBars:w,drawBars:I,determineDeltas:H,getTableGrid:R,getTableDetails:T,getWidths:E,getPixelHeights:L,isPercentageBasedSize:G,isPixelBasedSize:j,recalculateWidths:O,recalculateCellHeights:U,recalculateRowHeights:V}}}),o("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(e,t,n,o,r,a,l,i,c){function s(a){function l(e){return function(){a.execCommand(e)}}function c(e,t){var n,o,r,l;for(r='<table id="__mce"><tbody>',n=0;n<t;n++){for(r+="<tr>",o=0;o<e;o++)r+="<td>"+(i.ie&&i.ie<10?"&nbsp;":"<br>")+"</td>";r+="</tr>"}return r+="</tbody></table>",a.undoManager.transact(function(){a.insertContent(r),l=a.dom.get("__mce"),a.dom.setAttrib(l,"id",null),a.$("tr",l).each(function(e,t){a.fire("newrow",{node:t}),a.$("th,td",t).each(function(e,t){a.fire("newcell",{node:t})})}),a.dom.setAttribs(l,a.settings.table_default_attributes||{}),a.dom.setStyles(l,a.settings.table_default_styles||{})}),l}function s(e,t,n){function o(){var o,r,l,i={},c=0;r=a.dom.select("td[data-mce-selected],th[data-mce-selected]"),o=r[0],o||(o=a.selection.getStart()),n&&r.length>0?(d(r,function(e){return i[e.parentNode.parentNode.nodeName]=1}),d(i,function(e){c+=e}),l=1!==c):l=!a.dom.getParent(o,t),e.disabled(l),a.selection.selectorChanged(t,function(t){e.disabled(!t)})}a.initialized?o():a.on("init",o)}function u(){s(this,"table")}function f(){s(this,"td,th")}function m(){s(this,"td,th",!0)}function g(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function p(e,t,n){var o,r,l,i,c,s=n.getEl().getElementsByTagName("table")[0],d=n.isRtl()||"tl-tr"==n.parent().rel;for(s.nextSibling.innerHTML=e+1+" x "+(t+1),d&&(e=9-e),r=0;r<10;r++)for(o=0;o<10;o++)i=s.rows[r].childNodes[o].firstChild,c=(d?o>=e:o<=e)&&r<=t,a.dom.toggleClass(i,"mce-active",c),c&&(l=i);return l.parentNode}function b(){a.addButton("tableprops",{title:"Table properties",onclick:S.tableProps,icon:"table"}),a.addButton("tabledelete",{title:"Delete table",onclick:l("mceTableDelete")}),a.addButton("tablecellprops",{title:"Cell properties",onclick:l("mceTableCellProps")}),a.addButton("tablemergecells",{title:"Merge cells",onclick:l("mceTableMergeCells")}),a.addButton("tablesplitcells",{title:"Split cell",onclick:l("mceTableSplitCells")}),a.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:l("mceTableInsertRowBefore")}),a.addButton("tableinsertrowafter",{title:"Insert row after",onclick:l("mceTableInsertRowAfter")}),a.addButton("tabledeleterow",{title:"Delete row",onclick:l("mceTableDeleteRow")}),a.addButton("tablerowprops",{title:"Row properties",onclick:l("mceTableRowProps")}),a.addButton("tablecutrow",{title:"Cut row",onclick:l("mceTableCutRow")}),a.addButton("tablecopyrow",{title:"Copy row",onclick:l("mceTableCopyRow")}),a.addButton("tablepasterowbefore",{title:"Paste row before",onclick:l("mceTablePasteRowBefore")}),a.addButton("tablepasterowafter",{title:"Paste row after",onclick:l("mceTablePasteRowAfter")}),a.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:l("mceTableInsertColBefore")}),a.addButton("tableinsertcolafter",{title:"Insert column after",onclick:l("mceTableInsertColAfter")}),a.addButton("tabledeletecol",{title:"Delete column",onclick:l("mceTableDeleteCol")})}function h(e){var t=a.dom.is(e,"table")&&a.getBody().contains(e);return t}function v(){var e=a.settings.table_toolbar;""!==e&&e!==!1&&(e||(e="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),a.addContextToolbar(h,e))}function y(){return x}function w(e){x=e}var x,C,A=this,S=new o(a);!a.settings.object_resizing||a.settings.table_resize_bars===!1||a.settings.object_resizing!==!0&&"table"!==a.settings.object_resizing||(C=r(a)),a.settings.table_grid===!1?a.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:S.table}):a.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),S.table())},onshow:function(){p(0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");a.dom.removeClass(e,"mce-active"),a.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:g(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,o=e.target;"A"==o.tagName.toUpperCase()&&(t=parseInt(o.getAttribute("data-mce-x"),10),n=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),t===this.lastX&&n===this.lastY||(p(t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),a.undoManager.transact(function(){c(t.lastX+1,t.lastY+1)}),a.addVisual())}}]}),a.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:u,onclick:S.tableProps}),a.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:u,cmd:"mceTableDelete"}),a.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:l("mceTableCellProps"),onPostRender:f},{text:"Merge cells",onclick:l("mceTableMergeCells"),onPostRender:m},{text:"Split cell",onclick:l("mceTableSplitCells"),onPostRender:f}]}),a.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:l("mceTableInsertRowBefore"),onPostRender:f},{text:"Insert row after",onclick:l("mceTableInsertRowAfter"),onPostRender:f},{text:"Delete row",onclick:l("mceTableDeleteRow"),onPostRender:f},{text:"Row properties",onclick:l("mceTableRowProps"),onPostRender:f},{text:"-"},{text:"Cut row",onclick:l("mceTableCutRow"),onPostRender:f},{text:"Copy row",onclick:l("mceTableCopyRow"),onPostRender:f},{text:"Paste row before",onclick:l("mceTablePasteRowBefore"),onPostRender:f},{text:"Paste row after",onclick:l("mceTablePasteRowAfter"),onPostRender:f}]}),a.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:l("mceTableInsertColBefore"),onPostRender:f},{text:"Insert column after",onclick:l("mceTableInsertColAfter"),onPostRender:f},{text:"Delete column",onclick:l("mceTableDeleteCol"),onPostRender:f}]});var T=[];d("inserttable tableprops deletetable | cell row column".split(" "),function(e){"|"==e?T.push({text:"-"}):T.push(a.menuItems[e])}),a.addButton("table",{type:"menubutton",title:"Table",menu:T}),i.isIE||a.on("click",function(e){e=e.target,"TABLE"===e.nodeName&&(a.selection.select(e),a.nodeChanged())}),A.quirks=new t(a),a.on("Init",function(){A.cellSelection=new n(a,function(e){e&&C.clearBars()}),A.resizeBars=C}),a.on("PreInit",function(){a.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})}),d({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t;t=a.dom.getParent(a.selection.getStart(),"th,td"),a.dom.select("td[data-mce-selected],th[data-mce-selected]").length?e.merge():S.merge(e,t)},mceTableInsertRowBefore:function(e){e.insertRow(!0)},mceTableInsertRowAfter:function(e){e.insertRow()},mceTableInsertColBefore:function(e){e.insertCol(!0)},mceTableInsertColAfter:function(e){e.insertCol()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){x=e.cutRows()},mceTableCopyRow:function(e){x=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(x,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(x)},mceTableDelete:function(e){C&&C.clearBars(),e.deleteTable()}},function(t,n){a.addCommand(n,function(){var n=new e(a);n&&(t(n),a.execCommand("mceRepaint"),A.cellSelection.clear())})}),d({mceInsertTable:S.table,mceTableProps:function(){S.table(!0)},mceTableRowProps:S.row,mceTableCellProps:S.cell},function(e,t){a.addCommand(t,function(t,n){e(n)})}),b(),v(),a.settings.table_tab_navigation!==!1&&a.on("keydown",function(t){var n,o,r;9==t.keyCode&&(n=a.dom.getParent(a.selection.getStart(),"th,td"),n&&(t.preventDefault(),o=new e(a),r=t.shiftKey?-1:1,a.undoManager.transact(function(){!o.moveRelIdx(n,r)&&r>0&&(o.insertRow(),o.refresh(),o.moveRelIdx(n,r))})))}),A.insertTable=c,A.setClipboardRows=w,A.getClipboardRows=y}var d=a.each;c.add("table",s)})}(this);