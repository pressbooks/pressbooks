(()=>{"use strict";const e=function(e){var n=document.getElementById("pb-sse-seconds");document.getElementById("pb-sse-minutes").textContent="",n.textContent="",clearInterval(e)},n=function(e){return e>9?e:"0".concat(e)};jQuery((function(t){var o=t("#pb-cloner-form");o.on("submit",(function(r){r.preventDefault();var a=t("#pb-cloner-button"),s=t("#pb-sse-progressbar"),i=t("#pb-sse-info"),d=t(".notice"),c=null;s.val(0).show(),a.attr("disabled",!0).hide(),d.remove();var l=PB_ClonerToken.ajaxUrl+(PB_ClonerToken.ajaxUrl.includes("?")?"&":"?")+t.param(o.find(":input")),u=new EventSource(l);u.onopen=function(){var e,o,r;e=document.getElementById("pb-sse-seconds"),o=document.getElementById("pb-sse-minutes"),r=0,o.textContent="00:",e.textContent="00",c=setInterval((function(){e.textContent=n(++r%60),o.textContent=n(parseInt(r/60,10))+":"}),1e3),t(window).on("beforeunload",(function(){return PB_ClonerToken.unloadWarning}))},u.onmessage=function(n){var o=JSON.parse(n.data);switch(o.action){case"updateStatusBar":s.val(parseInt(o.percentage,10)),i.html(o.info);break;case"complete":u.close(),t(window).unbind("beforeunload"),o.error?(s.val(0).hide(),a.attr("disabled",!1).show(),function(e,n,t){var o,r=document.createElement("div"),a=document.createElement("p"),s=document.getElementsByTagName("h1")[0];if(a.setAttribute("aria-live","assertive"),a.insertAdjacentHTML("beforeend",n),r.classList.add("notice","notice-".concat(e)),r.appendChild(a),t){o=document.createElement("button");var i=document.createElement("span");o.classList.add("notice-dismiss"),i.classList.add("screen-reader-text"),i.appendChild(document.createTextNode("Dismiss this notice.")),o.appendChild(i),r.classList.add("is-dismissible"),r.appendChild(o)}s.parentNode.insertBefore(r,s.nextSibling),o&&(o.onclick=function(){r.parentNode.removeChild(r)})}("error",o.error,!0),i.html(""),c&&e(c)):window.location=PB_ClonerToken.redirectUrl}},u.onerror=function(){u.close(),t("#pb-sse-progressbar").removeAttr("value"),t("#pb-sse-info").html("EventStream Connection Error "+PB_ClonerToken.reloadSnippet),t(window).unbind("beforeunload"),c&&e(c)}}))}))})();